import{k as ln}from"./pointsCloudSystem-2vcS-S4d.js";const d=4,cn=4,f=1,an=2,on=8,L=65536,Dn=L>>3,un=16,U=14,F=(1<<un)+1,m=1<<U,q=m-1,k=59,V=63,sn=2+V-k;var J;(function(n){n[n.NO_COMPRESSION=0]="NO_COMPRESSION",n[n.RLE_COMPRESSION=1]="RLE_COMPRESSION",n[n.ZIPS_COMPRESSION=2]="ZIPS_COMPRESSION",n[n.ZIP_COMPRESSION=3]="ZIP_COMPRESSION",n[n.PIZ_COMPRESSION=4]="PIZ_COMPRESSION",n[n.PXR24_COMPRESSION=5]="PXR24_COMPRESSION"})(J||(J={}));var Y;(function(n){n[n.INCREASING_Y=0]="INCREASING_Y",n[n.DECREASING_Y=1]="DECREASING_Y"})(Y||(Y={}));const C=vn();function vn(){const n=new ArrayBuffer(4),t=new Float32Array(n),e=new Uint32Array(n),r=new Uint32Array(512),i=new Uint32Array(512);for(let l=0;l<256;++l){const c=l-127;c<-27?(r[l]=0,r[l|256]=32768,i[l]=24,i[l|256]=24):c<-14?(r[l]=1024>>-c-14,r[l|256]=1024>>-c-14|32768,i[l]=-c-1,i[l|256]=-c-1):c<=15?(r[l]=c+15<<10,r[l|256]=c+15<<10|32768,i[l]=13,i[l|256]=13):c<128?(r[l]=31744,r[l|256]=64512,i[l]=24,i[l|256]=24):(r[l]=31744,r[l|256]=64512,i[l]=13,i[l|256]=13)}const u=new Uint32Array(2048),o=new Uint32Array(64),s=new Uint32Array(64);for(let l=1;l<1024;++l){let c=l<<13,a=0;for(;!(c&8388608);)c<<=1,a-=8388608;c&=-8388609,a+=947912704,u[l]=c|a}for(let l=1024;l<2048;++l)u[l]=939524096+(l-1024<<13);for(let l=1;l<31;++l)o[l]=l<<23;o[31]=1199570944,o[32]=2147483648;for(let l=33;l<63;++l)o[l]=2147483648+(l-32<<23);o[63]=3347054592;for(let l=1;l<64;++l)l!==32&&(s[l]=1024);return{floatView:t,uint32View:e,baseTable:r,shiftTable:i,mantissaTable:u,exponentTable:o,offsetTable:s}}function xn(n,t){const e=new Uint8Array(n);let r=0;for(;e[t.value+r]!=0;)r+=1;const i=new TextDecoder().decode(e.slice(t.value,t.value+r));return t.value=t.value+r+1,i}function T(n,t){const e=n.getInt32(t.value,!0);return t.value+=d,e}function H(n,t){const e=n.getUint32(t.value,!0);return t.value+=d,e}function K(n,t){const e=n.getUint8(t.value);return t.value+=f,e}function En(n,t){const e=n.getUint16(t.value,!0);return t.value+=an,e}function j(n,t){const e=n[t.value];return t.value+=f,e}function Cn(n,t){let e;return"getBigInt64"in DataView.prototype?e=Number(n.getBigInt64(t.value,!0)):e=n.getUint32(t.value+4,!0)+Number(n.getUint32(t.value,!0)<<32),t.value+=on,e}function p(n,t){const e=n.getFloat32(t.value,!0);return t.value+=cn,e}function Zn(n,t){return Sn(En(n,t))}function Sn(n){const t=(n&31744)>>10,e=n&1023;return(n>>15?-1:1)*(t?t===31?e?NaN:1/0:Math.pow(2,t-15)*(1+e/1024):6103515625e-14*(e/1024))}function In(n){if(Math.abs(n)>65504)throw new Error("Value out of range.Consider using float instead of half-float.");n=ln(n,-65504,65504),C.floatView[0]=n;const t=C.uint32View[0],e=t>>23&511;return C.baseTable[e]+((t&8388607)>>C.shiftTable[e])}function Gn(n,t){return In(p(n,t))}function pn(n,t,e){const r=new TextDecoder().decode(new Uint8Array(n).slice(t.value,t.value+e));return t.value=t.value+e,r}function hn(n,t){const e=T(n,t),r=H(n,t);return[e,r]}function Pn(n,t){const e=H(n,t),r=H(n,t);return[e,r]}function gn(n,t){const e=p(n,t),r=p(n,t);return[e,r]}function Nn(n,t){const e=p(n,t),r=p(n,t),i=p(n,t);return[e,r,i]}function On(n,t,e){const r=t.value,i=[];for(;t.value<r+e-1;){const u=xn(n.buffer,t),o=T(n,t),s=K(n,t);t.value+=3;const l=T(n,t),c=T(n,t);i.push({name:u,pixelType:o,pLinear:s,xSampling:l,ySampling:c})}return t.value+=1,i}function Tn(n,t){const e=p(n,t),r=p(n,t),i=p(n,t),u=p(n,t),o=p(n,t),s=p(n,t),l=p(n,t),c=p(n,t);return{redX:e,redY:r,greenX:i,greenY:u,blueX:o,blueY:s,whiteX:l,whiteY:c}}function _n(n,t){return K(n,t)}function wn(n,t){const e=T(n,t),r=T(n,t),i=T(n,t),u=T(n,t);return{xMin:e,yMin:r,xMax:i,yMax:u}}function Un(n,t){const e=K(n,t);return Y[e]}function Ln(n,t,e,r){switch(e){case"string":case"stringvector":case"iccProfile":return pn(n.buffer,t,r);case"chlist":return On(n,t,r);case"chromaticities":return Tn(n,t);case"compression":return _n(n,t);case"box2i":return wn(n,t);case"lineOrder":return Un(n,t);case"float":return p(n,t);case"v2f":return gn(n,t);case"v3f":return Nn(n,t);case"int":return T(n,t);case"rational":return hn(n,t);case"timecode":return Pn(n,t);case"preview":return t.value+=r,"skipped";default:t.value+=r;return}}function kn(n){for(let t=1;t<n.length;t++){const e=n[t-1]+n[t]-128;n[t]=e}}function Yn(n,t){let e=0,r=Math.floor((n.length+1)/2),i=0;const u=n.length-1;for(;!(i>u||(t[i++]=n[e++],i>u));)t[i++]=n[r++]}const nn=16,An=1<<nn-1,Q=(1<<nn)-1;function Xn(n,t){let e=0;for(let i=0;i<L;++i)(i==0||n[i>>3]&1<<(i&7))&&(t[e++]=i);const r=e-1;for(;e<L;)t[e++]=0;return r}function Rn(n){for(let t=0;t<m;t++)n[t]={},n[t].len=0,n[t].lit=0,n[t].p=null}function $(n,t,e,r,i){for(;e<n;)t=t<<8|j(r,i),e+=8;return e-=n,{l:t>>e&(1<<n)-1,c:t,lc:e}}function X(n,t,e,r){return n=n<<8|j(e,r),t+=8,{c:n,lc:t}}function G(n,t,e,r,i,u,o,s,l){if(n==t){if(r<8){const v=X(e,r,i,u);e=v.c,r=v.lc}r-=8;let c=e>>r;if(c=new Uint8Array([c])[0],s.value+c>l)return null;const a=o[s.value-1];for(;c-- >0;)o[s.value++]=a}else if(s.value<l)o[s.value++]=n;else return null;return{c:e,lc:r}}const M=new Array(59);function bn(n){for(let e=0;e<=58;++e)M[e]=0;for(let e=0;e<F;++e)M[n[e]]+=1;let t=0;for(let e=58;e>0;--e){const r=t+M[e]>>1;M[e]=t,t=r}for(let e=0;e<F;++e){const r=n[e];r>0&&(n[e]=r|M[r]++<<6)}}function Hn(n,t,e,r,i,u){const o=t;let s=0,l=0;for(;r<=i;r++){if(o.value-t.value>e)return;let c=$(6,s,l,n,o);const a=c.l;if(s=c.c,l=c.lc,u[r]=a,a==V){if(o.value-t.value>e)throw new Error("Error in HufUnpackEncTable");c=$(8,s,l,n,o);let v=c.l+sn;if(s=c.c,l=c.lc,r+v>i+1)throw new Error("Error in HufUnpackEncTable");for(;v--;)u[r++]=0;r--}else if(a>=k){let v=a-k+2;if(r+v>i+1)throw new Error("Error in HufUnpackEncTable");for(;v--;)u[r++]=0;r--}}bn(u)}function tn(n){return n&63}function en(n){return n>>6}function Mn(n,t,e,r){for(;t<=e;t++){const i=en(n[t]),u=tn(n[t]);if(i>>u)throw new Error("Invalid table entry");if(u>U){const o=r[i>>u-U];if(o.len)throw new Error("Invalid table entry");if(o.lit++,o.p){const s=o.p;o.p=new Array(o.lit);for(let l=0;l<o.lit-1;++l)o.p[l]=s[l]}else o.p=new Array(1);o.p[o.lit-1]=t}else if(u){let o=0;for(let s=1<<U-u;s>0;s--){const l=r[(i<<U-u)+o];if(l.len||l.p)throw new Error("Invalid table entry");l.len=u,l.lit=t,o++}}}return!0}function Fn(n,t,e,r,i,u,o,s,l){let c=0,a=0;const v=o,_=Math.trunc(r.value+(i+7)/8);for(;r.value<_;){let g=X(c,a,e,r);for(c=g.c,a=g.lc;a>=U;){const O=c>>a-U&q,h=t[O];if(h.len){a-=h.len;const E=G(h.lit,u,c,a,e,r,s,l,v);E&&(c=E.c,a=E.lc)}else{if(!h.p)throw new Error("hufDecode issues");let E;for(E=0;E<h.lit;E++){const N=tn(n[h.p[E]]);for(;a<N&&r.value<_;)g=X(c,a,e,r),c=g.c,a=g.lc;if(a>=N&&en(n[h.p[E]])==(c>>a-N&(1<<N)-1)){a-=N;const w=G(h.p[E],u,c,a,e,r,s,l,v);w&&(c=w.c,a=w.lc);break}}if(E==h.lit)throw new Error("HufDecode issues")}}}const A=8-i&7;for(c>>=A,a-=A;a>0;){const g=t[c<<U-a&q];if(g.len){a-=g.len;const O=G(g.lit,u,c,a,e,r,s,l,v);O&&(c=O.c,a=O.lc)}else throw new Error("HufDecode issues")}return!0}function Wn(n,t,e,r,i,u){const o={value:0},s=e.value,l=H(t,e),c=H(t,e);e.value+=4;const a=H(t,e);if(e.value+=4,l<0||l>=F||c<0||c>=F)throw new Error("Wrong HUF_ENCSIZE");const v=new Array(F),_=new Array(m);Rn(_);const A=r-(e.value-s);if(Hn(n,e,A,l,c,v),a>8*(r-(e.value-s)))throw new Error("Wrong hufUncompress");Mn(v,l,c,_),Fn(v,_,n,e,a,c,u,i,o)}function W(n){return n&65535}function z(n){const t=W(n);return t>32767?t-65536:t}function R(n,t){const e=z(n),i=z(t),u=e+(i&1)+(i>>1),o=u,s=u-i;return{a:o,b:s}}function b(n,t){const e=W(n),r=W(t),i=e-(r>>1)&Q;return{a:r+i-An&Q,b:i}}function Bn(n,t,e,r,i,u,o){const s=o<16384,l=e>i?i:e;let c=1,a,v;for(;c<=l;)c<<=1;for(c>>=1,a=c,c>>=1;c>=1;){v=0;const _=v+u*(i-a),A=u*c,g=u*a,O=r*c,h=r*a;let E,N,w,y;for(;v<=_;v+=g){let S=v;const Z=v+r*(e-a);for(;S<=Z;S+=h){const P=S+O,I=S+A,D=I+O;if(s){let x=R(n[S+t],n[I+t]);E=x.a,w=x.b,x=R(n[P+t],n[D+t]),N=x.a,y=x.b,x=R(E,N),n[S+t]=x.a,n[P+t]=x.b,x=R(w,y),n[I+t]=x.a,n[D+t]=x.b}else{let x=b(n[S+t],n[I+t]);E=x.a,w=x.b,x=b(n[P+t],n[D+t]),N=x.a,y=x.b,x=b(E,N),n[S+t]=x.a,n[P+t]=x.b,x=b(w,y),n[I+t]=x.a,n[D+t]=x.b}}if(e&c){const P=S+A;let I;s?I=R(n[S+t],n[P+t]):I=b(n[S+t],n[P+t]),E=I.a,n[P+t]=I.b,n[S+t]=E}}if(i&c){let S=v;const Z=v+r*(e-a);for(;S<=Z;S+=h){const P=S+O;let I;s?I=R(n[S+t],n[P+t]):I=b(n[S+t],n[P+t]),E=I.a,n[P+t]=I.b,n[S+t]=E}}a=c,c>>=1}return v}function mn(n,t,e){for(let r=0;r<e;++r)t[r]=n[t[r]]}var B;(function(n){n[n.Float=0]="Float",n[n.HalfFloat=1]="HalfFloat"})(B||(B={}));class rn{}rn.DefaultOutputType=B.HalfFloat;rn.FFLATEUrl="https://unpkg.com/fflate@0.8.2";export{mn as A,Dn as B,J as C,Gn as D,B as E,cn as F,Wn as H,Yn as I,xn as P,Xn as R,L as U,Bn as W,rn as a,T as b,H as c,K as d,En as e,j as f,Cn as g,p as h,Zn as i,Ln as j,kn as k,an as l};
//# sourceMappingURL=exrLoader.configuration-BDKsI_eb.js.map
