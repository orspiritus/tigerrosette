import{L as R}from"./pointsCloudSystem-2vcS-S4d.js";const U=1,A=2,N=3,d=9,Y=10,k=11,L=48,O=4,z=0,P=1,B=2,H=3;function T(o){let r=0;return{id_length:o[r++],colormap_type:o[r++],image_type:o[r++],colormap_index:o[r++]|o[r++]<<8,colormap_length:o[r++]|o[r++]<<8,colormap_size:o[r++],origin:[o[r++]|o[r++]<<8,o[r++]|o[r++]<<8],width:o[r++]|o[r++]<<8,height:o[r++]|o[r++]<<8,pixel_size:o[r++],flags:o[r++]}}function S(o,r){if(r.length<19){R.Error("Unable to load TGA file - Not enough data to contain header");return}let g=18;const c=T(r);if(c.id_length+g>r.length){R.Error("Unable to load TGA file - Not enough data");return}g+=c.id_length;let u=!1,x=!1,m=!1;switch(c.image_type){case d:u=!0;case U:x=!0;break;case Y:u=!0;case A:break;case k:u=!0;case N:m=!0;break}let f;const _=c.pixel_size>>3,a=c.width*c.height*_;let n;if(x&&(n=r.subarray(g,g+=c.colormap_length*(c.colormap_size>>3))),u){f=new Uint8Array(a);let b,y,p,I=0;const E=new Uint8Array(_);for(;g<a&&I<a;)if(b=r[g++],y=(b&127)+1,b&128){for(p=0;p<_;++p)E[p]=r[g++];for(p=0;p<y;++p)f.set(E,I+p*_);I+=_*y}else{for(y*=_,p=0;p<y;++p)f[I+p]=r[g++];I+=y}}else f=r.subarray(g,g+=x?c.width*c.height:a);let h,s,i,t,e,l;switch((c.flags&L)>>O){default:case B:h=0,i=1,l=c.width,s=0,t=1,e=c.height;break;case z:h=0,i=1,l=c.width,s=c.height-1,t=-1,e=-1;break;case H:h=c.width-1,i=-1,l=-1,s=0,t=1,e=c.height;break;case P:h=c.width-1,i=-1,l=-1,s=c.height-1,t=-1,e=-1;break}const w="_getImageData"+(m?"Grey":"")+c.pixel_size+"bits",D=q[w](c,n,f,s,t,e,h,i,l);o.getEngine()._uploadDataToTextureDirectly(o,D)}function X(o,r,g,c,u,x,m,f,_){const a=g,n=r,h=o.width,s=o.height;let i,t=0,e,l;const w=new Uint8Array(h*s*4);for(l=c;l!==x;l+=u)for(e=m;e!==_;e+=f,t++)i=a[t],w[(e+h*l)*4+3]=255,w[(e+h*l)*4+2]=n[i*3+0],w[(e+h*l)*4+1]=n[i*3+1],w[(e+h*l)*4+0]=n[i*3+2];return w}function C(o,r,g,c,u,x,m,f,_){const a=g,n=o.width,h=o.height;let s,i=0,t,e;const l=new Uint8Array(n*h*4);for(e=c;e!==x;e+=u)for(t=m;t!==_;t+=f,i+=2){s=a[i+0]+(a[i+1]<<8);const w=((s&31744)>>10)*255/31|0,D=((s&992)>>5)*255/31|0,G=(s&31)*255/31|0;l[(t+n*e)*4+0]=w,l[(t+n*e)*4+1]=D,l[(t+n*e)*4+2]=G,l[(t+n*e)*4+3]=s&32768?0:255}return l}function F(o,r,g,c,u,x,m,f,_){const a=g,n=o.width,h=o.height;let s=0,i,t;const e=new Uint8Array(n*h*4);for(t=c;t!==x;t+=u)for(i=m;i!==_;i+=f,s+=3)e[(i+n*t)*4+3]=255,e[(i+n*t)*4+2]=a[s+0],e[(i+n*t)*4+1]=a[s+1],e[(i+n*t)*4+0]=a[s+2];return e}function K(o,r,g,c,u,x,m,f,_){const a=g,n=o.width,h=o.height;let s=0,i,t;const e=new Uint8Array(n*h*4);for(t=c;t!==x;t+=u)for(i=m;i!==_;i+=f,s+=4)e[(i+n*t)*4+2]=a[s+0],e[(i+n*t)*4+1]=a[s+1],e[(i+n*t)*4+0]=a[s+2],e[(i+n*t)*4+3]=a[s+3];return e}function M(o,r,g,c,u,x,m,f,_){const a=g,n=o.width,h=o.height;let s,i=0,t,e;const l=new Uint8Array(n*h*4);for(e=c;e!==x;e+=u)for(t=m;t!==_;t+=f,i++)s=a[i],l[(t+n*e)*4+0]=s,l[(t+n*e)*4+1]=s,l[(t+n*e)*4+2]=s,l[(t+n*e)*4+3]=255;return l}function j(o,r,g,c,u,x,m,f,_){const a=g,n=o.width,h=o.height;let s=0,i,t;const e=new Uint8Array(n*h*4);for(t=c;t!==x;t+=u)for(i=m;i!==_;i+=f,s+=2)e[(i+n*t)*4+0]=a[s+0],e[(i+n*t)*4+1]=a[s+0],e[(i+n*t)*4+2]=a[s+0],e[(i+n*t)*4+3]=a[s+1];return e}const q={GetTGAHeader:T,UploadContent:S,_getImageData8bits:X,_getImageData16bits:C,_getImageData24bits:F,_getImageData32bits:K,_getImageDataGrey8bits:M,_getImageDataGrey16bits:j};export{T as G,q as T,S as U};
//# sourceMappingURL=tga-BWmadVoa.js.map
