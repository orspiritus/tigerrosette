const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/index-Cbh_XOmO.js","assets/pointsCloudSystem-2vcS-S4d.js","assets/index-rhFFGTpy.js","assets/motion-3WHHzQTP.js","assets/vendor-CIP6LD3P.js","assets/index-DdXHf9oj.css","assets/nativeXRFrame-DgHx7Vcb.js","assets/bumpVertex-CO1be_N_.js","assets/vertexColorMixing-CmRbdHdF.js","assets/helperFunctions-Dt8Ez0m5.js","assets/default.fragment-B-kdUbSd.js","assets/defaultUboDeclaration-C5WGJzzr.js","assets/oitFragment-COwarqmx.js","assets/mainUVVaryingDeclaration-kAMx1wwy.js","assets/easing-CYNgw8CS.js","assets/animationGroup-CmNY7dur.js","assets/dds-C64e2J1b.js","assets/khronosTextureContainer2-DKf4UHYP.js","assets/flowGraphSetDelayBlock-BBfSTBoS.js","assets/oitFragment-C1qnXpVq.js","assets/default.fragment-CtvPXGlm.js","assets/defaultUboDeclaration-mfzMqo_r.js","assets/mainUVVaryingDeclaration-BftUusui.js","assets/pbr.fragment-CxtSokwZ.js","assets/harmonicsFunctions-BiMv5FUV.js","assets/pbr.fragment-jox_Wzt1.js","assets/harmonicsFunctions-C2rlzhtf.js","assets/hdr-6elhj4O4.js","assets/tga-BWmadVoa.js","assets/default.vertex-kA04vKVP.js","assets/postprocess.vertex-DIr9NoBj.js","assets/dataReader-DPhJthB_.js","assets/flowGraphJsonPointerParserBlock-CAnLRrmw.js","assets/flowGraphCachedOperationBlock-ByGHbGUe.js","assets/flowGraphConsoleLogBlock-5lumJm4F.js","assets/flowGraphBranchBlock-peq7SHeE.js","assets/flowGraphDoNBlock-Cw0MCZY_.js","assets/flowGraphForLoopBlock-DFb4jPHE.js","assets/flowGraphThrottleBlock-DSWZx77Z.js","assets/flowGraphMultiGateBlock-CFHMOiDs.js","assets/flowGraphSwitchBlock-C1_GlPCW.js","assets/flowGraphWaitAllBlock-DaOfx9s5.js","assets/flowGraphCounterBlock-C3E0kQJV.js","assets/flowGraphWhileLoopBlock-CrKmMf0V.js","assets/flowGraphDebounceBlock-BD27J6wA.js","assets/flowGraphFlipFlopBlock-BeUAb8kC.js","assets/flowGraphSequenceBlock-CAUFTA3B.js","assets/flowGraphCancelDelayBlock-BDMNcw84.js","assets/flowGraphPlayAnimationBlock-Bn5vAf3k.js","assets/flowGraphStopAnimationBlock-BFnaBB8T.js","assets/flowGraphPauseAnimationBlock-CGPBCzif.js","assets/flowGraphInterpolationBlock-DCCdvI-3.js","assets/flowGraphEasingBlock-Cg0myAZj.js","assets/flowGraphBezierCurveEasingBlock-D8e5lRJR.js","assets/flowGraphConditionalDataBlock-CXbcBt68.js","assets/flowGraphGetVariableBlock-DhlcrG-o.js","assets/flowGraphSetVariableBlock-B1MhHVxv.js","assets/flowGraphTransformCoordinatesSystemBlock-DNGdu7-D.js","assets/flowGraphGetPropertyBlock-TnE7q6og.js","assets/flowGraphSetPropertyBlock-DXJsQY2Q.js","assets/flowGraphConstantBlock-DysdAuT5.js","assets/flowGraphGetAssetBlock-BLmhj2X4.js","assets/flowGraphDataSwitchBlock-DvJwFjXa.js","assets/flowGraphMathBlocks-C4x3is-T.js","assets/flowGraphBinaryOperationBlock-DZCn6KPT.js","assets/flowGraphUnaryOperationBlock-BvbmF_Vi.js","assets/flowGraphTernaryOperationBlock-Cd2lmfhN.js","assets/flowGraphMathCombineExtractBlocks-BlJzkMI0.js","assets/flowGraphMatrixMathBlocks-dFiznv_Q.js","assets/flowGraphVectorMathBlocks-VcTsQTKK.js","assets/flowGraphTypeToTypeBlocks-B2Nx7lWr.js","assets/flowGraphContextBlock-CSQiKo5X.js","assets/flowGraphArrayIndexBlock-GiVbpSS7.js","assets/flowGraphCodeExecutionBlock-H1yX0hqA.js","assets/flowGraphIndexOfBlock-CUZxmyHg.js","assets/flowGraphFunctionReferenceBlock-Dmuyl_SX.js","assets/flowGraphMeshPickEventBlock-DsWTRMRq.js","assets/flowGraphSceneReadyEventBlock-D0WxwWod.js","assets/flowGraphReceiveCustomEventBlock-pMlatOPN.js","assets/flowGraphSendCustomEventBlock-5_bDlDSf.js","assets/flowGraphSceneTickEventBlock-LT0lNSWj.js","assets/flowGraphPointerOutEventBlock-Crq0OLtx.js","assets/flowGraphPointerOverEventBlock-BjEu_EeF.js","assets/iesTextureLoader-kPQN6WPk.js","assets/pbr.vertex-C6clv1jW.js","assets/pbr.vertex-C_PHP_eE.js","assets/ddsTextureLoader-ClSrghAN.js","assets/envTextureLoader-CsQU9Zxe.js","assets/ktxTextureLoader-D2KSEczx.js","assets/tgaTextureLoader-oyntu75g.js","assets/hdrTextureLoader-Dr-h7uMN.js","assets/basisTextureLoader-CUPe6yBq.js","assets/basis-DDOcy81u.js","assets/exrTextureLoader-B-9p8Lmj.js","assets/exrLoader.configuration-BDKsI_eb.js","assets/default.vertex-Ao6IQZKy.js","assets/mesh.vertexData.functions-CojAmKRV.js","assets/lodCube.fragment-D_gIz9a5.js","assets/lod.fragment-CVDCt30G.js","assets/lodCube.fragment-Ds6X7yQ8.js","assets/lod.fragment-C6sl9DjL.js","assets/rgbdDecode.fragment-Dd8vf-n0.js","assets/rgbdEncode.fragment-C5jKXevo.js","assets/rgbdDecode.fragment-B9rvcZQ2.js","assets/rgbdEncode.fragment-CC1-xNHs.js","assets/pass.fragment-D7l-dmRx.js","assets/passCube.fragment-sEcb3B-6.js","assets/pass.fragment-B8b0gssu.js","assets/passCube.fragment-_Y3ijnqO.js","assets/index-KdCQAYTE.js"])))=>i.map(i=>d[i]);
import{_ as y}from"./index-rhFFGTpy.js";import{j as i}from"./motion-3WHHzQTP.js";import{r as m}from"./vendor-CIP6LD3P.js";const P=async()=>{const c=await y(()=>import("./index-Cbh_XOmO.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,96,97,98,99,100,101,102,103,104,105,106,107,108]));return await y(()=>import("./index-KdCQAYTE.js"),__vite__mapDeps([109,1,2,3,4,5,31])),c},R=()=>{const c=m.useRef(null),[s,n]=m.useState({mode:"loading",message:"Initializing..."}),d=m.useRef(0),u=m.useRef(!1);return m.useEffect(()=>{let w=!1,a=null,o=null;(async()=>{if(c.current)try{const e=await P(),f=c.current;if(navigator.gpu&&e.WebGPUEngine)try{const t=new e.WebGPUEngine(f);await t.initAsync(),a=t,n({mode:"webgpu",message:"Babylon WebGPU"})}catch(t){console.warn("Babylon WebGPU failed, fallback to WebGL",t)}a||(a=new e.Engine(f,!0),n(t=>t.mode==="webgpu"?t:{mode:"webgl",message:"Babylon WebGL"})),o=new e.Scene(a),new e.ArcRotateCamera("cam",Math.PI/4,Math.PI/3,6,e.Vector3.Zero(),o).attachControl(f,!0),new e.HemisphericLight("h",new e.Vector3(0,1,0),o);const l=e.MeshBuilder.CreateBox("box",{size:1.2},o),g=new e.StandardMaterial("m",o);g.emissiveColor=new e.Color3(1,.5,.15),l.material=g;try{const t=new e.GlowLayer("glow",o,{blurKernelSize:32});t.intensity=.6,t.addIncludedOnlyMesh(l)}catch(t){console.warn("Glow layer init failed",t)}let A=!1;try{const t="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVR4nGMAAQAABQABDQottAAAAABJRU5ErkJggg==";let r;e.GPUParticleSystem&&e.GPUParticleSystem.IsSupported?(r=new e.GPUParticleSystem("gpuParticles",{capacity:8e3},o),A=!0):r=new e.ParticleSystem("cpuParticles",4e3,o),r.particleTexture=new e.Texture(t,o,!0,!1,e.Texture.NEAREST_SAMPLINGMODE),r.emitter=l,r.minEmitPower=.5,r.maxEmitPower=2,r.minSize=.05,r.maxSize=.25,r.minLifeTime=.4,r.maxLifeTime=1.2,r.emitRate=1500,r.minEmitBox=new e.Vector3(-.4,-.4,-.4),r.maxEmitBox=new e.Vector3(.4,.4,.4),r.direction1=new e.Vector3(-.5,1.2,-.5),r.direction2=new e.Vector3(.5,1.6,.5),r.color1=new e.Color4(1,.6,.2,1),r.color2=new e.Color4(1,.3,.05,1),r.colorDead=new e.Color4(.2,.1,.05,0),r.updateSpeed=.01,r.start(),n(b=>({...b,gpuParticles:A}))}catch(t){console.warn("Particle system init failed",t)}a.runRenderLoop(()=>{l.rotation.y+=.01,l.rotation.x+=.005,o.render(),d.current++,!u.current&&d.current>0?(u.current=!0,n(t=>({...t,firstFrameAt:performance.now(),frames:1}))):d.current%60===0&&n(t=>({...t,frames:d.current}))}),setTimeout(()=>{u.current||n(t=>({...t,message:t.message+" (no frames yet â€“ WebGL blocked?)"}))},3e3);const p=()=>a==null?void 0:a.resize();return window.addEventListener("resize",p),w?void 0:()=>{var t;w=!0,window.removeEventListener("resize",p);try{(t=a==null?void 0:a.dispose)==null||t.call(a)}catch{}}}catch(e){n({mode:"error",message:(e==null?void 0:e.message)||"Init error"})}})()},[]),i.jsxs("div",{style:{border:"1px solid #333",padding:8,borderRadius:8,background:"#101013",color:"#eee"},children:[i.jsxs("div",{style:{fontSize:12,marginBottom:6},children:["Babylon: ",s.message,s.gpuParticles!==void 0&&i.jsxs("span",{style:{marginLeft:8,opacity:.8},children:["Particles: ",s.gpuParticles?"GPU":"CPU"]})]}),i.jsx("canvas",{ref:c,id:"babylon-stage-canvas","data-engine":s.mode,style:{width:"100%",height:300,background:"#08080a"}}),i.jsxs("div",{style:{fontSize:10,marginTop:4,opacity:.7},children:[s.frames!==void 0&&i.jsxs("span",{children:["frames: ",s.frames]}),s.firstFrameAt&&i.jsx("span",{style:{marginLeft:8},children:"active"})]})]})};export{R as BabylonStage,R as default};
//# sourceMappingURL=BabylonStage-DTqXF1d6.js.map
