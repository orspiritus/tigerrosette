{"version":3,"file":"index-DrUEiwyp.js","sources":["../../node_modules/react-dom/client.js","../../node_modules/zustand/esm/vanilla.mjs","../../node_modules/use-sync-external-store/cjs/use-sync-external-store-shim.production.js","../../node_modules/use-sync-external-store/shim/index.js","../../node_modules/use-sync-external-store/cjs/use-sync-external-store-shim/with-selector.production.js","../../node_modules/use-sync-external-store/shim/with-selector.js","../../node_modules/zustand/esm/index.mjs","../../src/utils/levelSystem.ts","../../src/utils/apiClient.ts","../../src/store/gameStore.ts","../../src/utils/hapticManager.ts","../../src/components/ScoreBreakdown.tsx","../../src/components/LevelDisplay.tsx","../../src/components/HapticSettings.tsx","../../src/components/TelegramProvider.tsx","../../src/components/TelegramUserInfo.tsx","../../src/hooks/useGameApi.ts","../../src/components/MainMenu.tsx","../../src/utils/soundManager.ts","../../src/components/ScorePopup.tsx","../../src/components/ElectricSparks.tsx","../../src/hooks/useOutletImageAnimation.ts","../../src/components/TigerOutlet.tsx","../../src/components/ConnectionStatus.tsx","../../src/components/GameHUD.tsx","../../src/components/ScreenShake.tsx","../../src/components/GameScreen.tsx","../../src/components/LevelUpNotification.tsx","../../src/App.tsx","../../src/main.tsx"],"sourcesContent":["'use strict';\n\nvar m = require('react-dom');\nif (process.env.NODE_ENV === 'production') {\n  exports.createRoot = m.createRoot;\n  exports.hydrateRoot = m.hydrateRoot;\n} else {\n  var i = m.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;\n  exports.createRoot = function(c, o) {\n    i.usingClientEntryPoint = true;\n    try {\n      return m.createRoot(c, o);\n    } finally {\n      i.usingClientEntryPoint = false;\n    }\n  };\n  exports.hydrateRoot = function(c, h, o) {\n    i.usingClientEntryPoint = true;\n    try {\n      return m.hydrateRoot(c, h, o);\n    } finally {\n      i.usingClientEntryPoint = false;\n    }\n  };\n}\n","const createStoreImpl = (createState) => {\n  let state;\n  const listeners = /* @__PURE__ */ new Set();\n  const setState = (partial, replace) => {\n    const nextState = typeof partial === \"function\" ? partial(state) : partial;\n    if (!Object.is(nextState, state)) {\n      const previousState = state;\n      state = (replace != null ? replace : typeof nextState !== \"object\" || nextState === null) ? nextState : Object.assign({}, state, nextState);\n      listeners.forEach((listener) => listener(state, previousState));\n    }\n  };\n  const getState = () => state;\n  const getInitialState = () => initialState;\n  const subscribe = (listener) => {\n    listeners.add(listener);\n    return () => listeners.delete(listener);\n  };\n  const destroy = () => {\n    if ((import.meta.env ? import.meta.env.MODE : void 0) !== \"production\") {\n      console.warn(\n        \"[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected.\"\n      );\n    }\n    listeners.clear();\n  };\n  const api = { setState, getState, getInitialState, subscribe, destroy };\n  const initialState = state = createState(setState, getState, api);\n  return api;\n};\nconst createStore = (createState) => createState ? createStoreImpl(createState) : createStoreImpl;\nvar vanilla = (createState) => {\n  if ((import.meta.env ? import.meta.env.MODE : void 0) !== \"production\") {\n    console.warn(\n      \"[DEPRECATED] Default export is deprecated. Instead use import { createStore } from 'zustand/vanilla'.\"\n    );\n  }\n  return createStore(createState);\n};\n\nexport { createStore, vanilla as default };\n","/**\n * @license React\n * use-sync-external-store-shim.production.js\n *\n * Copyright (c) Meta Platforms, Inc. and affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\n\"use strict\";\nvar React = require(\"react\");\nfunction is(x, y) {\n  return (x === y && (0 !== x || 1 / x === 1 / y)) || (x !== x && y !== y);\n}\nvar objectIs = \"function\" === typeof Object.is ? Object.is : is,\n  useState = React.useState,\n  useEffect = React.useEffect,\n  useLayoutEffect = React.useLayoutEffect,\n  useDebugValue = React.useDebugValue;\nfunction useSyncExternalStore$2(subscribe, getSnapshot) {\n  var value = getSnapshot(),\n    _useState = useState({ inst: { value: value, getSnapshot: getSnapshot } }),\n    inst = _useState[0].inst,\n    forceUpdate = _useState[1];\n  useLayoutEffect(\n    function () {\n      inst.value = value;\n      inst.getSnapshot = getSnapshot;\n      checkIfSnapshotChanged(inst) && forceUpdate({ inst: inst });\n    },\n    [subscribe, value, getSnapshot]\n  );\n  useEffect(\n    function () {\n      checkIfSnapshotChanged(inst) && forceUpdate({ inst: inst });\n      return subscribe(function () {\n        checkIfSnapshotChanged(inst) && forceUpdate({ inst: inst });\n      });\n    },\n    [subscribe]\n  );\n  useDebugValue(value);\n  return value;\n}\nfunction checkIfSnapshotChanged(inst) {\n  var latestGetSnapshot = inst.getSnapshot;\n  inst = inst.value;\n  try {\n    var nextValue = latestGetSnapshot();\n    return !objectIs(inst, nextValue);\n  } catch (error) {\n    return !0;\n  }\n}\nfunction useSyncExternalStore$1(subscribe, getSnapshot) {\n  return getSnapshot();\n}\nvar shim =\n  \"undefined\" === typeof window ||\n  \"undefined\" === typeof window.document ||\n  \"undefined\" === typeof window.document.createElement\n    ? useSyncExternalStore$1\n    : useSyncExternalStore$2;\nexports.useSyncExternalStore =\n  void 0 !== React.useSyncExternalStore ? React.useSyncExternalStore : shim;\n","'use strict';\n\nif (process.env.NODE_ENV === 'production') {\n  module.exports = require('../cjs/use-sync-external-store-shim.production.js');\n} else {\n  module.exports = require('../cjs/use-sync-external-store-shim.development.js');\n}\n","/**\n * @license React\n * use-sync-external-store-shim/with-selector.production.js\n *\n * Copyright (c) Meta Platforms, Inc. and affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\n\"use strict\";\nvar React = require(\"react\"),\n  shim = require(\"use-sync-external-store/shim\");\nfunction is(x, y) {\n  return (x === y && (0 !== x || 1 / x === 1 / y)) || (x !== x && y !== y);\n}\nvar objectIs = \"function\" === typeof Object.is ? Object.is : is,\n  useSyncExternalStore = shim.useSyncExternalStore,\n  useRef = React.useRef,\n  useEffect = React.useEffect,\n  useMemo = React.useMemo,\n  useDebugValue = React.useDebugValue;\nexports.useSyncExternalStoreWithSelector = function (\n  subscribe,\n  getSnapshot,\n  getServerSnapshot,\n  selector,\n  isEqual\n) {\n  var instRef = useRef(null);\n  if (null === instRef.current) {\n    var inst = { hasValue: !1, value: null };\n    instRef.current = inst;\n  } else inst = instRef.current;\n  instRef = useMemo(\n    function () {\n      function memoizedSelector(nextSnapshot) {\n        if (!hasMemo) {\n          hasMemo = !0;\n          memoizedSnapshot = nextSnapshot;\n          nextSnapshot = selector(nextSnapshot);\n          if (void 0 !== isEqual && inst.hasValue) {\n            var currentSelection = inst.value;\n            if (isEqual(currentSelection, nextSnapshot))\n              return (memoizedSelection = currentSelection);\n          }\n          return (memoizedSelection = nextSnapshot);\n        }\n        currentSelection = memoizedSelection;\n        if (objectIs(memoizedSnapshot, nextSnapshot)) return currentSelection;\n        var nextSelection = selector(nextSnapshot);\n        if (void 0 !== isEqual && isEqual(currentSelection, nextSelection))\n          return (memoizedSnapshot = nextSnapshot), currentSelection;\n        memoizedSnapshot = nextSnapshot;\n        return (memoizedSelection = nextSelection);\n      }\n      var hasMemo = !1,\n        memoizedSnapshot,\n        memoizedSelection,\n        maybeGetServerSnapshot =\n          void 0 === getServerSnapshot ? null : getServerSnapshot;\n      return [\n        function () {\n          return memoizedSelector(getSnapshot());\n        },\n        null === maybeGetServerSnapshot\n          ? void 0\n          : function () {\n              return memoizedSelector(maybeGetServerSnapshot());\n            }\n      ];\n    },\n    [getSnapshot, getServerSnapshot, selector, isEqual]\n  );\n  var value = useSyncExternalStore(subscribe, instRef[0], instRef[1]);\n  useEffect(\n    function () {\n      inst.hasValue = !0;\n      inst.value = value;\n    },\n    [value]\n  );\n  useDebugValue(value);\n  return value;\n};\n","'use strict';\n\nif (process.env.NODE_ENV === 'production') {\n  module.exports = require('../cjs/use-sync-external-store-shim/with-selector.production.js');\n} else {\n  module.exports = require('../cjs/use-sync-external-store-shim/with-selector.development.js');\n}\n","import { createStore } from 'zustand/vanilla';\nexport * from 'zustand/vanilla';\nimport ReactExports from 'react';\nimport useSyncExternalStoreExports from 'use-sync-external-store/shim/with-selector.js';\n\nconst { useDebugValue } = ReactExports;\nconst { useSyncExternalStoreWithSelector } = useSyncExternalStoreExports;\nlet didWarnAboutEqualityFn = false;\nconst identity = (arg) => arg;\nfunction useStore(api, selector = identity, equalityFn) {\n  if ((import.meta.env ? import.meta.env.MODE : void 0) !== \"production\" && equalityFn && !didWarnAboutEqualityFn) {\n    console.warn(\n      \"[DEPRECATED] Use `createWithEqualityFn` instead of `create` or use `useStoreWithEqualityFn` instead of `useStore`. They can be imported from 'zustand/traditional'. https://github.com/pmndrs/zustand/discussions/1937\"\n    );\n    didWarnAboutEqualityFn = true;\n  }\n  const slice = useSyncExternalStoreWithSelector(\n    api.subscribe,\n    api.getState,\n    api.getServerState || api.getInitialState,\n    selector,\n    equalityFn\n  );\n  useDebugValue(slice);\n  return slice;\n}\nconst createImpl = (createState) => {\n  if ((import.meta.env ? import.meta.env.MODE : void 0) !== \"production\" && typeof createState !== \"function\") {\n    console.warn(\n      \"[DEPRECATED] Passing a vanilla store will be unsupported in a future version. Instead use `import { useStore } from 'zustand'`.\"\n    );\n  }\n  const api = typeof createState === \"function\" ? createStore(createState) : createState;\n  const useBoundStore = (selector, equalityFn) => useStore(api, selector, equalityFn);\n  Object.assign(useBoundStore, api);\n  return useBoundStore;\n};\nconst create = (createState) => createState ? createImpl(createState) : createImpl;\nvar react = (createState) => {\n  if ((import.meta.env ? import.meta.env.MODE : void 0) !== \"production\") {\n    console.warn(\n      \"[DEPRECATED] Default export is deprecated. Instead use `import { create } from 'zustand'`.\"\n    );\n  }\n  return create(createState);\n};\n\nexport { create, react as default, useStore };\n","// Level System Configuration\r\nexport interface LevelConfig {\r\n  level: number;\r\n  requiredExperience: number;\r\n  voltsReward: number;\r\n  title: string;\r\n  description: string;\r\n}\r\n\r\n// Experience required for each level (cumulative)\r\nexport const LEVEL_CONFIGS: LevelConfig[] = [\r\n  { level: 1, requiredExperience: 0, voltsReward: 0, title: \"Новичок\", description: \"Первые шаги с электричеством\" },\r\n  { level: 2, requiredExperience: 100, voltsReward: 50, title: \"Ученик\", description: \"Осваиваете основы\" },\r\n  { level: 3, requiredExperience: 250, voltsReward: 75, title: \"Практикант\", description: \"⚠️ Опасно! Теперь удар током отнимает очки\" },\r\n  { level: 4, requiredExperience: 500, voltsReward: 100, title: \"Любитель\", description: \"🔥 Критично! Напряжение отнимается от очков\" },\r\n  { level: 5, requiredExperience: 850, voltsReward: 150, title: \"Энтузиаст\", description: \"Проявляете смелость в опасной игре\" },\r\n  { level: 6, requiredExperience: 1300, voltsReward: 200, title: \"Смельчак\", description: \"Не боитесь рисковать\" },\r\n  { level: 7, requiredExperience: 1900, voltsReward: 250, title: \"Храбрец\", description: \"Идете на оправданный риск\" },\r\n  { level: 8, requiredExperience: 2600, voltsReward: 300, title: \"Отважный\", description: \"Покоряете сложности\" },\r\n  { level: 9, requiredExperience: 3450, voltsReward: 400, title: \"Безрассудный\", description: \"Играете с опасностью\" },\r\n  { level: 10, requiredExperience: 4500, voltsReward: 500, title: \"Профессионал\", description: \"Мастерски владеете риском\" },\r\n  { level: 11, requiredExperience: 5800, voltsReward: 600, title: \"Эксперт\", description: \"Знаете все тонкости\" },\r\n  { level: 12, requiredExperience: 7400, voltsReward: 750, title: \"Мастер\", description: \"Превосходите ожидания\" },\r\n  { level: 13, requiredExperience: 9300, voltsReward: 900, title: \"Виртуоз\", description: \"Играете как художник\" },\r\n  { level: 14, requiredExperience: 11600, voltsReward: 1100, title: \"Гуру\", description: \"Достигли просветления\" },\r\n  { level: 15, requiredExperience: 14400, voltsReward: 1300, title: \"Сенсей\", description: \"Учите других\" },\r\n  { level: 16, requiredExperience: 17800, voltsReward: 1500, title: \"Легенда\", description: \"О вас слагают легенды\" },\r\n  { level: 17, requiredExperience: 21900, voltsReward: 1750, title: \"Миф\", description: \"Недостижимый идеал\" },\r\n  { level: 18, requiredExperience: 26800, voltsReward: 2000, title: \"Титан\", description: \"Сверхчеловеческие способности\" },\r\n  { level: 19, requiredExperience: 32600, voltsReward: 2300, title: \"Бог Электричества\", description: \"Повелеваете молниями\" },\r\n  { level: 20, requiredExperience: 40000, voltsReward: 2500, title: \"Зевс\", description: \"Абсолютная власть над током\" },\r\n];\r\n\r\n// Calculate level from total experience\r\nexport function calculateLevel(totalExperience: number): LevelConfig {\r\n  let currentLevel = LEVEL_CONFIGS[0];\r\n  \r\n  for (let i = LEVEL_CONFIGS.length - 1; i >= 0; i--) {\r\n    if (totalExperience >= LEVEL_CONFIGS[i].requiredExperience) {\r\n      currentLevel = LEVEL_CONFIGS[i];\r\n      break;\r\n    }\r\n  }\r\n  \r\n  return currentLevel;\r\n}\r\n\r\n// Calculate experience needed for next level\r\nexport function getExperienceToNextLevel(totalExperience: number): {\r\n  current: number;\r\n  required: number;\r\n  remaining: number;\r\n  nextLevel: LevelConfig | null;\r\n} {\r\n  const currentLevel = calculateLevel(totalExperience);\r\n  const nextLevelIndex = LEVEL_CONFIGS.findIndex(config => config.level === currentLevel.level) + 1;\r\n  \r\n  if (nextLevelIndex >= LEVEL_CONFIGS.length) {\r\n    return {\r\n      current: totalExperience,\r\n      required: totalExperience,\r\n      remaining: 0,\r\n      nextLevel: null\r\n    };\r\n  }\r\n  \r\n  const nextLevel = LEVEL_CONFIGS[nextLevelIndex];\r\n  \r\n  return {\r\n    current: totalExperience - currentLevel.requiredExperience,\r\n    required: nextLevel.requiredExperience - currentLevel.requiredExperience,\r\n    remaining: nextLevel.requiredExperience - totalExperience,\r\n    nextLevel\r\n  };\r\n}\r\n\r\n// Get level progress percentage\r\nexport function getLevelProgress(totalExperience: number): number {\r\n  const { current, required } = getExperienceToNextLevel(totalExperience);\r\n  if (required === 0) return 100;\r\n  return Math.min(100, (current / required) * 100);\r\n}\r\n\r\n// Experience rewards for different actions\r\nexport const EXPERIENCE_REWARDS = {\r\n  SAFE_CLICK: 10,\r\n  RISKY_CLICK: 15,\r\n  EXTREME_CLICK: 25,\r\n  STREAK_5: 50,\r\n  STREAK_10: 100,\r\n  STREAK_25: 250,\r\n  STREAK_50: 500,\r\n  SURVIVAL_MINUTE: 20,\r\n  SHOCK_SURVIVAL: 5,\r\n  ACHIEVEMENT: 100,\r\n  DAILY_BONUS: 200\r\n} as const;\r\n\r\n// Get outlet image based on player level\r\nexport function getOutletImageByLevel(level: number): string {\r\n  // We have 4 different outlet images (tigrrozetka_1.png to tigrrozetka_4.png)\r\n  // Cycle through them based on level ranges\r\n  \r\n  const basePath = '/tigerrosette/';\r\n  \r\n  if (level <= 5) {\r\n    return `${basePath}Media/Pictures/tigrrozetka_1.png`;\r\n  } else if (level <= 10) {\r\n    return `${basePath}Media/Pictures/tigrrozetka_2.png`;\r\n  } else if (level <= 15) {\r\n    return `${basePath}Media/Pictures/tigrrozetka_3.png`;\r\n  } else {\r\n    return `${basePath}Media/Pictures/tigrrozetka_4.png`;\r\n  }\r\n}\r\n","/**\r\n * API клиент для взаимодействия с backend\r\n */\r\n\r\nconst API_BASE_URL = (import.meta as any).env?.VITE_API_URL || 'http://localhost:3001/api';\r\n\r\ninterface ApiResponse<T = any> {\r\n  success?: boolean;\r\n  data?: T;\r\n  error?: string;\r\n}\r\n\r\ninterface GameScoreData {\r\n  score: number;\r\n  level: number;\r\n  timePlayed: number;\r\n}\r\n\r\ninterface GameScoreResponse {\r\n  success: boolean;\r\n  experienceGained: number;\r\n  voltsGained: number;\r\n  levelUpReward: number;\r\n  leveledUp: boolean;\r\n  newLevel: number;\r\n  levelProgress: {\r\n    currentLevel: number;\r\n    experienceInLevel: number;\r\n    experienceToNextLevel: number;\r\n    progressPercentage: number;\r\n  };\r\n  newEnergy: number;\r\n  totalExperience: number;\r\n  totalVolts: number;\r\n}\r\n\r\ninterface UserStats {\r\n  level: number;\r\n  totalExperience: number;\r\n  levelProgress: {\r\n    currentLevel: number;\r\n    experienceInLevel: number;\r\n    experienceToNextLevel: number;\r\n    progressPercentage: number;\r\n  };\r\n  totalVolts: number;\r\n  premiumVolts: number;\r\n  energy: number;\r\n  maxEnergy: number;\r\n  energyLastRefilled: string;\r\n  totalSessions: number;\r\n  bestScore: number;\r\n  totalTimePlayed: number;\r\n  recentSessions: Array<{\r\n    id: string;\r\n    score: number;\r\n    level: number;\r\n    experienceGained: number;\r\n    voltsGained: number;\r\n    timePlayed: number;\r\n    playedAt: string;\r\n  }>;\r\n}\r\n\r\ninterface LeaderboardEntry {\r\n  rank: number;\r\n  id: string;\r\n  username: string;\r\n  level: number;\r\n  totalExperience: number;\r\n  totalVolts: number;\r\n}\r\n\r\nclass ApiClient {\r\n  private token: string | null = null;\r\n\r\n  constructor() {\r\n    // Получаем токен из localStorage или Telegram WebApp\r\n    this.token = localStorage.getItem('auth_token');\r\n    this.initializeTelegramAuth();\r\n  }\r\n\r\n  private initializeTelegramAuth() {\r\n    // Инициализация аутентификации через Telegram WebApp\r\n    if (typeof window !== 'undefined' && window.Telegram?.WebApp) {\r\n      const webApp = window.Telegram.WebApp;\r\n      if (webApp.initDataUnsafe?.user) {\r\n        // Автоматическая аутентификация через Telegram\r\n        this.authenticateWithTelegram(webApp.initData);\r\n      }\r\n    }\r\n  }\r\n\r\n  private async authenticateWithTelegram(initData: string): Promise<void> {\r\n    try {\r\n      const response = await fetch(`${API_BASE_URL}/auth/telegram`, {\r\n        method: 'POST',\r\n        headers: {\r\n          'Content-Type': 'application/json',\r\n        },\r\n        body: JSON.stringify({ initData }),\r\n      });\r\n\r\n      const data = await response.json();\r\n      \r\n      if (data.token) {\r\n        this.token = data.token;\r\n        localStorage.setItem('auth_token', data.token);\r\n      }\r\n    } catch (error) {\r\n      console.error('Telegram authentication failed:', error);\r\n    }\r\n  }\r\n\r\n  private async makeRequest<T>(\r\n    endpoint: string,\r\n    options: RequestInit = {}\r\n  ): Promise<ApiResponse<T>> {\r\n    try {\r\n      const headers: Record<string, string> = {\r\n        'Content-Type': 'application/json',\r\n        ...(options.headers as Record<string, string>),\r\n      };\r\n\r\n      if (this.token) {\r\n        headers.Authorization = `Bearer ${this.token}`;\r\n      }\r\n\r\n      const response = await fetch(`${API_BASE_URL}${endpoint}`, {\r\n        ...options,\r\n        headers,\r\n      });\r\n\r\n      const data = await response.json();\r\n\r\n      if (!response.ok) {\r\n        return {\r\n          error: data.error || `HTTP ${response.status}`,\r\n        };\r\n      }\r\n\r\n      return {\r\n        success: true,\r\n        data,\r\n      };\r\n    } catch (error) {\r\n      console.error('API request failed:', error);\r\n      return {\r\n        error: error instanceof Error ? error.message : 'Network error',\r\n      };\r\n    }\r\n  }\r\n\r\n  // === ИГРОВЫЕ МЕТОДЫ ===\r\n\r\n  /**\r\n   * Отправляет результаты игры на сервер\r\n   */\r\n  async submitScore(scoreData: GameScoreData): Promise<ApiResponse<GameScoreResponse>> {\r\n    return this.makeRequest<GameScoreResponse>('/game/score', {\r\n      method: 'POST',\r\n      body: JSON.stringify(scoreData),\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Получает статистику пользователя\r\n   */\r\n  async getUserStats(): Promise<ApiResponse<UserStats>> {\r\n    return this.makeRequest<UserStats>('/game/stats');\r\n  }\r\n\r\n  /**\r\n   * Получает таблицу лидеров\r\n   */\r\n  async getLeaderboard(type: 'level' | 'volts' | 'experience' = 'level', limit = 10): Promise<ApiResponse<{ leaderboard: LeaderboardEntry[] }>> {\r\n    return this.makeRequest<{ leaderboard: LeaderboardEntry[] }>(`/game/leaderboard?type=${type}&limit=${limit}`);\r\n  }\r\n\r\n  /**\r\n   * Восстанавливает энергию\r\n   */\r\n  async refillEnergy(): Promise<ApiResponse<{\r\n    success: boolean;\r\n    energyRefilled: number;\r\n    newEnergy: number;\r\n    maxEnergy: number;\r\n  }>> {\r\n    return this.makeRequest('/game/refill-energy', {\r\n      method: 'POST',\r\n    });\r\n  }\r\n\r\n  // === ВСПОМОГАТЕЛЬНЫЕ МЕТОДЫ ===\r\n\r\n  /**\r\n   * Проверяет, аутентифицирован ли пользователь\r\n   */\r\n  isAuthenticated(): boolean {\r\n    return !!this.token;\r\n  }\r\n\r\n  /**\r\n   * Устанавливает токен аутентификации\r\n   */\r\n  setToken(token: string): void {\r\n    this.token = token;\r\n    localStorage.setItem('auth_token', token);\r\n  }\r\n\r\n  /**\r\n   * Очищает токен аутентификации\r\n   */\r\n  clearToken(): void {\r\n    this.token = null;\r\n    localStorage.removeItem('auth_token');\r\n  }\r\n}\r\n\r\n// Экспортируем единственный экземпляр\r\nexport const apiClient = new ApiClient();\r\nexport default apiClient;\r\n","import { create } from 'zustand';\r\nimport { GameStore, GameState, Player, SingleModeState, Achievement, ScoreData, SoundConfig, ShockImpact } from '../types/game';\r\nimport { calculateLevel, getExperienceToNextLevel, EXPERIENCE_REWARDS } from '../utils/levelSystem';\r\nimport { apiClient } from '../utils/apiClient';\r\n\r\n// Default states\r\nconst defaultGameState: GameState = {\r\n  mode: 'menu',\r\n  isPlaying: false,\r\n  isPaused: false,\r\n  gameTime: 0,\r\n  score: 0\r\n};\r\n\r\nconst defaultPlayer: Player = {\r\n  id: 'player1',\r\n  name: 'Смельчак',\r\n  volts: 0,\r\n  level: 1,\r\n  experience: 0,\r\n  streak: 0,\r\n  totalClicks: 0,\r\n  successfulClicks: 0,\r\n  shockedClicks: 0,\r\n  luckCoefficient: 50, // Начинаем с 50%\r\n  luckIndicatorHidden: false,\r\n  luckHiddenUntil: 0,\r\n  survivalTime: 0\r\n};\r\n\r\nconst defaultSingleMode: SingleModeState = {\r\n  difficulty: 'easy',\r\n  aiPattern: 'regular',\r\n  currentRisk: 'low',\r\n  streakCount: 0,\r\n  timeInSafeZone: 0,\r\n  lastClickTime: 0,\r\n  dangerLevel: 0,\r\n  warningSignsActive: false\r\n};\r\n\r\nconst defaultSounds: SoundConfig = {\r\n  volume: 0.7,\r\n  enabled: true,\r\n  backgroundMusicEnabled: true\r\n};\r\n\r\n// Default achievements\r\nconst defaultAchievements: Achievement[] = [\r\n  {\r\n    id: 'first_click',\r\n    name: 'Первое прикосновение',\r\n    description: 'Нажми на розетку впервые',\r\n    icon: '⚡',\r\n    requirement: 1,\r\n    progress: 0,\r\n    completed: false,\r\n    reward: 50,\r\n    category: 'special'\r\n  },\r\n  {\r\n    id: 'survivor_5',\r\n    name: 'Живчик',\r\n    description: 'Серия из 5 успешных нажатий',\r\n    icon: '🏃',\r\n    requirement: 5,\r\n    progress: 0,\r\n    completed: false,\r\n    reward: 100,\r\n    category: 'streak'\r\n  },\r\n  {\r\n    id: 'survivor_25',\r\n    name: 'Неубиваемый',\r\n    description: 'Серия из 25 успешных нажатий',\r\n    icon: '�',\r\n    requirement: 25,\r\n    progress: 0,\r\n    completed: false,\r\n    reward: 500,\r\n    category: 'streak'\r\n  },\r\n  {\r\n    id: 'risk_taker',\r\n    name: 'Безрассудный',\r\n    description: '50 нажатий в режиме High Risk',\r\n    icon: '🔥',\r\n    requirement: 50,\r\n    progress: 0,\r\n    completed: false,\r\n    reward: 500,\r\n    category: 'risk'\r\n  },\r\n  {\r\n    id: 'time_survivor',\r\n    name: 'Выживальщик',\r\n    description: 'Выживи 5 минут без поражения',\r\n    icon: '⏰',\r\n    requirement: 300,\r\n    progress: 0,\r\n    completed: false,\r\n    reward: 1000,\r\n    category: 'survival'\r\n  }\r\n];\r\n\r\nexport const useGameStore = create<GameStore>((set, get) => ({\r\n  // Initial state\r\n  gameState: defaultGameState,\r\n  player: defaultPlayer,\r\n  singleMode: defaultSingleMode,\r\n  achievements: defaultAchievements,\r\n  sounds: defaultSounds,\r\n  showElectricSparks: false,\r\n  sparksIntensity: 'medium',\r\n  showScreenShake: false,\r\n  levelUpNotification: {\r\n    isVisible: false,\r\n    level: null,\r\n    voltsReward: 0\r\n  },\r\n\r\n  // Actions\r\n  startSingleMode: (difficulty) => {\r\n    set({\r\n      gameState: {\r\n        ...get().gameState,\r\n        mode: 'single',\r\n        isPlaying: true,\r\n        gameTime: 0,\r\n        score: 0\r\n      },\r\n      singleMode: {\r\n        ...defaultSingleMode,\r\n        difficulty\r\n      }\r\n    });\r\n  },\r\n\r\n  clickOutlet: () => {\r\n    const state = get();\r\n    const now = Date.now();\r\n    const timeSinceLastClick = now - state.singleMode.lastClickTime;\r\n    \r\n    // Calculate risk level based on timing\r\n    let currentRisk: SingleModeState['currentRisk'] = 'low';\r\n    if (timeSinceLastClick < 1000) currentRisk = 'extreme';\r\n    else if (timeSinceLastClick < 2000) currentRisk = 'high';\r\n    else if (timeSinceLastClick < 3000) currentRisk = 'medium';\r\n\r\n    // Calculate danger level (affects warning signs)\r\n    const dangerLevel = Math.min(100, \r\n      (state.singleMode.streakCount * 2) + // Больше серия = больше опасность\r\n      (currentRisk === 'extreme' ? 40 : \r\n       currentRisk === 'high' ? 25 : \r\n       currentRisk === 'medium' ? 15 : 5) + // Риск влияет на опасность\r\n      (state.player.luckCoefficient < 30 ? 20 : 0) // Низкая удача = больше опасность\r\n    );\r\n\r\n    // Activate warning signs if danger is high\r\n    const warningSignsActive = dangerLevel > 60;\r\n\r\n    // Update click stats\r\n    set({\r\n      player: {\r\n        ...state.player,\r\n        totalClicks: state.player.totalClicks + 1\r\n      },\r\n      singleMode: {\r\n        ...state.singleMode,\r\n        lastClickTime: now,\r\n        currentRisk,\r\n        dangerLevel,\r\n        warningSignsActive\r\n      }\r\n    });\r\n\r\n    // Update luck coefficient and restore indicator if needed\r\n    get().updateLuckCoefficient();\r\n  },\r\n\r\n  updateScore: (scoreData: ScoreData) => {\r\n    const state = get();\r\n    const newScore = state.gameState.score + scoreData.totalPoints;\r\n    const newVolts = state.player.volts + scoreData.totalPoints;\r\n    \r\n    // Update streak if it was a success\r\n    const isSuccess = scoreData.reason !== 'Поражение током';\r\n    const newStreak = isSuccess ? state.player.streak + 1 : 0;\r\n    const newStreakCount = isSuccess ? state.singleMode.streakCount + 1 : 0;\r\n    \r\n    // Calculate experience based on action\r\n    let experienceGained = 0;\r\n    if (isSuccess) {\r\n      // Base experience for successful click\r\n      experienceGained = EXPERIENCE_REWARDS.SAFE_CLICK;\r\n      \r\n      // Bonus experience for risky clicks\r\n      if (scoreData.riskMultiplier >= 2.0) {\r\n        experienceGained = EXPERIENCE_REWARDS.RISKY_CLICK;\r\n      }\r\n      if (scoreData.riskMultiplier >= 3.0) {\r\n        experienceGained = EXPERIENCE_REWARDS.EXTREME_CLICK;\r\n      }\r\n      \r\n      // Bonus experience for streaks\r\n      if (newStreak === 5) experienceGained += EXPERIENCE_REWARDS.STREAK_5;\r\n      if (newStreak === 10) experienceGained += EXPERIENCE_REWARDS.STREAK_10;\r\n      if (newStreak === 25) experienceGained += EXPERIENCE_REWARDS.STREAK_25;\r\n      if (newStreak === 50) experienceGained += EXPERIENCE_REWARDS.STREAK_50;\r\n    } else {\r\n      // Small experience even for getting shocked\r\n      experienceGained = EXPERIENCE_REWARDS.SHOCK_SURVIVAL;\r\n    }\r\n    \r\n    // Update success/shock statistics and calculate luck coefficient\r\n    const newSuccessfulClicks = isSuccess ? state.player.successfulClicks + 1 : state.player.successfulClicks;\r\n    const newShockedClicks = !isSuccess ? state.player.shockedClicks + 1 : state.player.shockedClicks;\r\n    const totalAttempts = newSuccessfulClicks + newShockedClicks;\r\n    const newLuckCoefficient = totalAttempts > 0 ? Math.round((newSuccessfulClicks / totalAttempts) * 100) : 50;\r\n    \r\n    set({\r\n      gameState: {\r\n        ...state.gameState,\r\n        score: newScore\r\n      },\r\n      player: {\r\n        ...state.player,\r\n        volts: newVolts,\r\n        streak: newStreak,\r\n        successfulClicks: newSuccessfulClicks,\r\n        shockedClicks: newShockedClicks,\r\n        luckCoefficient: newLuckCoefficient\r\n      },\r\n      singleMode: {\r\n        ...state.singleMode,\r\n        streakCount: newStreakCount\r\n      }\r\n    });\r\n\r\n    // Add experience\r\n    const { addExperience } = get();\r\n    addExperience(experienceGained);\r\n\r\n    // Check for achievements\r\n    const { unlockAchievement } = get();\r\n    if (state.player.totalClicks === 0) {\r\n      unlockAchievement('first_click');\r\n    }\r\n    if (newStreak === 5) unlockAchievement('survivor_5');\r\n    if (newStreak === 10) unlockAchievement('survivor_10');\r\n    if (newStreak === 25) unlockAchievement('survivor_25');\r\n  },\r\n\r\n  // Рассчитывает урон от удара током на основе накопленных вольт\r\n  calculateShockImpact: (volts: number): ShockImpact => {\r\n    let damage: number;\r\n    let severity: 'mild' | 'moderate' | 'severe' | 'critical';\r\n    let duration: number;\r\n    let luckHideDuration: number;\r\n\r\n    if (volts < 50) {\r\n      damage = Math.floor(volts * 0.1) + 1; // 1-5 очков\r\n      severity = 'mild';\r\n      duration = 1000;\r\n      luckHideDuration = 2000;\r\n    } else if (volts < 150) {\r\n      damage = Math.floor(volts * 0.15) + 5; // 5-27 очков\r\n      severity = 'moderate';\r\n      duration = 1500;\r\n      luckHideDuration = 3000;\r\n    } else if (volts < 300) {\r\n      damage = Math.floor(volts * 0.2) + 10; // 10-70 очков\r\n      severity = 'severe';\r\n      duration = 2000;\r\n      luckHideDuration = 5000;\r\n    } else {\r\n      damage = Math.floor(volts * 0.25) + 20; // 20+ очков\r\n      severity = 'critical';\r\n      duration = 3000;\r\n      luckHideDuration = 8000;\r\n    }\r\n\r\n    const voltsDrained = Math.floor(volts * 0.7); // Теряем 70% вольт\r\n\r\n    return {\r\n      damage,\r\n      voltsDrained,\r\n      duration,\r\n      severity,\r\n      luckHideDuration\r\n    };\r\n  },\r\n\r\n  triggerShock: () => {\r\n    const state = get();\r\n    if (!state.gameState.isPlaying) return;\r\n\r\n    // Рассчитываем урон на основе накопленных вольт\r\n    const shockImpact = state.calculateShockImpact(state.player.volts);\r\n    \r\n    set({\r\n      player: {\r\n        ...state.player,\r\n        volts: Math.max(0, state.player.volts - shockImpact.voltsDrained),\r\n        shockedClicks: state.player.shockedClicks + 1,\r\n        totalClicks: state.player.totalClicks + 1,\r\n        streak: 0,\r\n        luckIndicatorHidden: true,\r\n        luckHiddenUntil: Date.now() + shockImpact.luckHideDuration\r\n      },\r\n      showElectricSparks: true,\r\n      sparksIntensity: shockImpact.severity === 'critical' ? 'extreme' : \r\n                      shockImpact.severity === 'severe' ? 'high' :\r\n                      shockImpact.severity === 'moderate' ? 'medium' : 'low',\r\n      showScreenShake: true,\r\n      gameState: {\r\n        ...state.gameState,\r\n        score: Math.max(0, state.gameState.score - shockImpact.damage)\r\n      },\r\n      singleMode: {\r\n        ...state.singleMode,\r\n        streakCount: 0\r\n      }\r\n    });\r\n\r\n    // Отключаем эффекты после анимации\r\n    setTimeout(() => {\r\n      set({\r\n        showElectricSparks: false,\r\n        showScreenShake: false\r\n      });\r\n    }, shockImpact.duration);\r\n\r\n    // Обновляем коэффициент удачи\r\n    get().updateLuckCoefficient();\r\n  },\r\n\r\n  endGame: () => {\r\n    set({\r\n      gameState: {\r\n        ...get().gameState,\r\n        mode: 'menu',\r\n        isPlaying: false\r\n      }\r\n    });\r\n  },\r\n\r\n  unlockAchievement: (achievementId: string) => {\r\n    const state = get();\r\n    const achievement = state.achievements.find(a => a.id === achievementId);\r\n    \r\n    if (achievement && !achievement.completed) {\r\n      set({\r\n        achievements: state.achievements.map(a =>\r\n          a.id === achievementId \r\n            ? { ...a, completed: true, progress: a.requirement }\r\n            : a\r\n        ),\r\n        player: {\r\n          ...state.player,\r\n          volts: state.player.volts + achievement.reward\r\n        }\r\n      });\r\n    }\r\n  },\r\n\r\n  updatePlayerStats: (stats: Partial<Player>) => {\r\n    const state = get();\r\n    set({\r\n      player: {\r\n        ...state.player,\r\n        ...stats\r\n      }\r\n    });\r\n  },\r\n\r\n  addExperience: (amount: number) => {\r\n    const state = get();\r\n    const newExperience = state.player.experience + amount;\r\n    const oldLevel = calculateLevel(state.player.experience);\r\n    const newLevel = calculateLevel(newExperience);\r\n    \r\n    // Check if player leveled up\r\n    if (newLevel.level > oldLevel.level) {\r\n      // Player leveled up! Give rewards\r\n      const newVolts = state.player.volts + newLevel.voltsReward;\r\n      \r\n      set({\r\n        player: {\r\n          ...state.player,\r\n          experience: newExperience,\r\n          level: newLevel.level,\r\n          volts: newVolts\r\n        }\r\n      });\r\n      \r\n      // Show level up notification\r\n      const { showLevelUpNotification } = get();\r\n      showLevelUpNotification(newLevel, newLevel.voltsReward);\r\n    } else {\r\n      // Just add experience\r\n      set({\r\n        player: {\r\n          ...state.player,\r\n          experience: newExperience\r\n        }\r\n      });\r\n    }\r\n  },\r\n\r\n  getCurrentLevelInfo: () => {\r\n    const state = get();\r\n    return {\r\n      currentLevel: calculateLevel(state.player.experience),\r\n      progressInfo: getExperienceToNextLevel(state.player.experience)\r\n    };\r\n  },\r\n\r\n  showLevelUpNotification: (level, voltsReward) => {\r\n    set({\r\n      levelUpNotification: {\r\n        isVisible: true,\r\n        level,\r\n        voltsReward\r\n      }\r\n    });\r\n  },\r\n\r\n  hideLevelUpNotification: () => {\r\n    set({\r\n      levelUpNotification: {\r\n        isVisible: false,\r\n        level: null,\r\n        voltsReward: 0\r\n      }\r\n    });\r\n  },\r\n\r\n  updateLuckCoefficient: () => {\r\n    const state = get();\r\n    const totalAttempts = state.player.totalClicks;\r\n    const successfulClicks = state.player.successfulClicks;\r\n    \r\n    const newLuckCoefficient = totalAttempts > 0 ? \r\n      Math.round((successfulClicks / totalAttempts) * 100) : 50;\r\n    \r\n    // Проверяем, нужно ли восстанавливать индикатор удачи\r\n    const shouldRestoreLuckIndicator = state.player.luckIndicatorHidden && \r\n                                      Date.now() >= state.player.luckHiddenUntil;\r\n    \r\n    set({\r\n      player: {\r\n        ...state.player,\r\n        luckCoefficient: newLuckCoefficient,\r\n        luckIndicatorHidden: shouldRestoreLuckIndicator ? false : state.player.luckIndicatorHidden\r\n      }\r\n    });\r\n  },\r\n\r\n  // API integration methods\r\n  submitGameToServer: async () => {\r\n    const state = get();\r\n    \r\n    // Проверяем, аутентифицирован ли пользователь\r\n    if (!apiClient.isAuthenticated()) {\r\n      console.warn('User not authenticated, skipping server submission');\r\n      return { success: false, error: 'Not authenticated' };\r\n    }\r\n\r\n    try {\r\n      // Подготавливаем данные для отправки\r\n      const gameData = {\r\n        score: state.gameState.score,\r\n        level: getDifficultyLevel(state.singleMode.difficulty),\r\n        timePlayed: Math.floor(state.gameState.gameTime / 1000), // в секундах\r\n      };\r\n\r\n      console.log('Submitting game data to server:', gameData);\r\n\r\n      const response = await apiClient.submitScore(gameData);\r\n\r\n      if (response.error) {\r\n        console.error('Failed to submit score:', response.error);\r\n        return { success: false, error: response.error };\r\n      }\r\n\r\n      if (response.data) {\r\n        // Обновляем локальное состояние данными с сервера\r\n        const serverData = response.data;\r\n        \r\n        set({\r\n          player: {\r\n            ...state.player,\r\n            volts: serverData.totalVolts,\r\n            experience: serverData.totalExperience,\r\n            level: serverData.newLevel\r\n          }\r\n        });\r\n\r\n        // Показываем уведомление о повышении уровня, если было\r\n        if (serverData.leveledUp) {\r\n          const { showLevelUpNotification } = get();\r\n          showLevelUpNotification(\r\n            { level: serverData.newLevel }, \r\n            serverData.levelUpReward\r\n          );\r\n        }\r\n\r\n        console.log('Successfully submitted score and synced with server');\r\n        return { success: true };\r\n      }\r\n\r\n      return { success: true };\r\n    } catch (error) {\r\n      const errorMessage = error instanceof Error ? error.message : 'Unknown error';\r\n      console.error('Error submitting game to server:', errorMessage);\r\n      return { success: false, error: errorMessage };\r\n    }\r\n  },\r\n\r\n  syncWithServer: async () => {\r\n    if (!apiClient.isAuthenticated()) {\r\n      return { success: false, error: 'Not authenticated' };\r\n    }\r\n\r\n    try {\r\n      const response = await apiClient.getUserStats();\r\n\r\n      if (response.error) {\r\n        return { success: false, error: response.error };\r\n      }\r\n\r\n      if (response.data) {\r\n        const serverData = response.data;\r\n        \r\n        // Обновляем локальное состояние данными с сервера\r\n        set({\r\n          player: {\r\n            ...get().player,\r\n            volts: serverData.totalVolts,\r\n            experience: serverData.totalExperience,\r\n            level: serverData.level\r\n          }\r\n        });\r\n\r\n        console.log('Successfully synced with server');\r\n        return { success: true };\r\n      }\r\n\r\n      return { success: true };\r\n    } catch (error) {\r\n      const errorMessage = error instanceof Error ? error.message : 'Unknown error';\r\n      console.error('Error syncing with server:', errorMessage);\r\n      return { success: false, error: errorMessage };\r\n    }\r\n  },\r\n\r\n  loadStatsFromServer: async () => {\r\n    if (!apiClient.isAuthenticated()) {\r\n      return { success: false, error: 'Not authenticated' };\r\n    }\r\n\r\n    try {\r\n      const response = await apiClient.getUserStats();\r\n\r\n      if (response.error) {\r\n        return { success: false, error: response.error };\r\n      }\r\n\r\n      if (response.data) {\r\n        const serverData = response.data;\r\n        \r\n        // Полностью загружаем статистику с сервера\r\n        set({\r\n          player: {\r\n            ...get().player,\r\n            volts: serverData.totalVolts,\r\n            experience: serverData.totalExperience,\r\n            level: serverData.level\r\n          }\r\n        });\r\n\r\n        console.log('Successfully loaded stats from server');\r\n        return { success: true };\r\n      }\r\n\r\n      return { success: true };\r\n    } catch (error) {\r\n      const errorMessage = error instanceof Error ? error.message : 'Unknown error';\r\n      console.error('Error loading stats from server:', errorMessage);\r\n      return { success: false, error: errorMessage };\r\n    }\r\n  }\r\n}));\r\n\r\n// Вспомогательная функция для преобразования сложности в числовой уровень\r\nfunction getDifficultyLevel(difficulty: SingleModeState['difficulty']): number {\r\n  switch (difficulty) {\r\n    case 'easy': return 1;\r\n    case 'medium': return 2;\r\n    case 'hard': return 3;\r\n    case 'extreme': return 4;\r\n    default: return 1;\r\n  }\r\n}\r\n","/**\r\n * Haptic Manager - управление вибрацией в Telegram Mini App\r\n * Поддерживает различные типы вибрации для игровых событий\r\n */\r\n\r\nimport type { TelegramHapticFeedback } from '../types/telegram';\r\n\r\n// Типы вибрации Telegram Web App\r\nexport type HapticType = 'light' | 'medium' | 'heavy' | 'rigid' | 'soft';\r\nexport type NotificationType = 'error' | 'success' | 'warning';\r\n\r\n// Расширяем Window интерфейс для Telegram\r\ndeclare global {\r\n  interface Window {\r\n    Telegram?: {\r\n      WebApp?: {\r\n        HapticFeedback?: TelegramHapticFeedback;\r\n        [key: string]: any;\r\n      };\r\n    };\r\n  }\r\n}\r\n\r\nclass HapticManager {\r\n  private hapticFeedback: TelegramHapticFeedback | null = null;\r\n  private isEnabled: boolean = true;\r\n  private isTelegramEnvironment: boolean = false;\r\n\r\n  constructor() {\r\n    this.initializeTelegramHaptics();\r\n  }\r\n\r\n  /**\r\n   * Инициализация Telegram Haptic API\r\n   */\r\n  private initializeTelegramHaptics(): void {\r\n    try {\r\n      // Проверяем, работаем ли мы в Telegram\r\n      if (typeof window !== 'undefined' && window.Telegram?.WebApp) {\r\n        this.isTelegramEnvironment = true;\r\n        // Проверяем наличие HapticFeedback в объекте WebApp\r\n        const webApp = window.Telegram.WebApp as any;\r\n        if (webApp.HapticFeedback) {\r\n          this.hapticFeedback = webApp.HapticFeedback;\r\n          console.log('Telegram Haptic Feedback initialized');\r\n        } else {\r\n          console.log('HapticFeedback not available in this Telegram version');\r\n        }\r\n      } else {\r\n        console.log('Not in Telegram environment, haptics disabled');\r\n      }\r\n    } catch (error) {\r\n      console.warn('Failed to initialize Telegram haptics:', error);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Включение/выключение вибрации\r\n   */\r\n  setEnabled(enabled: boolean): void {\r\n    this.isEnabled = enabled;\r\n  }\r\n\r\n  /**\r\n   * Проверка доступности вибрации\r\n   */\r\n  isAvailable(): boolean {\r\n    return (\r\n      (this.isTelegramEnvironment && this.hapticFeedback !== null) || \r\n      (typeof window !== 'undefined' && 'navigator' in window && 'vibrate' in navigator)\r\n    ) && this.isEnabled;\r\n  }\r\n\r\n  /**\r\n   * Базовая вибрация для нажатий\r\n   */\r\n  light(): void {\r\n    if (this.isAvailable()) {\r\n      this.hapticFeedback!.impactOccurred('light');\r\n    } else {\r\n      this.fallbackVibration(50);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Средняя вибрация для важных действий\r\n   */\r\n  medium(): void {\r\n    if (this.isAvailable()) {\r\n      this.hapticFeedback!.impactOccurred('medium');\r\n    } else {\r\n      this.fallbackVibration(100);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Сильная вибрация для критических событий\r\n   */\r\n  heavy(): void {\r\n    if (this.isAvailable()) {\r\n      this.hapticFeedback!.impactOccurred('heavy');\r\n    } else {\r\n      this.fallbackVibration(150);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Мягкая вибрация для деликатных действий\r\n   */\r\n  soft(): void {\r\n    if (this.isAvailable()) {\r\n      this.hapticFeedback!.impactOccurred('soft');\r\n    } else {\r\n      this.fallbackVibration(30);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Жесткая вибрация для резких действий\r\n   */\r\n  rigid(): void {\r\n    if (this.isAvailable()) {\r\n      this.hapticFeedback!.impactOccurred('rigid');\r\n    } else {\r\n      this.fallbackVibration(200);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Вибрация для уведомлений\r\n   */\r\n  success(): void {\r\n    if (this.isAvailable()) {\r\n      this.hapticFeedback!.notificationOccurred('success');\r\n    } else {\r\n      this.customPattern([100, 50, 100]);\r\n    }\r\n  }\r\n\r\n  error(): void {\r\n    if (this.isAvailable()) {\r\n      this.hapticFeedback!.notificationOccurred('error');\r\n    } else {\r\n      this.customPattern([200, 100, 200, 100, 200]);\r\n    }\r\n  }\r\n\r\n  warning(): void {\r\n    if (this.isAvailable()) {\r\n      this.hapticFeedback!.notificationOccurred('warning');\r\n    } else {\r\n      this.customPattern([150, 50, 150]);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Вибрация при изменении выбора\r\n   */\r\n  selection(): void {\r\n    if (this.isAvailable()) {\r\n      this.hapticFeedback!.selectionChanged();\r\n    } else {\r\n      this.fallbackVibration(25);\r\n    }\r\n  }\r\n\r\n  // ==================== ИГРОВЫЕ СОБЫТИЯ ====================\r\n\r\n  /**\r\n   * Вибрация при нажатии на розетку\r\n   */\r\n  outletPress(): void {\r\n    this.medium();\r\n  }\r\n\r\n  /**\r\n   * Вибрация при успешном выживании\r\n   */\r\n  survivalSuccess(): void {\r\n    this.success();\r\n  }\r\n\r\n  /**\r\n   * Интенсивная вибрация при поражении током\r\n   * Точная вибрация только в момент удара током\r\n   */\r\n  electricShock(): void {\r\n    if (!this.isEnabled) return;\r\n\r\n    // Сильный импульс точно в момент удара\r\n    this.rigid();\r\n    \r\n    // Один дополнительный короткий импульс для усиления эффекта\r\n    setTimeout(() => {\r\n      if (this.isEnabled) this.heavy();\r\n    }, 50);\r\n  }\r\n\r\n  /**\r\n   * Короткая предупреждающая вибрация перед разрядом\r\n   */\r\n  electricWarning(): void {\r\n    if (!this.isEnabled) return;\r\n    \r\n    // Две быстрые слабые вибрации\r\n    this.light();\r\n    setTimeout(() => {\r\n      if (this.isEnabled) this.light();\r\n    }, 100);\r\n  }\r\n\r\n  /**\r\n   * Вибрация при повышении уровня\r\n   */\r\n  levelUp(): void {\r\n    // Серия из 3-х вибраций\r\n    this.success();\r\n    setTimeout(() => this.medium(), 150);\r\n    setTimeout(() => this.success(), 300);\r\n  }\r\n\r\n  /**\r\n   * Предупреждающая вибрация когда опасность высока\r\n   */\r\n  dangerWarning(): void {\r\n    if (!this.isEnabled) return;\r\n    \r\n    // Две быстрые слабые вибрации как предупреждение\r\n    this.light();\r\n    setTimeout(() => {\r\n      if (this.isEnabled) this.light();\r\n    }, 100);\r\n  }\r\n\r\n  /**\r\n   * Интенсивное предупреждение перед высоким риском разряда\r\n   */\r\n  extremeDangerWarning(): void {\r\n    if (!this.isEnabled) return;\r\n    \r\n    // Серия из трех нарастающих вибраций\r\n    this.light();\r\n    setTimeout(() => {\r\n      if (this.isEnabled) this.medium();\r\n    }, 150);\r\n    setTimeout(() => {\r\n      if (this.isEnabled) this.heavy();\r\n    }, 300);\r\n  }\r\n\r\n  /**\r\n   * Вибрация при получении награды\r\n   */\r\n  rewardReceived(): void {\r\n    this.light();\r\n    setTimeout(() => this.medium(), 100);\r\n  }\r\n\r\n  /**\r\n   * Вибрация для серийных достижений\r\n   */\r\n  streakAchievement(streakCount: number): void {\r\n    if (streakCount >= 25) {\r\n      // Мощная вибрация для больших серий\r\n      this.heavy();\r\n      setTimeout(() => this.heavy(), 200);\r\n      setTimeout(() => this.heavy(), 400);\r\n    } else if (streakCount >= 10) {\r\n      // Средняя вибрация для средних серий\r\n      this.medium();\r\n      setTimeout(() => this.medium(), 150);\r\n    } else if (streakCount >= 5) {\r\n      // Легкая вибрация для небольших серий\r\n      this.light();\r\n      setTimeout(() => this.light(), 100);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Вибрация при использовании предмета\r\n   */\r\n  itemUsed(): void {\r\n    this.soft();\r\n  }\r\n\r\n  /**\r\n   * Вибрация при покупке в магазине\r\n   */\r\n  shopPurchase(): void {\r\n    this.medium();\r\n    setTimeout(() => this.light(), 100);\r\n  }\r\n\r\n  /**\r\n   * Вибрация при входящем вызове в игру\r\n   */\r\n  gameInvitation(): void {\r\n    this.warning();\r\n    setTimeout(() => this.light(), 500);\r\n    setTimeout(() => this.light(), 1000);\r\n  }\r\n\r\n  /**\r\n   * Вибрация при начале раунда\r\n   */\r\n  roundStart(): void {\r\n    this.light();\r\n  }\r\n\r\n  /**\r\n   * Вибрация при окончании игры\r\n   */\r\n  gameEnd(isWinner: boolean): void {\r\n    if (isWinner) {\r\n      this.success();\r\n      setTimeout(() => this.medium(), 200);\r\n      setTimeout(() => this.success(), 400);\r\n    } else {\r\n      this.error();\r\n    }\r\n  }\r\n\r\n  // ==================== ВСПОМОГАТЕЛЬНЫЕ МЕТОДЫ ====================\r\n\r\n  /**\r\n   * Резервная вибрация для браузеров без Telegram API\r\n   */\r\n  private fallbackVibration(duration: number): void {\r\n    if ('navigator' in window && 'vibrate' in navigator) {\r\n      try {\r\n        navigator.vibrate(duration);\r\n        console.log(`🔹 Fallback vibration: ${duration}ms`);\r\n      } catch (error) {\r\n        console.warn('Vibration not supported:', error);\r\n      }\r\n    } else {\r\n      // Визуальная обратная связь для устройств без вибрации\r\n      console.log(`📳 Haptic feedback: ${duration}ms (visual only)`);\r\n      this.visualFeedback(duration);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Визуальная обратная связь для устройств без вибрации\r\n   */\r\n  private visualFeedback(duration: number): void {\r\n    // Создаем временную визуальную индикацию\r\n    const indicator = document.createElement('div');\r\n    indicator.style.cssText = `\r\n      position: fixed;\r\n      top: 20px;\r\n      right: 20px;\r\n      background: #FF6B35;\r\n      color: white;\r\n      padding: 8px 12px;\r\n      border-radius: 20px;\r\n      font-size: 12px;\r\n      font-weight: bold;\r\n      z-index: 10000;\r\n      pointer-events: none;\r\n      animation: pulse 0.3s ease-in-out;\r\n    `;\r\n    indicator.textContent = `📳 ${duration}ms`;\r\n    \r\n    // Добавляем CSS анимацию\r\n    if (!document.querySelector('#haptic-style')) {\r\n      const style = document.createElement('style');\r\n      style.id = 'haptic-style';\r\n      style.textContent = `\r\n        @keyframes pulse {\r\n          0% { transform: scale(0.8); opacity: 0; }\r\n          50% { transform: scale(1.1); opacity: 1; }\r\n          100% { transform: scale(1); opacity: 0.8; }\r\n        }\r\n      `;\r\n      document.head.appendChild(style);\r\n    }\r\n    \r\n    document.body.appendChild(indicator);\r\n    \r\n    setTimeout(() => {\r\n      if (indicator.parentNode) {\r\n        indicator.parentNode.removeChild(indicator);\r\n      }\r\n    }, Math.max(duration, 500));\r\n  }\r\n\r\n  /**\r\n   * Кастомный паттерн вибрации\r\n   */\r\n  private customPattern(pattern: number[]): void {\r\n    if ('navigator' in window && 'vibrate' in navigator) {\r\n      try {\r\n        navigator.vibrate(pattern);\r\n        console.log(`🔹 Vibration pattern: [${pattern.join(', ')}]ms`);\r\n      } catch (error) {\r\n        console.warn('Vibration pattern not supported:', error);\r\n      }\r\n    } else {\r\n      // Эмуляция паттерна через визуальную обратную связь\r\n      console.log(`📳 Haptic pattern: [${pattern.join(', ')}]ms (visual only)`);\r\n      this.visualPatternFeedback(pattern);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Визуальная эмуляция паттерна вибрации\r\n   */\r\n  private visualPatternFeedback(pattern: number[]): void {\r\n    let delay = 0;\r\n    for (let i = 0; i < pattern.length; i += 2) {\r\n      const vibrateDuration = pattern[i];\r\n      const pauseDuration = pattern[i + 1] || 0;\r\n      \r\n      setTimeout(() => {\r\n        this.visualFeedback(vibrateDuration);\r\n      }, delay);\r\n      \r\n      delay += vibrateDuration + pauseDuration;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Тестовая вибрация для настроек\r\n   */\r\n  test(): void {\r\n    this.medium();\r\n    setTimeout(() => this.light(), 200);\r\n    setTimeout(() => this.heavy(), 400);\r\n  }\r\n}\r\n\r\n// Глобальный экземпляр менеджера вибрации\r\nexport const hapticManager = new HapticManager();\r\n\r\nexport default hapticManager;\r\n","import React from 'react';\r\nimport { motion } from 'framer-motion';\r\nimport { useGameStore } from '../store/gameStore';\r\n\r\ninterface ScoreBreakdownProps {\r\n  onClose: () => void;\r\n}\r\n\r\nexport const ScoreBreakdown: React.FC<ScoreBreakdownProps> = ({ onClose }) => {\r\n  const { player, singleMode, gameState } = useGameStore();\r\n\r\n  return (\r\n    <motion.div\r\n      initial={{ opacity: 0 }}\r\n      animate={{ opacity: 1 }}\r\n      exit={{ opacity: 0 }}\r\n      className=\"fixed inset-0 bg-black/80 flex items-center justify-center p-4 z-50\"\r\n      onClick={onClose}\r\n    >\r\n      <motion.div\r\n        initial={{ opacity: 0, y: 20, scale: 0.9 }}\r\n        animate={{ opacity: 1, y: 0, scale: 1 }}\r\n        exit={{ opacity: 0, y: 20, scale: 0.9 }}\r\n        className=\"glass-effect p-6 max-w-2xl mx-auto relative max-h-[90vh] overflow-y-auto\"\r\n        onClick={(e) => e.stopPropagation()}\r\n      >\r\n        {/* Close Button */}\r\n        <button\r\n          onClick={onClose}\r\n          className=\"absolute top-4 right-4 text-gray-400 hover:text-white transition-colors text-2xl\"\r\n        >\r\n          ✕\r\n        </button>\r\n\r\n        <h3 className=\"text-2xl font-bold text-center mb-6 text-primary-orange\">\r\n          📊 Система очков и уровней\r\n        </h3>\r\n\r\n        {/* Current Stats */}\r\n        <div className=\"grid grid-cols-2 gap-4 mb-6\">\r\n          <div className=\"text-center glass-effect p-3 rounded-lg\">\r\n            <div className=\"text-xs text-gray-400\">ТЕКУЩАЯ СЕРИЯ</div>\r\n            <div className=\"text-xl font-bold text-yellow-400\">\r\n              {singleMode.streakCount}\r\n            </div>\r\n          </div>\r\n          <div className=\"text-center glass-effect p-3 rounded-lg\">\r\n            <div className=\"text-xs text-gray-400\">КОЭФФИЦИЕНТ УДАЧИ</div>\r\n            <div className={`text-xl font-bold ${\r\n              player.luckCoefficient >= 70 ? 'text-green-400' :\r\n              player.luckCoefficient >= 50 ? 'text-yellow-400' :\r\n              player.luckCoefficient >= 30 ? 'text-orange-400' :\r\n              'text-red-400'\r\n            }`}>\r\n              {player.luckCoefficient}%\r\n            </div>\r\n          </div>\r\n          <div className=\"text-center glass-effect p-3 rounded-lg\">\r\n            <div className=\"text-xs text-gray-400\">ТЕКУЩИЙ СЧЕТ</div>\r\n            <div className=\"text-xl font-bold text-green-400\">\r\n              {gameState.score}⚡\r\n            </div>\r\n          </div>\r\n          <div className=\"text-center glass-effect p-3 rounded-lg\">\r\n            <div className=\"text-xs text-gray-400\">ВСЕГО ВОЛЬТ</div>\r\n            <div className=\"text-xl font-bold text-blue-400\">\r\n              {player.volts}⚡\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        {/* Luck Statistics */}\r\n        <div className=\"mb-6\">\r\n          <h4 className=\"text-lg font-bold text-accent-blue mb-3\">🍀 Статистика удачи</h4>\r\n          <div className=\"grid grid-cols-3 gap-3\">\r\n            <div className=\"glass-effect p-3 rounded-lg text-center\">\r\n              <div className=\"text-xs text-gray-400\">УСПЕШНЫХ</div>\r\n              <div className=\"text-lg font-bold text-green-400\">{player.successfulClicks}</div>\r\n            </div>\r\n            <div className=\"glass-effect p-3 rounded-lg text-center\">\r\n              <div className=\"text-xs text-gray-400\">УДАРОВ ТОКОМ</div>\r\n              <div className=\"text-lg font-bold text-red-400\">{player.shockedClicks}</div>\r\n            </div>\r\n            <div className=\"glass-effect p-3 rounded-lg text-center\">\r\n              <div className=\"text-xs text-gray-400\">ВСЕГО КЛИКОВ</div>\r\n              <div className=\"text-lg font-bold text-blue-400\">{player.totalClicks}</div>\r\n            </div>\r\n          </div>\r\n          <div className=\"mt-3 text-center\">\r\n            <div className=\"text-sm text-gray-300\">\r\n              💡 Удача рассчитывается как процент успешных нажатий\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        {/* Scoring Rules */}\r\n        <div className=\"space-y-6\">\r\n          {/* Experience System */}\r\n          <div>\r\n            <h4 className=\"text-lg font-bold text-accent-blue mb-3\">📈 Система опыта и уровней</h4>\r\n            <div className=\"grid grid-cols-2 gap-3\">\r\n              <div className=\"glass-effect p-3 rounded-lg\">\r\n                <div className=\"text-green-400 font-bold\">🟢 Безопасное нажатие:</div>\r\n                <div className=\"text-sm text-gray-300\">+10 опыта</div>\r\n              </div>\r\n              <div className=\"glass-effect p-3 rounded-lg\">\r\n                <div className=\"text-yellow-400 font-bold\">🟡 Рискованное (2x+):</div>\r\n                <div className=\"text-sm text-gray-300\">+15 опыта</div>\r\n              </div>\r\n              <div className=\"glass-effect p-3 rounded-lg\">\r\n                <div className=\"text-red-400 font-bold\">🔴 Экстремальное (3x+):</div>\r\n                <div className=\"text-sm text-gray-300\">+25 опыта</div>\r\n              </div>\r\n              <div className=\"glass-effect p-3 rounded-lg\">\r\n                <div className=\"text-orange-400 font-bold\">💥 Поражение током:</div>\r\n                <div className=\"text-sm text-gray-300\">+5 опыта</div>\r\n              </div>\r\n            </div>\r\n            \r\n            <div className=\"mt-3 text-center\">\r\n              <div className=\"text-sm text-yellow-400 font-semibold\">\r\n                🏆 За повышение уровня вы получаете бонусные вольты!\r\n              </div>\r\n              <div className=\"text-xs text-gray-400 mt-1\">\r\n                Уровень 2: +50⚡ • Уровень 5: +150⚡ • Уровень 10: +500⚡\r\n              </div>\r\n              <div className=\"text-xs text-blue-300 mt-2\">\r\n                🎨 Изображение розетки меняется каждые 5 уровней!\r\n              </div>\r\n            </div>\r\n          </div>\r\n\r\n          {/* Basic Points Table */}\r\n          <div>\r\n            <h4 className=\"text-lg font-bold text-accent-blue mb-3\">⚡ Базовые очки за нажатие</h4>\r\n            <div className=\"grid grid-cols-2 gap-3\">\r\n              <div className=\"glass-effect p-3 rounded-lg\">\r\n                <div className=\"text-green-400 font-bold\">🟢 Безопасное нажатие:</div>\r\n                <div className=\"text-sm text-gray-300\">+10⚡ (базовые очки)</div>\r\n              </div>\r\n              <div className=\"glass-effect p-3 rounded-lg\">\r\n                <div className=\"text-red-400 font-bold\">💥 Поражение током:</div>\r\n                <div className=\"text-sm text-gray-300\">-8⚡ до -25⚡ (случайно)</div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n\r\n          {/* Risk Multipliers */}\r\n          <div>\r\n            <h4 className=\"text-lg font-bold text-accent-blue mb-3\">🎯 Множители за риск</h4>\r\n            <div className=\"grid grid-cols-2 gap-3\">\r\n              <div className=\"glass-effect p-3 rounded-lg\">\r\n                <div className=\"text-green-400 font-bold\">🟢 Лёгкий (15% риск):</div>\r\n                <div className=\"text-sm text-gray-300\">×1.0 (базовые очки)</div>\r\n              </div>\r\n              <div className=\"glass-effect p-3 rounded-lg\">\r\n                <div className=\"text-yellow-400 font-bold\">🟡 Средний (25% риск):</div>\r\n                <div className=\"text-sm text-gray-300\">×1.5 множитель</div>\r\n              </div>\r\n              <div className=\"glass-effect p-3 rounded-lg\">\r\n                <div className=\"text-orange-400 font-bold\">🟠 Сложный (35% риск):</div>\r\n                <div className=\"text-sm text-gray-300\">×2.0 множитель</div>\r\n              </div>\r\n              <div className=\"glass-effect p-3 rounded-lg\">\r\n                <div className=\"text-red-400 font-bold\">🔴 Экстрим (50% риск):</div>\r\n                <div className=\"text-sm text-gray-300\">×3.0 множитель</div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n\r\n          {/* Streak Bonuses */}\r\n          <div>\r\n            <h4 className=\"text-lg font-bold text-accent-blue mb-3\">🔥 Бонусы за серии</h4>\r\n            <div className=\"grid grid-cols-2 gap-3\">\r\n              <div className=\"glass-effect p-3 rounded-lg\">\r\n                <div className=\"text-gray-400 font-bold\">0-4 нажатий:</div>\r\n                <div className=\"text-sm text-gray-300\">×1.0 (без бонуса)</div>\r\n              </div>\r\n              <div className=\"glass-effect p-3 rounded-lg\">\r\n                <div className=\"text-yellow-400 font-bold\">5+ нажатий:</div>\r\n                <div className=\"text-sm text-gray-300\">×1.2 бонус</div>\r\n              </div>\r\n              <div className=\"glass-effect p-3 rounded-lg\">\r\n                <div className=\"text-orange-400 font-bold\">10+ нажатий:</div>\r\n                <div className=\"text-sm text-gray-300\">×1.5 бонус</div>\r\n              </div>\r\n              <div className=\"glass-effect p-3 rounded-lg\">\r\n                <div className=\"text-red-400 font-bold\">25+ нажатий:</div>\r\n                <div className=\"text-sm text-gray-300\">×2.0 бонус</div>\r\n              </div>\r\n              <div className=\"glass-effect p-3 rounded-lg\">\r\n                <div className=\"text-purple-400 font-bold\">50+ нажатий:</div>\r\n                <div className=\"text-sm text-gray-300\">×3.0 бонус</div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n\r\n          {/* Formula */}\r\n          <div>\r\n            <h4 className=\"text-lg font-bold text-accent-blue mb-3\">🧮 Формула расчёта</h4>\r\n            <div className=\"glass-effect p-4 rounded-lg bg-gradient-to-r from-blue-500/10 to-purple-500/10\">\r\n              <div className=\"text-center text-lg font-mono\">\r\n                <span className=\"text-white\">Итоговые очки</span> = \r\n                <span className=\"text-green-400\"> 10⚡</span> × \r\n                <span className=\"text-orange-400\"> Риск</span> × \r\n                <span className=\"text-yellow-400\"> Серия</span>\r\n              </div>\r\n            </div>\r\n          </div>\r\n\r\n          {/* Examples */}\r\n          <div>\r\n            <h4 className=\"text-lg font-bold text-accent-blue mb-3\">💡 Примеры расчётов</h4>\r\n            <div className=\"space-y-3\">\r\n              <div className=\"bg-black/30 p-3 rounded-lg\">\r\n                <div className=\"text-green-400 font-bold\">🟢 Безопасная игра:</div>\r\n                <div className=\"text-sm text-gray-300\">\r\n                  10⚡ × 1.0 (низкий риск) × 1.2 (5+ серия) = <span className=\"text-white font-bold\">12⚡</span>\r\n                </div>\r\n              </div>\r\n              \r\n              <div className=\"bg-black/30 p-3 rounded-lg\">\r\n                <div className=\"text-orange-400 font-bold\">🟠 Рискованная игра:</div>\r\n                <div className=\"text-sm text-gray-300\">\r\n                  10⚡ × 2.0 (высокий риск) × 1.5 (10+ серия) = <span className=\"text-white font-bold\">30⚡</span>\r\n                </div>\r\n              </div>\r\n              \r\n              <div className=\"bg-black/30 p-3 rounded-lg\">\r\n                <div className=\"text-red-400 font-bold\">🔴 Экстремальная игра:</div>\r\n                <div className=\"text-sm text-gray-300\">\r\n                  10⚡ × 3.0 (экстрим риск) × 2.0 (25+ серия) = <span className=\"text-white font-bold\">60⚡</span>\r\n                </div>\r\n              </div>\r\n\r\n              <div className=\"bg-black/30 p-3 rounded-lg\">\r\n                <div className=\"text-red-400 font-bold\">💥 Поражение током:</div>\r\n                <div className=\"text-sm text-gray-300\">\r\n                  Случайно от 8⚡ до 25⚡ + <span className=\"text-red-400\">серия сбрасывается</span>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        <div className=\"mt-6 text-center text-xs text-gray-400\">\r\n          💡 Совет: Балансируйте между риском и безопасностью для максимального заработка!\r\n        </div>\r\n      </motion.div>\r\n    </motion.div>\r\n  );\r\n};\r\n","import React from 'react';\r\nimport { motion } from 'framer-motion';\r\nimport { useGameStore } from '../store/gameStore';\r\nimport { getLevelProgress, getOutletImageByLevel } from '../utils/levelSystem';\r\n\r\nexport const LevelDisplay: React.FC = () => {\r\n  const { player, getCurrentLevelInfo } = useGameStore();\r\n  const { currentLevel, progressInfo } = getCurrentLevelInfo();\r\n  const progressPercent = getLevelProgress(player.experience);\r\n  \r\n  // Check if outlet image will change at next level\r\n  const currentOutletImage = getOutletImageByLevel(currentLevel.level);\r\n  const nextOutletImage = progressInfo.nextLevel ? getOutletImageByLevel(progressInfo.nextLevel.level) : null;\r\n  const outletWillChange = nextOutletImage && nextOutletImage !== currentOutletImage;\r\n\r\n  return (\r\n    <div className=\"glass-effect p-4 rounded-xl space-y-3\">\r\n      {/* Level Title and Number */}\r\n      <div className=\"flex items-center justify-between\">\r\n        <div className=\"flex items-center space-x-3\">\r\n          {/* Current Outlet Image */}\r\n          <img \r\n            src={getOutletImageByLevel(currentLevel.level)} \r\n            alt={`Розетка уровня ${currentLevel.level}`}\r\n            className=\"w-12 h-12 rounded-lg border-2 border-primary-orange shadow-lg\"\r\n          />\r\n          <div>\r\n            <div className=\"text-xs text-gray-400 uppercase tracking-wide\">Уровень</div>\r\n            <div className=\"flex items-baseline space-x-2\">\r\n              <span className=\"text-2xl font-bold text-primary-orange\">{currentLevel.level}</span>\r\n              <span className=\"text-sm text-gray-300\">{currentLevel.title}</span>\r\n            </div>\r\n          </div>\r\n        </div>\r\n        <div className=\"text-right\">\r\n          <div className=\"text-xs text-gray-400\">Опыт</div>\r\n          <div className=\"text-lg font-bold text-accent-blue\">\r\n            {player.experience.toLocaleString()}\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Progress Bar */}\r\n      <div className=\"space-y-2\">\r\n        <div className=\"flex justify-between text-xs text-gray-400\">\r\n          <span>{progressInfo.current}</span>\r\n          <span>{progressInfo.nextLevel ? `${progressInfo.remaining} до ${progressInfo.nextLevel.level} уровня` : 'Максимум'}</span>\r\n          <span>{progressInfo.required}</span>\r\n        </div>\r\n        \r\n        <div className=\"relative w-full bg-gray-700 rounded-full h-2 overflow-hidden\">\r\n          <motion.div\r\n            className=\"h-full bg-gradient-to-r from-accent-blue to-primary-orange rounded-full\"\r\n            initial={{ width: 0 }}\r\n            animate={{ width: `${progressPercent}%` }}\r\n            transition={{ duration: 0.8, ease: \"easeOut\" }}\r\n          />\r\n          \r\n          {/* Spark effect on progress bar */}\r\n          {progressPercent > 0 && (\r\n            <motion.div\r\n              className=\"absolute top-0 right-0 w-1 h-full bg-white opacity-80\"\r\n              style={{ right: `${100 - progressPercent}%` }}\r\n              animate={{ opacity: [0.8, 0.3, 0.8] }}\r\n              transition={{ repeat: Infinity, duration: 1.5 }}\r\n            />\r\n          )}\r\n        </div>\r\n      </div>\r\n\r\n      {/* Level Description */}\r\n      <div className=\"text-xs text-gray-400 italic text-center\">\r\n        {currentLevel.description}\r\n      </div>\r\n\r\n      {/* Next Level Preview */}\r\n      {progressInfo.nextLevel && (\r\n        <div className=\"text-center pt-2 border-t border-gray-600\">\r\n          <div className=\"text-xs text-gray-500\">Следующий уровень</div>\r\n          <div className=\"text-sm\">\r\n            <span className=\"text-accent-lime font-semibold\">{progressInfo.nextLevel.title}</span>\r\n            <span className=\"text-gray-400\"> • </span>\r\n            <span className=\"text-yellow-400\">+{progressInfo.nextLevel.voltsReward}⚡</span>\r\n          </div>\r\n          \r\n          {/* Show next outlet image if it will change */}\r\n          {outletWillChange && (\r\n            <div className=\"flex items-center justify-center space-x-2 mt-2\">\r\n              <span className=\"text-xs text-blue-300\">🎨 Новая розетка:</span>\r\n              <img \r\n                src={nextOutletImage} \r\n                alt={`Розетка уровня ${progressInfo.nextLevel.level}`}\r\n                className=\"w-6 h-6 rounded border border-blue-400 shadow-sm\"\r\n              />\r\n            </div>\r\n          )}\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n","import React, { useState, useEffect } from 'react';\r\nimport { motion } from 'framer-motion';\r\nimport { hapticManager } from '../utils/hapticManager';\r\n\r\ninterface HapticSettingsProps {\r\n  isVisible: boolean;\r\n  onClose: () => void;\r\n}\r\n\r\nexport const HapticSettings: React.FC<HapticSettingsProps> = ({\r\n  isVisible,\r\n  onClose\r\n}) => {\r\n  const [isEnabled, setIsEnabled] = useState(true);\r\n  const [testingType, setTestingType] = useState<string | null>(null);\r\n\r\n  useEffect(() => {\r\n    // Load settings from localStorage\r\n    const savedEnabled = localStorage.getItem('hapticEnabled');\r\n    if (savedEnabled !== null) {\r\n      const enabled = JSON.parse(savedEnabled);\r\n      setIsEnabled(enabled);\r\n      hapticManager.setEnabled(enabled);\r\n    }\r\n  }, []);\r\n\r\n  const handleToggleEnabled = () => {\r\n    const newValue = !isEnabled;\r\n    setIsEnabled(newValue);\r\n    hapticManager.setEnabled(newValue);\r\n    localStorage.setItem('hapticEnabled', JSON.stringify(newValue));\r\n    \r\n    // Test vibration when enabling\r\n    if (newValue) {\r\n      hapticManager.test();\r\n    }\r\n  };\r\n\r\n  const testHaptic = (type: string, action: () => void) => {\r\n    setTestingType(type);\r\n    action();\r\n    setTimeout(() => setTestingType(null), 500);\r\n  };\r\n\r\n  if (!isVisible) return null;\r\n\r\n  return (\r\n    <motion.div\r\n      initial={{ opacity: 0 }}\r\n      animate={{ opacity: 1 }}\r\n      exit={{ opacity: 0 }}\r\n      className=\"fixed inset-0 bg-black/80 flex items-center justify-center z-50 p-4\"\r\n      onClick={onClose}\r\n    >\r\n      <motion.div\r\n        initial={{ scale: 0.8, opacity: 0 }}\r\n        animate={{ scale: 1, opacity: 1 }}\r\n        exit={{ scale: 0.8, opacity: 0 }}\r\n        className=\"bg-gradient-to-br from-gray-900 to-gray-800 rounded-2xl p-6 max-w-sm w-full border border-primary-orange/20\"\r\n        onClick={(e) => e.stopPropagation()}\r\n      >\r\n        {/* Header */}\r\n        <div className=\"flex justify-between items-center mb-6\">\r\n          <h2 className=\"text-2xl font-bold text-primary-orange\">Вибрация</h2>\r\n          <button\r\n            onClick={onClose}\r\n            className=\"text-gray-400 hover:text-white text-2xl\"\r\n          >\r\n            ×\r\n          </button>\r\n        </div>\r\n\r\n        {/* Enable/Disable Toggle */}\r\n        <div className=\"mb-6\">\r\n          <div className=\"flex justify-between items-center p-4 bg-gray-800/50 rounded-xl\">\r\n            <div>\r\n              <h3 className=\"text-lg font-semibold text-white\">Включить вибрацию</h3>\r\n              <p className=\"text-sm text-gray-400\">\r\n                {hapticManager.isAvailable() \r\n                  ? 'Поддерживается вашим устройством' \r\n                  : 'Недоступно на вашем устройстве'\r\n                }\r\n              </p>\r\n            </div>\r\n            <motion.button\r\n              onClick={handleToggleEnabled}\r\n              className={`w-12 h-6 rounded-full p-1 transition-colors ${\r\n                isEnabled ? 'bg-primary-orange' : 'bg-gray-600'\r\n              }`}\r\n              whileTap={{ scale: 0.95 }}\r\n            >\r\n              <motion.div\r\n                className=\"w-4 h-4 bg-white rounded-full\"\r\n                animate={{ x: isEnabled ? 24 : 0 }}\r\n                transition={{ type: 'spring', stiffness: 500, damping: 30 }}\r\n              />\r\n            </motion.button>\r\n          </div>\r\n        </div>\r\n\r\n        {/* Test Vibrations */}\r\n        {isEnabled && (\r\n          <div className=\"space-y-3\">\r\n            <h3 className=\"text-lg font-semibold text-white mb-3\">Тест вибрации</h3>\r\n            \r\n            {/* Game Events */}\r\n            <div className=\"space-y-2\">\r\n              <h4 className=\"text-sm font-medium text-gray-300\">Игровые события</h4>\r\n              \r\n              <motion.button\r\n                onClick={() => testHaptic('press', () => hapticManager.outletPress())}\r\n                className={`w-full p-3 rounded-lg border transition-colors ${\r\n                  testingType === 'press' \r\n                    ? 'bg-blue-500/30 border-blue-400 text-blue-200' \r\n                    : 'bg-gray-700/50 border-gray-600 text-gray-300 hover:bg-gray-600/50'\r\n                }`}\r\n                whileHover={{ scale: 1.02 }}\r\n                whileTap={{ scale: 0.98 }}\r\n              >\r\n                🔌 Нажатие на розетку\r\n              </motion.button>\r\n\r\n              <motion.button\r\n                onClick={() => testHaptic('success', () => hapticManager.survivalSuccess())}\r\n                className={`w-full p-3 rounded-lg border transition-colors ${\r\n                  testingType === 'success' \r\n                    ? 'bg-green-500/30 border-green-400 text-green-200' \r\n                    : 'bg-gray-700/50 border-gray-600 text-gray-300 hover:bg-gray-600/50'\r\n                }`}\r\n                whileHover={{ scale: 1.02 }}\r\n                whileTap={{ scale: 0.98 }}\r\n              >\r\n                ✅ Успешное выживание\r\n              </motion.button>\r\n\r\n              <motion.button\r\n                onClick={() => testHaptic('shock', () => hapticManager.electricShock())}\r\n                className={`w-full p-3 rounded-lg border transition-colors ${\r\n                  testingType === 'shock' \r\n                    ? 'bg-red-500/30 border-red-400 text-red-200' \r\n                    : 'bg-gray-700/50 border-gray-600 text-gray-300 hover:bg-gray-600/50'\r\n                }`}\r\n                whileHover={{ scale: 1.02 }}\r\n                whileTap={{ scale: 0.98 }}\r\n              >\r\n                ⚡ Удар током\r\n              </motion.button>\r\n\r\n              <motion.button\r\n                onClick={() => testHaptic('levelup', () => hapticManager.levelUp())}\r\n                className={`w-full p-3 rounded-lg border transition-colors ${\r\n                  testingType === 'levelup' \r\n                    ? 'bg-yellow-500/30 border-yellow-400 text-yellow-200' \r\n                    : 'bg-gray-700/50 border-gray-600 text-gray-300 hover:bg-gray-600/50'\r\n                }`}\r\n                whileHover={{ scale: 1.02 }}\r\n                whileTap={{ scale: 0.98 }}\r\n              >\r\n                🆙 Повышение уровня\r\n              </motion.button>\r\n            </div>\r\n\r\n            {/* Intensity Levels */}\r\n            <div className=\"space-y-2 mt-4\">\r\n              <h4 className=\"text-sm font-medium text-gray-300\">Интенсивность</h4>\r\n              \r\n              <div className=\"grid grid-cols-2 gap-2\">\r\n                <motion.button\r\n                  onClick={() => testHaptic('light', () => hapticManager.light())}\r\n                  className={`p-2 rounded-lg border text-sm transition-colors ${\r\n                    testingType === 'light' \r\n                      ? 'bg-gray-500/30 border-gray-400 text-gray-200' \r\n                      : 'bg-gray-700/50 border-gray-600 text-gray-300 hover:bg-gray-600/50'\r\n                  }`}\r\n                  whileHover={{ scale: 1.02 }}\r\n                  whileTap={{ scale: 0.98 }}\r\n                >\r\n                  Легкая\r\n                </motion.button>\r\n\r\n                <motion.button\r\n                  onClick={() => testHaptic('medium', () => hapticManager.medium())}\r\n                  className={`p-2 rounded-lg border text-sm transition-colors ${\r\n                    testingType === 'medium' \r\n                      ? 'bg-gray-500/30 border-gray-400 text-gray-200' \r\n                      : 'bg-gray-700/50 border-gray-600 text-gray-300 hover:bg-gray-600/50'\r\n                  }`}\r\n                  whileHover={{ scale: 1.02 }}\r\n                  whileTap={{ scale: 0.98 }}\r\n                >\r\n                  Средняя\r\n                </motion.button>\r\n\r\n                <motion.button\r\n                  onClick={() => testHaptic('heavy', () => hapticManager.heavy())}\r\n                  className={`p-2 rounded-lg border text-sm transition-colors ${\r\n                    testingType === 'heavy' \r\n                      ? 'bg-gray-500/30 border-gray-400 text-gray-200' \r\n                      : 'bg-gray-700/50 border-gray-600 text-gray-300 hover:bg-gray-600/50'\r\n                  }`}\r\n                  whileHover={{ scale: 1.02 }}\r\n                  whileTap={{ scale: 0.98 }}\r\n                >\r\n                  Сильная\r\n                </motion.button>\r\n\r\n                <motion.button\r\n                  onClick={() => testHaptic('rigid', () => hapticManager.rigid())}\r\n                  className={`p-2 rounded-lg border text-sm transition-colors ${\r\n                    testingType === 'rigid' \r\n                      ? 'bg-gray-500/30 border-gray-400 text-gray-200' \r\n                      : 'bg-gray-700/50 border-gray-600 text-gray-300 hover:bg-gray-600/50'\r\n                  }`}\r\n                  whileHover={{ scale: 1.02 }}\r\n                  whileTap={{ scale: 0.98 }}\r\n                >\r\n                  Резкая\r\n                </motion.button>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        )}\r\n\r\n        {/* Info */}\r\n        <div className=\"mt-6 p-3 bg-blue-900/20 border border-blue-500/30 rounded-lg\">\r\n          <p className=\"text-xs text-blue-300 text-center\">\r\n            💡 Вибрация доступна только в Telegram Mini App на поддерживаемых устройствах\r\n          </p>\r\n        </div>\r\n      </motion.div>\r\n    </motion.div>\r\n  );\r\n};\r\n","/**\r\n * TelegramProvider - компонент для управления интеграцией с Telegram Mini App\r\n */\r\n\r\nimport React, { createContext, useContext, useEffect, useState } from 'react';\r\nimport type { TelegramWebApp, TelegramUser } from '../types/telegram';\r\n\r\ninterface TelegramContextType {\r\n  webApp: TelegramWebApp | null;\r\n  user: TelegramUser | null;\r\n  isInTelegram: boolean;\r\n  platform: string;\r\n  colorScheme: 'light' | 'dark';\r\n}\r\n\r\nconst TelegramContext = createContext<TelegramContextType>({\r\n  webApp: null,\r\n  user: null,\r\n  isInTelegram: false,\r\n  platform: 'unknown',\r\n  colorScheme: 'dark'\r\n});\r\n\r\nexport const useTelegram = () => useContext(TelegramContext);\r\n\r\ninterface TelegramProviderProps {\r\n  children: React.ReactNode;\r\n}\r\n\r\nexport const TelegramProvider: React.FC<TelegramProviderProps> = ({ children }) => {\r\n  const [webApp, setWebApp] = useState<TelegramWebApp | null>(null);\r\n  const [user, setUser] = useState<TelegramUser | null>(null);\r\n  const [isInTelegram, setIsInTelegram] = useState(false);\r\n  const [platform, setPlatform] = useState('unknown');\r\n  const [colorScheme, setColorScheme] = useState<'light' | 'dark'>('dark');\r\n\r\n  useEffect(() => {\r\n    if (typeof window !== 'undefined' && window.Telegram?.WebApp) {\r\n      const tgWebApp = window.Telegram.WebApp as TelegramWebApp;\r\n      \r\n      // Инициализация WebApp\r\n      tgWebApp.ready();\r\n      tgWebApp.expand();\r\n      \r\n      setWebApp(tgWebApp);\r\n      setIsInTelegram(true);\r\n      setPlatform(tgWebApp.platform || 'unknown');\r\n      setColorScheme(tgWebApp.colorScheme || 'dark');\r\n      \r\n      // Получение информации о пользователе\r\n      if (tgWebApp.initDataUnsafe?.user) {\r\n        setUser(tgWebApp.initDataUnsafe.user);\r\n        console.log('Telegram user:', tgWebApp.initDataUnsafe.user);\r\n      }\r\n      \r\n      // Настройка интерфейса\r\n      tgWebApp.setHeaderColor('#000000');\r\n      tgWebApp.setBackgroundColor('#000000');\r\n      \r\n      // Отключаем стандартную кнопку закрытия\r\n      tgWebApp.disableClosingConfirmation();\r\n      \r\n      console.log('Telegram WebApp initialized successfully');\r\n\r\n      // Инициализация\r\n      tgWebApp.ready();\r\n      tgWebApp.expand();\r\n\r\n      console.log('Telegram WebApp Context initialized:', {\r\n        platform: tgWebApp.platform,\r\n        colorScheme: tgWebApp.colorScheme,\r\n        user: tgWebApp.initDataUnsafe?.user,\r\n        version: tgWebApp.version\r\n      });\r\n    }\r\n  }, []);\r\n\r\n  const contextValue: TelegramContextType = {\r\n    webApp,\r\n    user,\r\n    isInTelegram,\r\n    platform,\r\n    colorScheme\r\n  };\r\n\r\n  return (\r\n    <TelegramContext.Provider value={contextValue}>\r\n      {children}\r\n    </TelegramContext.Provider>\r\n  );\r\n};\r\n\r\nexport default TelegramProvider;\r\n","/**\r\n * TelegramUserInfo - компонент для отображения информации о пользователе Telegram\r\n */\r\n\r\nimport React from 'react';\r\nimport { motion } from 'framer-motion';\r\nimport { useTelegram } from './TelegramProvider';\r\n\r\nexport const TelegramUserInfo: React.FC = () => {\r\n  const { user, isInTelegram, platform, colorScheme } = useTelegram();\r\n\r\n  if (!isInTelegram) {\r\n    return (\r\n      <div className=\"text-xs text-gray-500 text-center p-2\">\r\n        💻 Веб-версия (не в Telegram)\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <motion.div\r\n      initial={{ opacity: 0, y: -10 }}\r\n      animate={{ opacity: 1, y: 0 }}\r\n      className=\"bg-gradient-to-r from-blue-900/20 to-purple-900/20 border border-blue-500/30 rounded-lg p-3 mb-4\"\r\n    >\r\n      <div className=\"flex items-center justify-between\">\r\n        <div className=\"flex items-center space-x-3\">\r\n          {user?.photo_url ? (\r\n            <img \r\n              src={user.photo_url} \r\n              alt=\"Avatar\" \r\n              className=\"w-8 h-8 rounded-full border border-blue-400/50\"\r\n            />\r\n          ) : (\r\n            <div className=\"w-8 h-8 bg-gradient-to-br from-blue-500 to-purple-600 rounded-full flex items-center justify-center\">\r\n              <span className=\"text-white text-sm font-bold\">\r\n                {user?.first_name?.[0] || '?'}\r\n              </span>\r\n            </div>\r\n          )}\r\n          \r\n          <div>\r\n            <div className=\"text-sm font-medium text-white\">\r\n              {user?.first_name} {user?.last_name}\r\n              {user?.is_premium && <span className=\"ml-1 text-yellow-400\">⭐</span>}\r\n            </div>\r\n            <div className=\"text-xs text-gray-400\">\r\n              @{user?.username || 'no_username'} • {platform}\r\n            </div>\r\n          </div>\r\n        </div>\r\n        \r\n        <div className=\"text-right\">\r\n          <div className={`text-xs px-2 py-1 rounded-full border ${\r\n            colorScheme === 'dark' \r\n              ? 'bg-gray-800 border-gray-600 text-gray-300' \r\n              : 'bg-gray-200 border-gray-400 text-gray-700'\r\n          }`}>\r\n            {colorScheme === 'dark' ? '🌙' : '☀️'} {colorScheme}\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </motion.div>\r\n  );\r\n};\r\n","import { useState, useCallback } from 'react';\r\nimport { apiClient } from '../utils/apiClient';\r\n\r\ninterface UseApiState<T = any> {\r\n  data: T | null;\r\n  loading: boolean;\r\n  error: string | null;\r\n}\r\n\r\ninterface GameScoreData {\r\n  score: number;\r\n  level: number;\r\n  timePlayed: number;\r\n}\r\n\r\n/**\r\n * Хук для работы с игровым API\r\n */\r\nexport function useGameApi() {\r\n  const [submitState, setSubmitState] = useState<UseApiState>({\r\n    data: null,\r\n    loading: false,\r\n    error: null,\r\n  });\r\n\r\n  const [statsState, setStatsState] = useState<UseApiState>({\r\n    data: null,\r\n    loading: false,\r\n    error: null,\r\n  });\r\n\r\n  const [leaderboardState, setLeaderboardState] = useState<UseApiState>({\r\n    data: null,\r\n    loading: false,\r\n    error: null,\r\n  });\r\n\r\n  /**\r\n   * Отправляет очки на сервер\r\n   */\r\n  const submitScore = useCallback(async (scoreData: GameScoreData) => {\r\n    setSubmitState({ data: null, loading: true, error: null });\r\n\r\n    try {\r\n      const response = await apiClient.submitScore(scoreData);\r\n      \r\n      if (response.error) {\r\n        setSubmitState({ data: null, loading: false, error: response.error });\r\n        return { success: false, error: response.error };\r\n      }\r\n\r\n      setSubmitState({ data: response.data, loading: false, error: null });\r\n      return { success: true, data: response.data };\r\n    } catch (error) {\r\n      const errorMessage = error instanceof Error ? error.message : 'Unknown error';\r\n      setSubmitState({ data: null, loading: false, error: errorMessage });\r\n      return { success: false, error: errorMessage };\r\n    }\r\n  }, []);\r\n\r\n  /**\r\n   * Получает статистику пользователя\r\n   */\r\n  const getUserStats = useCallback(async () => {\r\n    setStatsState({ data: null, loading: true, error: null });\r\n\r\n    try {\r\n      const response = await apiClient.getUserStats();\r\n      \r\n      if (response.error) {\r\n        setStatsState({ data: null, loading: false, error: response.error });\r\n        return { success: false, error: response.error };\r\n      }\r\n\r\n      setStatsState({ data: response.data, loading: false, error: null });\r\n      return { success: true, data: response.data };\r\n    } catch (error) {\r\n      const errorMessage = error instanceof Error ? error.message : 'Unknown error';\r\n      setStatsState({ data: null, loading: false, error: errorMessage });\r\n      return { success: false, error: errorMessage };\r\n    }\r\n  }, []);\r\n\r\n  /**\r\n   * Получает таблицу лидеров\r\n   */\r\n  const getLeaderboard = useCallback(async (type: 'level' | 'volts' | 'experience' = 'level', limit = 10) => {\r\n    setLeaderboardState({ data: null, loading: true, error: null });\r\n\r\n    try {\r\n      const response = await apiClient.getLeaderboard(type, limit);\r\n      \r\n      if (response.error) {\r\n        setLeaderboardState({ data: null, loading: false, error: response.error });\r\n        return { success: false, error: response.error };\r\n      }\r\n\r\n      setLeaderboardState({ data: response.data, loading: false, error: null });\r\n      return { success: true, data: response.data };\r\n    } catch (error) {\r\n      const errorMessage = error instanceof Error ? error.message : 'Unknown error';\r\n      setLeaderboardState({ data: null, loading: false, error: errorMessage });\r\n      return { success: false, error: errorMessage };\r\n    }\r\n  }, []);\r\n\r\n  /**\r\n   * Восстанавливает энергию\r\n   */\r\n  const refillEnergy = useCallback(async () => {\r\n    try {\r\n      const response = await apiClient.refillEnergy();\r\n      \r\n      if (response.error) {\r\n        return { success: false, error: response.error };\r\n      }\r\n\r\n      return { success: true, data: response.data };\r\n    } catch (error) {\r\n      const errorMessage = error instanceof Error ? error.message : 'Unknown error';\r\n      return { success: false, error: errorMessage };\r\n    }\r\n  }, []);\r\n\r\n  return {\r\n    // Методы\r\n    submitScore,\r\n    getUserStats,\r\n    getLeaderboard,\r\n    refillEnergy,\r\n    \r\n    // Состояния\r\n    submitState,\r\n    statsState,\r\n    leaderboardState,\r\n    \r\n    // Статусы аутентификации\r\n    isAuthenticated: apiClient.isAuthenticated(),\r\n  };\r\n}\r\n\r\n/**\r\n * Простой хук для offline/online режима\r\n */\r\nexport function useOfflineMode() {\r\n  const [isOnline, setIsOnline] = useState(navigator.onLine);\r\n\r\n  useState(() => {\r\n    const handleOnline = () => setIsOnline(true);\r\n    const handleOffline = () => setIsOnline(false);\r\n\r\n    window.addEventListener('online', handleOnline);\r\n    window.addEventListener('offline', handleOffline);\r\n\r\n    return () => {\r\n      window.removeEventListener('online', handleOnline);\r\n      window.removeEventListener('offline', handleOffline);\r\n    };\r\n  });\r\n\r\n  return { isOnline };\r\n}\r\n","import React, { useState, useEffect } from 'react';\r\nimport { motion } from 'framer-motion';\r\nimport { useGameStore } from '../store/gameStore';\r\nimport { hapticManager } from '../utils/hapticManager';\r\nimport { ScoreBreakdown } from './ScoreBreakdown';\r\nimport { LevelDisplay } from './LevelDisplay';\r\nimport { HapticSettings } from './HapticSettings';\r\nimport { TelegramUserInfo } from './TelegramUserInfo';\r\nimport { useGameApi } from '../hooks/useGameApi';\r\n\r\nexport const MainMenu: React.FC = () => {\r\n  const { startSingleMode, player, addExperience, loadStatsFromServer } = useGameStore();\r\n  const { isAuthenticated } = useGameApi();\r\n  const [showScoreBreakdown, setShowScoreBreakdown] = useState(false);\r\n  const [showHapticSettings, setShowHapticSettings] = useState(false);\r\n  const [isLoadingStats, setIsLoadingStats] = useState(false);\r\n\r\n  // Загружаем статистику с сервера при первом запуске\r\n  useEffect(() => {\r\n    const loadServerStats = async () => {\r\n      if (isAuthenticated && !isLoadingStats) {\r\n        setIsLoadingStats(true);\r\n        \r\n        try {\r\n          const result = await loadStatsFromServer();\r\n          \r\n          if (result.success) {\r\n            console.log('✅ Статистика загружена с сервера');\r\n          } else {\r\n            console.warn('⚠️ Не удалось загрузить статистику с сервера:', result.error);\r\n          }\r\n        } catch (error) {\r\n          console.error('❌ Ошибка при загрузке статистики:', error);\r\n        } finally {\r\n          setIsLoadingStats(false);\r\n        }\r\n      }\r\n    };\r\n\r\n    loadServerStats();\r\n  }, [isAuthenticated, loadStatsFromServer, isLoadingStats]);\r\n  \r\n  // Development helper to test level system\r\n  const handleQuickLevelUp = () => {\r\n    addExperience(100); // Add 100 experience for testing\r\n  };\r\n\r\n  const handleStartGame = (difficulty: 'easy' | 'medium' | 'hard' | 'extreme') => {\r\n    hapticManager.medium(); // Вибрация при начале игры\r\n    startSingleMode(difficulty);\r\n  };\r\n\r\n  return (\r\n    <div className=\"min-h-screen flex flex-col items-center justify-center p-4 bg-gradient-to-br from-background-dark to-background-darker\">\r\n      {/* Logo */}\r\n      <motion.div\r\n        initial={{ opacity: 0, y: -50 }}\r\n        animate={{ opacity: 1, y: 0 }}\r\n        transition={{ duration: 0.8 }}\r\n        className=\"text-center mb-8\"\r\n      >\r\n        <h1 className=\"text-6xl font-bold text-primary-orange tiger-stripes bg-clip-text text-transparent mb-4\">\r\n          ТИГР\r\n        </h1>\r\n        <h2 className=\"text-4xl font-bold text-accent-blue mb-2\">\r\n          РОЗЕТКА\r\n        </h2>\r\n        <p className=\"text-lg text-gray-300\">\r\n          Telegram Mini App Game\r\n        </p>\r\n      </motion.div>\r\n\r\n      {/* Level Display */}\r\n      <motion.div\r\n        initial={{ opacity: 0, y: 20 }}\r\n        animate={{ opacity: 1, y: 0 }}\r\n        transition={{ duration: 0.6, delay: 0.2 }}\r\n        className=\"mb-6\"\r\n      >\r\n        <LevelDisplay />\r\n      </motion.div>\r\n\r\n      {/* Статус синхронизации */}\r\n      {isAuthenticated && isLoadingStats && (\r\n        <motion.div\r\n          initial={{ opacity: 0 }}\r\n          animate={{ opacity: 1 }}\r\n          className=\"mb-4 text-center text-blue-400 text-sm\"\r\n        >\r\n          <span className=\"inline-block animate-spin mr-2\">⏳</span>\r\n          Синхронизация с сервером...\r\n        </motion.div>\r\n      )}\r\n\r\n      {!isAuthenticated && (\r\n        <motion.div\r\n          initial={{ opacity: 0 }}\r\n          animate={{ opacity: 1 }}\r\n          className=\"mb-4 text-center text-yellow-400 text-sm\"\r\n        >\r\n          ⚠️ Игра в автономном режиме\r\n        </motion.div>\r\n      )}\r\n\r\n      {/* Telegram User Info */}\r\n      <motion.div\r\n        initial={{ opacity: 0, y: 20 }}\r\n        animate={{ opacity: 1, y: 0 }}\r\n        transition={{ duration: 0.6, delay: 0.25 }}\r\n        className=\"mb-4 w-full max-w-md\"\r\n      >\r\n        <TelegramUserInfo />\r\n      </motion.div>\r\n\r\n      {/* Player Stats */}\r\n      <motion.div\r\n        initial={{ opacity: 0, scale: 0.9 }}\r\n        animate={{ opacity: 1, scale: 1 }}\r\n        transition={{ duration: 0.5, delay: 0.3 }}\r\n        className=\"glass-effect p-6 mb-8 text-center\"\r\n      >\r\n        <div className=\"text-sm text-gray-300 mb-2\">Добро пожаловать, {player.name}!</div>\r\n        <div className=\"flex justify-center space-x-6\">\r\n          <div>\r\n            <div className=\"text-xs text-gray-400\">ВОЛЬТЫ</div>\r\n            <div className=\"text-xl font-bold text-primary-orange\">{player.volts}⚡</div>\r\n          </div>\r\n          <div>\r\n            <div className=\"text-xs text-gray-400\">УРОВЕНЬ</div>\r\n            <div className=\"text-xl font-bold text-accent-blue\">{player.level}</div>\r\n          </div>\r\n          <div>\r\n            <div className=\"text-xs text-gray-400\">ВСЕГО НАЖАТИЙ</div>\r\n            <div className=\"text-xl font-bold text-accent-lime\">{player.totalClicks}</div>\r\n          </div>\r\n        </div>\r\n      </motion.div>\r\n\r\n      {/* Game Mode Selection */}\r\n      <motion.div\r\n        initial={{ opacity: 0, y: 50 }}\r\n        animate={{ opacity: 1, y: 0 }}\r\n        transition={{ duration: 0.6, delay: 0.5 }}\r\n        className=\"w-full max-w-md space-y-4\"\r\n      >\r\n        <h3 className=\"text-2xl font-bold text-center text-white mb-6\">\r\n          Выберите сложность\r\n        </h3>\r\n\r\n        {/* Easy Mode */}\r\n        <motion.button\r\n          onClick={() => handleStartGame('easy')}\r\n          className=\"w-full glass-effect p-4 rounded-xl hover:bg-green-500/20 transition-colors\"\r\n          whileHover={{ scale: 1.02, x: 10 }}\r\n          whileTap={{ scale: 0.98 }}\r\n        >\r\n          <div className=\"flex justify-between items-center\">\r\n            <div className=\"text-left\">\r\n              <div className=\"text-lg font-bold text-green-400\">ЛЁГКИЙ</div>\r\n              <div className=\"text-sm text-gray-300\">15% шанс разряда • 2 сек предупреждение</div>\r\n            </div>\r\n            <div className=\"text-2xl\">🟢</div>\r\n          </div>\r\n        </motion.button>\r\n\r\n        {/* Medium Mode */}\r\n        <motion.button\r\n          onClick={() => handleStartGame('medium')}\r\n          className=\"w-full glass-effect p-4 rounded-xl hover:bg-yellow-500/20 transition-colors\"\r\n          whileHover={{ scale: 1.02, x: 10 }}\r\n          whileTap={{ scale: 0.98 }}\r\n        >\r\n          <div className=\"flex justify-between items-center\">\r\n            <div className=\"text-left\">\r\n              <div className=\"text-lg font-bold text-yellow-400\">СРЕДНИЙ</div>\r\n              <div className=\"text-sm text-gray-300\">25% шанс разряда • 1.5 сек предупреждение</div>\r\n            </div>\r\n            <div className=\"text-2xl\">🟡</div>\r\n          </div>\r\n        </motion.button>\r\n\r\n        {/* Hard Mode */}\r\n        <motion.button\r\n          onClick={() => handleStartGame('hard')}\r\n          className=\"w-full glass-effect p-4 rounded-xl hover:bg-orange-500/20 transition-colors\"\r\n          whileHover={{ scale: 1.02, x: 10 }}\r\n          whileTap={{ scale: 0.98 }}\r\n        >\r\n          <div className=\"flex justify-between items-center\">\r\n            <div className=\"text-left\">\r\n              <div className=\"text-lg font-bold text-orange-400\">СЛОЖНЫЙ</div>\r\n              <div className=\"text-sm text-gray-300\">35% шанс разряда • 1 сек предупреждение</div>\r\n            </div>\r\n            <div className=\"text-2xl\">🟠</div>\r\n          </div>\r\n        </motion.button>\r\n\r\n        {/* Extreme Mode */}\r\n        <motion.button\r\n          onClick={() => handleStartGame('extreme')}\r\n          className=\"w-full glass-effect p-4 rounded-xl hover:bg-red-500/20 transition-colors\"\r\n          whileHover={{ scale: 1.02, x: 10 }}\r\n          whileTap={{ scale: 0.98 }}\r\n        >\r\n          <div className=\"flex justify-between items-center\">\r\n            <div className=\"text-left\">\r\n              <div className=\"text-lg font-bold text-red-400\">ЭКСТРИМ</div>\r\n              <div className=\"text-sm text-gray-300\">50% шанс разряда • 0.5 сек предупреждение</div>\r\n            </div>\r\n            <div className=\"text-2xl\">🔴</div>\r\n          </div>\r\n        </motion.button>\r\n\r\n        {/* Score Breakdown Button */}\r\n        <motion.button\r\n          onClick={() => {\r\n            hapticManager.light();\r\n            setShowScoreBreakdown(true);\r\n          }}\r\n          className=\"w-full glass-effect p-3 rounded-xl hover:bg-blue-500/20 transition-colors border border-blue-400/30\"\r\n          whileHover={{ scale: 1.02 }}\r\n          whileTap={{ scale: 0.98 }}\r\n        >\r\n          <div className=\"flex justify-center items-center space-x-2\">\r\n            <span className=\"text-lg\">📊</span>\r\n            <span className=\"text-lg font-semibold text-blue-400\">Очки и уровни</span>\r\n          </div>\r\n        </motion.button>\r\n\r\n        {/* Haptic Settings Button */}\r\n        <motion.button\r\n          onClick={() => {\r\n            hapticManager.light();\r\n            setShowHapticSettings(true);\r\n          }}\r\n          className=\"w-full glass-effect p-3 rounded-xl hover:bg-purple-500/20 transition-colors border border-purple-400/30\"\r\n          whileHover={{ scale: 1.02 }}\r\n          whileTap={{ scale: 0.98 }}\r\n        >\r\n          <div className=\"flex justify-center items-center space-x-2\">\r\n            <span className=\"text-lg\">📳</span>\r\n            <span className=\"text-lg font-semibold text-purple-400\">Вибрация</span>\r\n          </div>\r\n        </motion.button>\r\n      </motion.div>\r\n\r\n      {/* Score Breakdown Modal */}\r\n      {showScoreBreakdown && (\r\n        <ScoreBreakdown onClose={() => setShowScoreBreakdown(false)} />\r\n      )}\r\n\r\n      {/* Haptic Settings Modal */}\r\n      {showHapticSettings && (\r\n        <HapticSettings \r\n          isVisible={showHapticSettings}\r\n          onClose={() => setShowHapticSettings(false)} \r\n        />\r\n      )}\r\n\r\n      {/* Footer */}\r\n      <motion.div\r\n        initial={{ opacity: 0 }}\r\n        animate={{ opacity: 1 }}\r\n        transition={{ duration: 0.5, delay: 1 }}\r\n        className=\"mt-8 text-center text-gray-400 text-sm space-y-2\"\r\n      >\r\n        <p>⚡ Играй осторожно! ⚡</p>\r\n        <p className=\"mt-2\">v1.0.0 | Single Mode</p>\r\n        \r\n        {/* Development button for testing levels */}\r\n        <button \r\n          onClick={() => {\r\n            hapticManager.light();\r\n            handleQuickLevelUp();\r\n          }}\r\n          className=\"mt-2 px-3 py-1 text-xs bg-purple-600/30 hover:bg-purple-600/50 text-purple-300 rounded transition-colors\"\r\n        >\r\n          🔧 +100 опыта (тест)\r\n        </button>\r\n      </motion.div>\r\n    </div>\r\n  );\r\n};\r\n","// Sound effects manager for TigerRozetka\r\n// Using Web Audio API for better control\r\n\r\nexport class SoundManager {\r\n  private audioContext: AudioContext | null = null;\r\n  private sounds: Map<string, AudioBuffer> = new Map();\r\n  private volume: number = 0.7;\r\n  private enabled: boolean = true;\r\n\r\n  constructor() {\r\n    this.init();\r\n  }\r\n\r\n  private async init() {\r\n    try {\r\n      this.audioContext = new (window.AudioContext || (window as any).webkitAudioContext)();\r\n    } catch (error) {\r\n      console.warn('Web Audio API not supported:', error);\r\n    }\r\n  }\r\n\r\n  async loadSound(name: string, url: string): Promise<void> {\r\n    if (!this.audioContext) return;\r\n\r\n    try {\r\n      const response = await fetch(url);\r\n      const arrayBuffer = await response.arrayBuffer();\r\n      const audioBuffer = await this.audioContext.decodeAudioData(arrayBuffer);\r\n      this.sounds.set(name, audioBuffer);\r\n    } catch (error) {\r\n      console.warn(`Failed to load sound ${name}:`, error);\r\n    }\r\n  }\r\n\r\n  playSound(name: string, volume: number = 1): void {\r\n    if (!this.enabled || !this.audioContext) return;\r\n\r\n    const buffer = this.sounds.get(name);\r\n    if (!buffer) return;\r\n\r\n    const source = this.audioContext.createBufferSource();\r\n    const gainNode = this.audioContext.createGain();\r\n\r\n    source.buffer = buffer;\r\n    gainNode.gain.value = this.volume * volume;\r\n\r\n    source.connect(gainNode);\r\n    gainNode.connect(this.audioContext.destination);\r\n\r\n    source.start();\r\n  }\r\n\r\n  // Generate electric spark sound programmatically\r\n  generateSparkSound(intensity: 'low' | 'medium' | 'high' | 'extreme'): void {\r\n    if (!this.enabled || !this.audioContext) return;\r\n\r\n    const duration = {\r\n      low: 0.1,\r\n      medium: 0.2,\r\n      high: 0.3,\r\n      extreme: 0.5\r\n    }[intensity];\r\n\r\n    const frequency = {\r\n      low: 2000,\r\n      medium: 3000,\r\n      high: 4000,\r\n      extreme: 5000\r\n    }[intensity];\r\n\r\n    // Create white noise for spark effect\r\n    const bufferSize = this.audioContext.sampleRate * duration;\r\n    const buffer = this.audioContext.createBuffer(1, bufferSize, this.audioContext.sampleRate);\r\n    const output = buffer.getChannelData(0);\r\n\r\n    // Generate noise with frequency modulation\r\n    for (let i = 0; i < bufferSize; i++) {\r\n      const t = i / this.audioContext.sampleRate;\r\n      const envelope = Math.exp(-t * 10); // Exponential decay\r\n      const noise = (Math.random() * 2 - 1) * envelope;\r\n      const oscillation = Math.sin(2 * Math.PI * frequency * t * (1 + Math.random() * 0.5));\r\n      output[i] = noise * oscillation * 0.3;\r\n    }\r\n\r\n    const source = this.audioContext.createBufferSource();\r\n    const gainNode = this.audioContext.createGain();\r\n    \r\n    source.buffer = buffer;\r\n    gainNode.gain.value = this.volume * (intensity === 'extreme' ? 0.8 : 0.5);\r\n\r\n    source.connect(gainNode);\r\n    gainNode.connect(this.audioContext.destination);\r\n\r\n    source.start();\r\n  }\r\n\r\n  // Generate shock sound\r\n  generateShockSound(): void {\r\n    if (!this.enabled || !this.audioContext) return;\r\n\r\n    const duration = 0.8;\r\n    const bufferSize = this.audioContext.sampleRate * duration;\r\n    const buffer = this.audioContext.createBuffer(1, bufferSize, this.audioContext.sampleRate);\r\n    const output = buffer.getChannelData(0);\r\n\r\n    for (let i = 0; i < bufferSize; i++) {\r\n      const t = i / this.audioContext.sampleRate;\r\n      const envelope = Math.exp(-t * 3);\r\n      const lowFreq = Math.sin(2 * Math.PI * 100 * t);\r\n      const highFreq = Math.sin(2 * Math.PI * 800 * t) * 0.5;\r\n      const noise = (Math.random() * 2 - 1) * 0.3;\r\n      output[i] = (lowFreq + highFreq + noise) * envelope * 0.6;\r\n    }\r\n\r\n    const source = this.audioContext.createBufferSource();\r\n    const gainNode = this.audioContext.createGain();\r\n    \r\n    source.buffer = buffer;\r\n    gainNode.gain.value = this.volume;\r\n\r\n    source.connect(gainNode);\r\n    gainNode.connect(this.audioContext.destination);\r\n\r\n    source.start();\r\n  }\r\n\r\n  // Generate warning sound\r\n  generateWarningSound(): void {\r\n    if (!this.enabled || !this.audioContext) return;\r\n\r\n    const duration = 0.3;\r\n    const bufferSize = this.audioContext.sampleRate * duration;\r\n    const buffer = this.audioContext.createBuffer(1, bufferSize, this.audioContext.sampleRate);\r\n    const output = buffer.getChannelData(0);\r\n\r\n    for (let i = 0; i < bufferSize; i++) {\r\n      const t = i / this.audioContext.sampleRate;\r\n      const frequency = 1000 + Math.sin(t * 20) * 200; // Frequency modulation\r\n      const envelope = Math.sin(Math.PI * t / duration); // Bell-shaped envelope\r\n      output[i] = Math.sin(2 * Math.PI * frequency * t) * envelope * 0.4;\r\n    }\r\n\r\n    const source = this.audioContext.createBufferSource();\r\n    const gainNode = this.audioContext.createGain();\r\n    \r\n    source.buffer = buffer;\r\n    gainNode.gain.value = this.volume * 0.6;\r\n\r\n    source.connect(gainNode);\r\n    gainNode.connect(this.audioContext.destination);\r\n\r\n    source.start();\r\n  }\r\n\r\n  setVolume(volume: number): void {\r\n    this.volume = Math.max(0, Math.min(1, volume));\r\n  }\r\n\r\n  setEnabled(enabled: boolean): void {\r\n    this.enabled = enabled;\r\n  }\r\n\r\n  getVolume(): number {\r\n    return this.volume;\r\n  }\r\n\r\n  isEnabled(): boolean {\r\n    return this.enabled;\r\n  }\r\n}\r\n\r\n// Global sound manager instance\r\nexport const soundManager = new SoundManager();\r\n","import React from 'react';\r\nimport { motion, AnimatePresence } from 'framer-motion';\r\n\r\ninterface ScorePopupProps {\r\n  score: number;\r\n  reason: string;\r\n  isVisible: boolean;\r\n  position: { x: number; y: number };\r\n  type: 'success' | 'shock' | 'bonus';\r\n  experience?: number;\r\n}\r\n\r\nexport const ScorePopup: React.FC<ScorePopupProps> = ({ \r\n  score, \r\n  reason, \r\n  isVisible, \r\n  position,\r\n  type,\r\n  experience = 0\r\n}) => {\r\n  const getColorClass = () => {\r\n    switch (type) {\r\n      case 'success':\r\n        return score >= 30 ? 'text-yellow-300' : \r\n               score >= 20 ? 'text-green-300' : 'text-blue-300';\r\n      case 'shock':\r\n        return 'text-red-300';\r\n      case 'bonus':\r\n        return 'text-purple-300';\r\n      default:\r\n        return 'text-white';\r\n    }\r\n  };\r\n\r\n  const getIcon = () => {\r\n    switch (type) {\r\n      case 'success':\r\n        return score >= 30 ? '🔥' : score >= 20 ? '⚡' : '✨';\r\n      case 'shock':\r\n        return '💥';\r\n      case 'bonus':\r\n        return '🎉';\r\n      default:\r\n        return '⚡';\r\n    }\r\n  };\r\n\r\n  return (\r\n    <AnimatePresence>\r\n      {isVisible && (\r\n        <motion.div\r\n          className={`absolute pointer-events-none z-50 ${getColorClass()}`}\r\n          initial={{\r\n            opacity: 0,\r\n            scale: 0.5,\r\n            x: position.x,\r\n            y: position.y\r\n          }}\r\n          animate={{\r\n            opacity: [0, 1, 1, 0],\r\n            scale: [0.5, 1.2, 1, 0.8],\r\n            y: position.y - 80,\r\n            x: position.x + (Math.random() - 0.5) * 40\r\n          }}\r\n          transition={{\r\n            duration: 2,\r\n            ease: 'easeOut'\r\n          }}\r\n        >\r\n          <div className=\"bg-black/80 backdrop-blur-sm rounded-lg px-3 py-2 border border-current\">\r\n            <div className=\"flex items-center space-x-2\">\r\n              <span className=\"text-lg\">{getIcon()}</span>\r\n              <div>\r\n                <div className=\"font-bold text-lg\">+{score}⚡</div>\r\n                {experience > 0 && (\r\n                  <div className=\"text-xs text-blue-300\">+{experience} опыта</div>\r\n                )}\r\n                <div className=\"text-xs opacity-80\">{reason}</div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </motion.div>\r\n      )}\r\n    </AnimatePresence>\r\n  );\r\n};\r\n","import React, { useEffect, useState } from 'react';\r\nimport { motion, AnimatePresence } from 'framer-motion';\r\n\r\ninterface ElectricSparksProps {\r\n  isActive: boolean;\r\n  intensity?: 'low' | 'medium' | 'high' | 'extreme';\r\n  onComplete?: () => void;\r\n}\r\n\r\ninterface Spark {\r\n  id: number;\r\n  x: number;\r\n  y: number;\r\n  angle: number;\r\n  length: number;\r\n  delay: number;\r\n  color: string;\r\n}\r\n\r\nexport const ElectricSparks: React.FC<ElectricSparksProps> = ({\r\n  isActive,\r\n  intensity = 'medium',\r\n  onComplete\r\n}) => {\r\n  const [sparks, setSparks] = useState<Spark[]>([]);\r\n\r\n  useEffect(() => {\r\n    if (isActive) {\r\n      generateSparks();\r\n    } else {\r\n      setSparks([]);\r\n    }\r\n  }, [isActive, intensity]);\r\n\r\n  const generateSparks = () => {\r\n    const sparkCount = {\r\n      low: 6,\r\n      medium: 12,\r\n      high: 18,\r\n      extreme: 25\r\n    }[intensity];\r\n\r\n    const colors = [\r\n      '#3B82F6', // blue\r\n      '#EF4444', // red\r\n      '#FFFFFF', // white\r\n      '#FBBF24', // yellow\r\n      '#8B5CF6', // purple\r\n    ];\r\n\r\n    const newSparks: Spark[] = [];\r\n\r\n    for (let i = 0; i < sparkCount; i++) {\r\n      newSparks.push({\r\n        id: i,\r\n        x: Math.random() * 100,\r\n        y: Math.random() * 100,\r\n        angle: Math.random() * 360,\r\n        length: 20 + Math.random() * 60,\r\n        delay: Math.random() * 0.3,\r\n        color: colors[Math.floor(Math.random() * colors.length)]\r\n      });\r\n    }\r\n\r\n    setSparks(newSparks);\r\n\r\n    // Auto cleanup after animation\r\n    setTimeout(() => {\r\n      setSparks([]);\r\n      onComplete?.();\r\n    }, 1000);\r\n  };\r\n\r\n  return (\r\n    <div className=\"absolute inset-0 pointer-events-none overflow-hidden\">\r\n      <AnimatePresence>\r\n        {sparks.map((spark) => (\r\n          <motion.div\r\n            key={spark.id}\r\n            className=\"absolute\"\r\n            style={{\r\n              left: `${spark.x}%`,\r\n              top: `${spark.y}%`,\r\n              transform: `rotate(${spark.angle}deg)`,\r\n            }}\r\n            initial={{ opacity: 0, scale: 0 }}\r\n            animate={{ \r\n              opacity: [0, 1, 0.7, 0],\r\n              scale: [0, 1, 0.8, 0],\r\n              x: [0, Math.cos(spark.angle * Math.PI / 180) * spark.length],\r\n              y: [0, Math.sin(spark.angle * Math.PI / 180) * spark.length]\r\n            }}\r\n            transition={{\r\n              duration: 0.6,\r\n              delay: spark.delay,\r\n              ease: \"easeOut\"\r\n            }}\r\n          >\r\n            {/* Main spark line */}\r\n            <div\r\n              className=\"w-1 bg-gradient-to-r opacity-90 rounded-full shadow-lg\"\r\n              style={{\r\n                height: `${spark.length}px`,\r\n                backgroundColor: spark.color,\r\n                boxShadow: `0 0 8px ${spark.color}, 0 0 16px ${spark.color}40`\r\n              }}\r\n            />\r\n            \r\n            {/* Spark glow effect */}\r\n            <div\r\n              className=\"absolute top-0 left-0 w-1 blur-sm opacity-60 rounded-full\"\r\n              style={{\r\n                height: `${spark.length}px`,\r\n                backgroundColor: spark.color,\r\n              }}\r\n            />\r\n          </motion.div>\r\n        ))}\r\n      </AnimatePresence>\r\n\r\n      {/* Electric discharge effect - jagged lines */}\r\n      <AnimatePresence>\r\n        {isActive && (\r\n          <motion.svg\r\n            className=\"absolute inset-0 w-full h-full\"\r\n            initial={{ opacity: 0 }}\r\n            animate={{ opacity: [0, 1, 0.8, 0.2, 0.9, 0] }}\r\n            transition={{ duration: 0.8, times: [0, 0.1, 0.3, 0.5, 0.7, 1] }}\r\n          >\r\n            {/* Jagged lightning lines */}\r\n            {Array.from({ length: 3 }, (_, i) => {\r\n              const startX = 20 + Math.random() * 60;\r\n              const startY = 20 + Math.random() * 60;\r\n              const segments = 5 + Math.floor(Math.random() * 5);\r\n              \r\n              let path = `M ${startX} ${startY}`;\r\n              let currentX = startX;\r\n              let currentY = startY;\r\n              \r\n              for (let j = 0; j < segments; j++) {\r\n                currentX += (Math.random() - 0.5) * 40;\r\n                currentY += (Math.random() - 0.5) * 40;\r\n                path += ` L ${currentX} ${currentY}`;\r\n              }\r\n\r\n              return (\r\n                <motion.path\r\n                  key={i}\r\n                  d={path}\r\n                  stroke=\"#FFFFFF\"\r\n                  strokeWidth={Math.random() * 2 + 1}\r\n                  fill=\"none\"\r\n                  opacity={0.8}\r\n                  filter=\"drop-shadow(0 0 4px #3B82F6)\"\r\n                  initial={{ pathLength: 0 }}\r\n                  animate={{ pathLength: 1 }}\r\n                  transition={{ \r\n                    duration: 0.3,\r\n                    delay: i * 0.1,\r\n                    ease: \"easeOut\"\r\n                  }}\r\n                />\r\n              );\r\n            })}\r\n          </motion.svg>\r\n        )}\r\n      </AnimatePresence>\r\n\r\n      {/* Screen flash effect */}\r\n      <AnimatePresence>\r\n        {isActive && (\r\n          <motion.div\r\n            className=\"absolute inset-0 bg-white mix-blend-screen\"\r\n            initial={{ opacity: 0 }}\r\n            animate={{ opacity: [0, 0.4, 0.1, 0.3, 0] }}\r\n            transition={{ duration: 0.5, times: [0, 0.1, 0.3, 0.6, 1] }}\r\n          />\r\n        )}\r\n      </AnimatePresence>\r\n    </div>\r\n  );\r\n};\r\n","import { useEffect, useState } from 'react';\r\nimport { useGameStore } from '../store/gameStore';\r\nimport { getOutletImageByLevel } from '../utils/levelSystem';\r\n\r\nexport const useOutletImageAnimation = () => {\r\n  const { player } = useGameStore();\r\n  const [currentImage, setCurrentImage] = useState(getOutletImageByLevel(player.level));\r\n  const [isAnimating, setIsAnimating] = useState(false);\r\n\r\n  useEffect(() => {\r\n    const newImage = getOutletImageByLevel(player.level);\r\n    console.log(`Player level: ${player.level}, Image path: ${newImage}`);\r\n    \r\n    if (newImage !== currentImage) {\r\n      // Start animation\r\n      setIsAnimating(true);\r\n      \r\n      // Change image after a brief delay\r\n      setTimeout(() => {\r\n        setCurrentImage(newImage);\r\n        setIsAnimating(false);\r\n      }, 300);\r\n    }\r\n  }, [player.level, currentImage]);\r\n\r\n  return {\r\n    currentImage,\r\n    isAnimating\r\n  };\r\n};\r\n","import React, { useState, useCallback } from 'react';\r\nimport { motion, AnimatePresence } from 'framer-motion';\r\nimport { useGameStore } from '../store/gameStore';\r\nimport { SparkEffect } from '../types/game';\r\nimport { soundManager } from '../utils/soundManager';\r\nimport { hapticManager } from '../utils/hapticManager';\r\nimport { ScorePopup } from './ScorePopup';\r\nimport { ElectricSparks } from './ElectricSparks';\r\nimport { useOutletImageAnimation } from '../hooks/useOutletImageAnimation';\r\n\r\ninterface TigerOutletProps {\r\n  className?: string;\r\n  onShock?: () => void;\r\n}\r\n\r\nexport const TigerOutlet: React.FC<TigerOutletProps> = ({ className = '', onShock }) => {\r\n  const { \r\n    clickOutlet, \r\n    singleMode, \r\n    gameState,\r\n    updateScore,\r\n    triggerShock\r\n  } = useGameStore();\r\n  \r\n  const { currentImage, isAnimating } = useOutletImageAnimation();\r\n  \r\n  const [sparks, setSparks] = useState<SparkEffect[]>([]);\r\n  const [isPressed, setIsPressed] = useState(false);\r\n  const [glowIntensity, setGlowIntensity] = useState(1);\r\n  const [isElectricShockActive, setIsElectricShockActive] = useState(false);\r\n  const [scorePopup, setScorePopup] = useState<{\r\n    visible: boolean;\r\n    score: number;\r\n    reason: string;\r\n    type: 'success' | 'shock' | 'bonus';\r\n  }>({ visible: false, score: 0, reason: '', type: 'success' });\r\n\r\n  // Show score popup\r\n  const showScorePopup = useCallback((score: number, reason: string, type: 'success' | 'shock' | 'bonus') => {\r\n    setScorePopup({ visible: true, score, reason, type });\r\n    setTimeout(() => {\r\n      setScorePopup(prev => ({ ...prev, visible: false }));\r\n    }, 2000);\r\n  }, []);\r\n\r\n  // Create spark effect on click\r\n  const createSparks = useCallback((intensity: 'low' | 'medium' | 'high' | 'extreme') => {\r\n    const sparkCount = {\r\n      low: 3,\r\n      medium: 6,\r\n      high: 12,\r\n      extreme: 20\r\n    }[intensity];\r\n\r\n    const newSparks: SparkEffect[] = Array.from({ length: sparkCount }, (_, i) => ({\r\n      id: `spark-${Date.now()}-${i}`,\r\n      x: Math.random() * 200 - 100, // Random position around center\r\n      y: Math.random() * 200 - 100,\r\n      intensity,\r\n      duration: 300 + Math.random() * 200,\r\n      color: intensity === 'extreme' ? '#E8FF00' : \r\n             intensity === 'high' ? '#00D4FF' : \r\n             intensity === 'medium' ? '#8A2BE2' : '#FF6B35'\r\n    }));\r\n\r\n    setSparks(prev => [...prev, ...newSparks]);\r\n\r\n    // Remove sparks after animation\r\n    newSparks.forEach(spark => {\r\n      setTimeout(() => {\r\n        setSparks(prev => prev.filter(s => s.id !== spark.id));\r\n      }, spark.duration);\r\n    });\r\n  }, []);\r\n\r\n  // Handle outlet click\r\n  const handleClick = useCallback(() => {\r\n    if (!gameState.isPlaying) return;\r\n\r\n    // Предупреждающие вибрации в зависимости от уровня опасности\r\n    if (singleMode.warningSignsActive) {\r\n      if (singleMode.dangerLevel > 80) {\r\n        hapticManager.extremeDangerWarning();\r\n      } else if (singleMode.dangerLevel > 60) {\r\n        hapticManager.dangerWarning();\r\n      }\r\n    }\r\n\r\n    // Основная вибрация при нажатии\r\n    hapticManager.outletPress();\r\n\r\n    setIsPressed(true);\r\n    clickOutlet();\r\n\r\n    // Determine if shock occurs (simplified logic for now)\r\n    const shockChance = {\r\n      easy: 0.15,\r\n      medium: 0.25,\r\n      hard: 0.35,\r\n      extreme: 0.50\r\n    }[singleMode.difficulty];\r\n\r\n    const isShocked = Math.random() < shockChance;\r\n    \r\n    if (isShocked) {\r\n      // Активируем эффект электрического разряда\r\n      setIsElectricShockActive(true);\r\n      setGlowIntensity(3);\r\n      \r\n      // Trigger screen shake effect\r\n      onShock?.();\r\n      \r\n      // Запускаем вибрацию ТОЛЬКО в момент удара\r\n      hapticManager.electricShock();\r\n      \r\n      // Play shock sound\r\n      soundManager.generateShockSound();\r\n      \r\n      // Trigger shock with penalties (handled in store)\r\n      triggerShock();\r\n      \r\n      // Завершаем эффект разряда через 1 секунду\r\n      setTimeout(() => {\r\n        setIsElectricShockActive(false);\r\n      }, 1000);\r\n      \r\n      // Check for penalty message and show it\r\n      setTimeout(() => {\r\n        const penaltyMessage = (window as any).lastPenaltyMessage;\r\n        if (penaltyMessage) {\r\n          showScorePopup(0, penaltyMessage, 'shock');\r\n          (window as any).lastPenaltyMessage = null;\r\n        } else {\r\n          // Show consolation prize for lower levels\r\n          const scoreData = {\r\n            basePoints: 8,\r\n            riskMultiplier: 1,\r\n            streakBonus: 0,\r\n            timeBonus: 0,\r\n            totalPoints: 8 + Math.floor(Math.random() * 17), // 8-25 points\r\n            reason: 'Поражение током'\r\n          };\r\n          \r\n          updateScore(scoreData);\r\n          showScorePopup(scoreData.totalPoints, scoreData.reason, 'shock');\r\n        }\r\n      }, 100);\r\n    } else {\r\n      // Success effect with haptic feedback\r\n      const intensity = singleMode.currentRisk === 'extreme' ? 'extreme' :\r\n                       singleMode.currentRisk === 'high' ? 'high' :\r\n                       singleMode.currentRisk === 'medium' ? 'medium' : 'low';\r\n      \r\n      createSparks(intensity);\r\n      setGlowIntensity(2);\r\n\r\n      // Вибрация успешного выживания\r\n      hapticManager.survivalSuccess();\r\n\r\n      // Play spark sound based on intensity\r\n      soundManager.generateSparkSound(intensity);\r\n\r\n      // Calculate success score\r\n      const basePoints = 10;\r\n      const riskMultiplier = {\r\n        low: 1.0,\r\n        medium: 1.5,\r\n        high: 2.0,\r\n        extreme: 3.0\r\n      }[singleMode.currentRisk];\r\n\r\n      const streakBonus = singleMode.streakCount >= 25 ? 3.0 :\r\n                         singleMode.streakCount >= 10 ? 2.0 :\r\n                         singleMode.streakCount >= 5 ? 1.5 : 1.0;\r\n\r\n      const totalPoints = Math.floor(basePoints * riskMultiplier * streakBonus);\r\n\r\n      const scoreData = {\r\n        basePoints,\r\n        riskMultiplier,\r\n        streakBonus,\r\n        timeBonus: 0,\r\n        totalPoints,\r\n        reason: `Выживание (${singleMode.currentRisk} риск)`\r\n      };\r\n\r\n      updateScore(scoreData);\r\n      showScorePopup(scoreData.totalPoints, scoreData.reason, 'success');\r\n      \r\n      // Дополнительная вибрация для серий достижений\r\n      if (singleMode.streakCount > 0 && singleMode.streakCount % 5 === 0) {\r\n        hapticManager.streakAchievement(singleMode.streakCount);\r\n      }\r\n    }\r\n\r\n    // Reset visual effects\r\n    setTimeout(() => {\r\n      setIsPressed(false);\r\n      setGlowIntensity(1);\r\n    }, 200);\r\n  }, [gameState.isPlaying, singleMode, clickOutlet, createSparks, updateScore]);\r\n\r\n  return (\r\n    <div className={`relative ${className}`}>\r\n      {/* Main Outlet Button */}\r\n      <motion.button\r\n        onClick={handleClick}\r\n        disabled={!gameState.isPlaying}\r\n        className=\"relative w-64 h-64 rounded-2xl overflow-hidden disabled:opacity-50 bg-gray-800\"\r\n        whileTap={{ scale: 0.95 }}\r\n        whileHover={{ scale: 1.05 }}\r\n        animate={{\r\n          scale: isPressed ? 0.9 : 1,\r\n          filter: `brightness(${glowIntensity}) saturate(${glowIntensity})`,\r\n          rotateY: isAnimating ? [0, 180, 360] : 0\r\n        }}\r\n        transition={{\r\n          rotateY: { duration: 0.6, ease: \"easeInOut\" }\r\n        }}\r\n        style={{\r\n          boxShadow: `0 0 ${20 * glowIntensity}px rgba(255, 107, 53, ${0.5 * glowIntensity})`\r\n        }}\r\n      >\r\n        {/* Main Outlet Image */}\r\n        <img \r\n          src={currentImage} \r\n          alt=\"Tiger Outlet\" \r\n          className=\"absolute inset-0 w-full h-full object-cover rounded-2xl\"\r\n          onError={(e) => {\r\n            console.error('Image failed to load:', currentImage);\r\n            console.error('Error event:', e);\r\n            console.error('Current window location:', window.location.href);\r\n            console.error('Trying full path:', `${window.location.origin}${currentImage}`);\r\n            // Fallback to a solid background\r\n            e.currentTarget.style.display = 'none';\r\n          }}\r\n          onLoad={() => {\r\n            console.log('Image loaded successfully:', currentImage);\r\n          }}\r\n        />\r\n        \r\n        {/* Tiger Stripes Overlay */}\r\n        <div className=\"absolute inset-0 tiger-stripes opacity-20 mix-blend-overlay\" />\r\n        \r\n        {/* Electric Glow Effect */}\r\n        <motion.div\r\n          className=\"absolute inset-0 rounded-2xl\"\r\n          animate={{\r\n            boxShadow: singleMode.warningSignsActive \r\n              ? `0 0 ${30 * glowIntensity}px #FF0000, inset 0 0 ${30 * glowIntensity}px #FF0000`\r\n              : `0 0 ${15 * glowIntensity}px #FF6B35, inset 0 0 ${15 * glowIntensity}px #FF6B35`\r\n          }}\r\n          transition={{ duration: singleMode.warningSignsActive ? 0.1 : 0.2 }}\r\n        />\r\n\r\n        {/* Danger Level Indicator */}\r\n        {singleMode.dangerLevel > 50 && (\r\n          <motion.div\r\n            className=\"absolute -top-12 left-1/2 transform -translate-x-1/2\"\r\n            initial={{ opacity: 0, scale: 0 }}\r\n            animate={{ \r\n              opacity: [0.7, 1, 0.7, 1],\r\n              scale: [0.8, 1.2, 0.8, 1.2]\r\n            }}\r\n            transition={{ \r\n              duration: 1,\r\n              repeat: Infinity,\r\n              ease: \"easeInOut\"\r\n            }}\r\n          >\r\n            <div className={`px-2 py-1 rounded-full text-xs font-bold ${\r\n              singleMode.dangerLevel > 80 ? 'bg-red-500 text-white' :\r\n              singleMode.dangerLevel > 70 ? 'bg-orange-500 text-white' :\r\n              'bg-yellow-500 text-black'\r\n            }`}>\r\n              {singleMode.dangerLevel > 80 ? '🔴 КРИТИЧНО' :\r\n               singleMode.dangerLevel > 70 ? '🟠 ОПАСНО' :\r\n               '🟡 РИСК'}\r\n            </div>\r\n          </motion.div>\r\n        )}\r\n\r\n        {/* Electric Shock Effects */}\r\n        <ElectricSparks \r\n          isActive={isElectricShockActive}\r\n          intensity=\"extreme\"\r\n          onComplete={() => setIsElectricShockActive(false)}\r\n        />\r\n      </motion.button>\r\n\r\n      {/* Spark Effects */}\r\n      <AnimatePresence>\r\n        {sparks.map((spark) => (\r\n          <motion.div\r\n            key={spark.id}\r\n            className=\"absolute w-2 h-2 rounded-full pointer-events-none\"\r\n            style={{\r\n              backgroundColor: spark.color,\r\n              boxShadow: `0 0 10px ${spark.color}`,\r\n              left: '50%',\r\n              top: '50%'\r\n            }}\r\n            initial={{\r\n              x: 0,\r\n              y: 0,\r\n              scale: 0,\r\n              opacity: 1\r\n            }}\r\n            animate={{\r\n              x: spark.x,\r\n              y: spark.y,\r\n              scale: [0, 1.5, 0.8, 0],\r\n              opacity: [1, 1, 0.5, 0],\r\n              rotate: [0, 180, 360]\r\n            }}\r\n            transition={{\r\n              duration: spark.duration / 1000,\r\n              ease: 'easeOut'\r\n            }}\r\n          />\r\n        ))}\r\n      </AnimatePresence>\r\n\r\n      {/* Risk Level Indicator */}\r\n      <div className=\"absolute -bottom-8 left-1/2 transform -translate-x-1/2\">\r\n        <div className={`px-3 py-1 rounded-full text-xs font-bold ${\r\n          singleMode.currentRisk === 'extreme' ? 'bg-red-500 text-white' :\r\n          singleMode.currentRisk === 'high' ? 'bg-orange-500 text-white' :\r\n          singleMode.currentRisk === 'medium' ? 'bg-yellow-500 text-black' :\r\n          'bg-green-500 text-white'\r\n        }`}>\r\n          {singleMode.currentRisk === 'extreme' ? 'ЭКСТРИМ' :\r\n           singleMode.currentRisk === 'high' ? 'ВЫСОКИЙ' :\r\n           singleMode.currentRisk === 'medium' ? 'СРЕДНИЙ' : 'НИЗКИЙ'} РИСК\r\n        </div>\r\n      </div>\r\n\r\n      {/* Score Popup */}\r\n      <ScorePopup\r\n        score={scorePopup.score}\r\n        reason={scorePopup.reason}\r\n        isVisible={scorePopup.visible}\r\n        position={{ x: 0, y: -32 }}\r\n        type={scorePopup.type}\r\n      />\r\n    </div>\r\n  );\r\n};\r\n","import React from 'react';\r\nimport { motion } from 'framer-motion';\r\nimport { useGameApi, useOfflineMode } from '../hooks/useGameApi';\r\n\r\ninterface ConnectionStatusProps {\r\n  className?: string;\r\n}\r\n\r\nexport const ConnectionStatus: React.FC<ConnectionStatusProps> = ({ className = '' }) => {\r\n  const { isAuthenticated } = useGameApi();\r\n  const { isOnline } = useOfflineMode();\r\n\r\n  const getStatusInfo = () => {\r\n    if (!isOnline) {\r\n      return {\r\n        text: 'Нет подключения',\r\n        color: 'text-red-400',\r\n        icon: '❌',\r\n        bgColor: 'bg-red-500/10'\r\n      };\r\n    }\r\n\r\n    if (!isAuthenticated) {\r\n      return {\r\n        text: 'Автономный режим',\r\n        color: 'text-yellow-400',\r\n        icon: '⚠️',\r\n        bgColor: 'bg-yellow-500/10'\r\n      };\r\n    }\r\n\r\n    return {\r\n      text: 'Подключено к серверу',\r\n      color: 'text-green-400',\r\n      icon: '✅',\r\n      bgColor: 'bg-green-500/10'\r\n    };\r\n  };\r\n\r\n  const status = getStatusInfo();\r\n\r\n  return (\r\n    <motion.div\r\n      initial={{ opacity: 0, scale: 0.9 }}\r\n      animate={{ opacity: 1, scale: 1 }}\r\n      className={`glass-effect p-2 rounded-lg ${status.bgColor} ${className}`}\r\n    >\r\n      <div className=\"flex items-center space-x-2\">\r\n        <span className=\"text-sm\">{status.icon}</span>\r\n        <span className={`text-xs font-medium ${status.color}`}>\r\n          {status.text}\r\n        </span>\r\n      </div>\r\n    </motion.div>\r\n  );\r\n};\r\n","import React from 'react';\r\nimport { motion } from 'framer-motion';\r\nimport { useGameStore } from '../store/gameStore';\r\nimport { ConnectionStatus } from './ConnectionStatus';\r\n\r\nexport const GameHUD: React.FC = () => {\r\n  const { player, gameState, singleMode } = useGameStore();\r\n\r\n  return (\r\n    <div className=\"fixed top-0 left-0 right-0 z-10 bg-black/20 backdrop-blur-sm border-b border-white/10\">\r\n      <div className=\"flex justify-between items-center p-4\">\r\n        {/* Score Display */}\r\n        <div className=\"flex items-center space-x-4\">\r\n          <motion.div \r\n            className=\"glass-effect px-4 py-2\"\r\n            whileHover={{ scale: 1.05 }}\r\n          >\r\n            <div className=\"text-xs text-gray-300\">СЧЁТ</div>\r\n            <div className=\"text-xl font-bold text-accent-lime\">\r\n              {gameState.score.toLocaleString()}\r\n            </div>\r\n          </motion.div>\r\n          \r\n          <motion.div \r\n            className=\"glass-effect px-4 py-2\"\r\n            whileHover={{ scale: 1.05 }}\r\n          >\r\n            <div className=\"text-xs text-gray-300\">ВОЛЬТЫ</div>\r\n            <div className=\"text-xl font-bold text-primary-orange\">\r\n              {player.volts.toLocaleString()}⚡\r\n            </div>\r\n          </motion.div>\r\n        </div>\r\n\r\n        {/* Streak Counter */}\r\n        <div className=\"text-center\">\r\n          <motion.div \r\n            className=\"glass-effect px-4 py-2\"\r\n            animate={{ \r\n              scale: singleMode.streakCount > 0 ? [1, 1.1, 1] : 1,\r\n              boxShadow: singleMode.streakCount >= 5 \r\n                ? '0 0 20px #E8FF00' \r\n                : '0 0 10px rgba(255,255,255,0.2)'\r\n            }}\r\n            transition={{ duration: 0.3 }}\r\n          >\r\n            <div className=\"text-xs text-gray-300\">СЕРИЯ</div>\r\n            <div className={`text-xl font-bold ${\r\n              singleMode.streakCount >= 25 ? 'text-red-400' :\r\n              singleMode.streakCount >= 10 ? 'text-orange-400' :\r\n              singleMode.streakCount >= 5 ? 'text-yellow-400' :\r\n              'text-white'\r\n            }`}>\r\n              {singleMode.streakCount}\r\n            </div>\r\n          </motion.div>\r\n        </div>\r\n\r\n        {/* Difficulty & Stats */}\r\n        <div className=\"flex items-center space-x-4\">\r\n          <motion.div \r\n            className=\"glass-effect px-4 py-2\"\r\n            whileHover={{ scale: 1.05 }}\r\n            animate={{\r\n              opacity: player.luckIndicatorHidden && Date.now() < player.luckHiddenUntil ? 0.3 : 1\r\n            }}\r\n            transition={{ duration: 0.3 }}\r\n          >\r\n            <div className=\"text-xs text-gray-300\">УДАЧА</div>\r\n            <div className={`text-sm font-bold ${\r\n              player.luckIndicatorHidden && Date.now() < player.luckHiddenUntil ? \r\n                'text-gray-500' :\r\n                player.luckCoefficient >= 70 ? 'text-green-400' :\r\n                player.luckCoefficient >= 50 ? 'text-yellow-400' :\r\n                player.luckCoefficient >= 30 ? 'text-orange-400' :\r\n                'text-red-400'\r\n            }`}>\r\n              {player.luckIndicatorHidden && Date.now() < player.luckHiddenUntil ? \r\n                '???' : \r\n                `${player.luckCoefficient}%`\r\n              }\r\n            </div>\r\n          </motion.div>\r\n\r\n          <motion.div \r\n            className=\"glass-effect px-4 py-2\"\r\n            whileHover={{ scale: 1.05 }}\r\n          >\r\n            <div className=\"text-xs text-gray-300\">СЛОЖНОСТЬ</div>\r\n            <div className={`text-sm font-bold ${\r\n              singleMode.difficulty === 'extreme' ? 'text-red-400' :\r\n              singleMode.difficulty === 'hard' ? 'text-orange-400' :\r\n              singleMode.difficulty === 'medium' ? 'text-yellow-400' :\r\n              'text-green-400'\r\n            }`}>\r\n              {singleMode.difficulty === 'extreme' ? 'ЭКСТРИМ' :\r\n               singleMode.difficulty === 'hard' ? 'СЛОЖНЫЙ' :\r\n               singleMode.difficulty === 'medium' ? 'СРЕДНИЙ' : 'ЛЁГКИЙ'}\r\n            </div>\r\n          </motion.div>\r\n\r\n          <motion.div \r\n            className=\"glass-effect px-4 py-2\"\r\n            whileHover={{ scale: 1.05 }}\r\n          >\r\n            <div className=\"text-xs text-gray-300\">НАЖАТИЙ</div>\r\n            <div className=\"text-lg font-bold text-accent-blue\">\r\n              {player.totalClicks}\r\n            </div>\r\n          </motion.div>\r\n\r\n          {/* Connection Status */}\r\n          <ConnectionStatus />\r\n        </div>\r\n      </div>\r\n      \r\n      {/* Warning Banner */}\r\n      {singleMode.warningSignsActive && (\r\n        <motion.div\r\n          className=\"bg-yellow-500/80 text-black px-4 py-2 text-center font-bold\"\r\n          initial={{ opacity: 0, y: -20 }}\r\n          animate={{ \r\n            opacity: [0, 1, 0.7, 1, 0.7, 1], \r\n            y: 0 \r\n          }}\r\n          transition={{ duration: 0.5 }}\r\n        >\r\n          ⚠️ ОПАСНОСТЬ! ВЫСОКИЙ РИСК РАЗРЯДА! ⚠️\r\n        </motion.div>\r\n      )}\r\n\r\n      {/* Danger Level Indicator */}\r\n      {singleMode.dangerLevel > 30 && (\r\n        <motion.div\r\n          className={`px-4 py-1 text-center text-xs font-semibold ${\r\n            singleMode.dangerLevel > 70 ? 'bg-red-500/60 text-white' :\r\n            singleMode.dangerLevel > 50 ? 'bg-orange-500/60 text-white' :\r\n            'bg-yellow-500/60 text-black'\r\n          }`}\r\n          initial={{ opacity: 0 }}\r\n          animate={{ opacity: 1 }}\r\n          transition={{ duration: 0.3 }}\r\n        >\r\n          🔥 УРОВЕНЬ ОПАСНОСТИ: {singleMode.dangerLevel}% 🔥\r\n        </motion.div>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n","import React, { useEffect } from 'react';\r\nimport { motion } from 'framer-motion';\r\n\r\ninterface ScreenShakeProps {\r\n  isActive: boolean;\r\n  intensity?: 'low' | 'medium' | 'high' | 'extreme';\r\n  duration?: number;\r\n  onComplete?: () => void;\r\n}\r\n\r\nexport const ScreenShake: React.FC<ScreenShakeProps> = ({\r\n  isActive,\r\n  intensity = 'medium',\r\n  duration = 500,\r\n  onComplete\r\n}) => {\r\n  const shakeAmount = {\r\n    low: 5,\r\n    medium: 10,\r\n    high: 15,\r\n    extreme: 20\r\n  }[intensity];\r\n\r\n  useEffect(() => {\r\n    if (isActive && onComplete) {\r\n      const timer = setTimeout(onComplete, duration);\r\n      return () => clearTimeout(timer);\r\n    }\r\n  }, [isActive, duration, onComplete]);\r\n\r\n  if (!isActive) return null;\r\n\r\n  return (\r\n    <motion.div\r\n      className=\"fixed inset-0 pointer-events-none z-50\"\r\n      initial={{ x: 0, y: 0 }}\r\n      animate={{\r\n        x: [0, -shakeAmount, shakeAmount, -shakeAmount, shakeAmount, 0],\r\n        y: [0, shakeAmount, -shakeAmount, shakeAmount, -shakeAmount, 0],\r\n      }}\r\n      transition={{\r\n        duration: duration / 1000,\r\n        times: [0, 0.1, 0.2, 0.3, 0.4, 1],\r\n        ease: \"easeInOut\"\r\n      }}\r\n    >\r\n      {/* Red flash overlay */}\r\n      <motion.div\r\n        className=\"absolute inset-0 bg-red-500 mix-blend-multiply\"\r\n        initial={{ opacity: 0 }}\r\n        animate={{ opacity: [0, 0.3, 0, 0.2, 0] }}\r\n        transition={{ duration: duration / 1000 }}\r\n      />\r\n    </motion.div>\r\n  );\r\n};\r\n","import React, { useEffect, useState, useCallback } from 'react';\r\nimport { motion } from 'framer-motion';\r\nimport { useGameStore } from '../store/gameStore';\r\nimport { TigerOutlet } from './TigerOutlet';\r\nimport { GameHUD } from './GameHUD';\r\nimport { useGameApi } from '../hooks/useGameApi';\r\nimport { ScreenShake } from './ScreenShake';\r\n\r\nexport const GameScreen: React.FC = () => {\r\n  const { \r\n    gameState, \r\n    singleMode, \r\n    endGame, \r\n    player,\r\n    submitGameToServer\r\n  } = useGameStore();\r\n  \r\n  const { isAuthenticated } = useGameApi();\r\n  const [gameTime, setGameTime] = useState(0);\r\n  const [showGameOver, setShowGameOver] = useState(false);\r\n  const [isSavingToServer, setIsSavingToServer] = useState(false);\r\n  const [isScreenShaking, setIsScreenShaking] = useState(false);\r\n\r\n  // Handle screen shake from electric shock\r\n  const handleShockEffect = useCallback(() => {\r\n    setIsScreenShaking(true);\r\n    setTimeout(() => {\r\n      setIsScreenShaking(false);\r\n    }, 600); // Match ScreenShake duration\r\n  }, []);\r\n\r\n  // Game timer\r\n  useEffect(() => {\r\n    if (!gameState.isPlaying) return;\r\n\r\n    const interval = setInterval(() => {\r\n      setGameTime(prev => prev + 1);\r\n    }, 1000);\r\n\r\n    return () => clearInterval(interval);\r\n  }, [gameState.isPlaying]);\r\n\r\n  // Handle game over conditions\r\n  useEffect(() => {\r\n    // Game over after 10 minutes or specific achievements\r\n    if (gameTime >= 600) { // 10 minutes\r\n      setShowGameOver(true);\r\n    }\r\n  }, [gameTime]);\r\n\r\n  const handleEndGame = async () => {\r\n    setShowGameOver(false);\r\n    setGameTime(0);\r\n    \r\n    // Сохраняем результаты на сервер, если пользователь аутентифицирован\r\n    if (isAuthenticated && gameState.score > 0) {\r\n      setIsSavingToServer(true);\r\n      \r\n      try {\r\n        // Обновляем время игры в store перед отправкой\r\n        const gameStore = useGameStore.getState();\r\n        gameStore.gameState.gameTime = gameTime * 1000; // конвертируем в миллисекунды\r\n        \r\n        const result = await submitGameToServer();\r\n        \r\n        if (result.success) {\r\n          console.log('✅ Игра успешно сохранена на сервер');\r\n        } else {\r\n          console.warn('⚠️ Не удалось сохранить игру на сервер:', result.error);\r\n        }\r\n      } catch (error) {\r\n        console.error('❌ Ошибка при сохранении игры:', error);\r\n      } finally {\r\n        setIsSavingToServer(false);\r\n      }\r\n    }\r\n    \r\n    endGame();\r\n  };\r\n\r\n  const formatTime = (seconds: number) => {\r\n    const mins = Math.floor(seconds / 60);\r\n    const secs = seconds % 60;\r\n    return `${mins.toString().padStart(2, '0')}:${secs.toString().padStart(2, '0')}`;\r\n  };\r\n\r\n  if (showGameOver) {\r\n    return (\r\n      <div className=\"min-h-screen flex items-center justify-center bg-gradient-to-br from-background-dark to-background-darker\">\r\n        <motion.div\r\n          initial={{ opacity: 0, scale: 0.8 }}\r\n          animate={{ opacity: 1, scale: 1 }}\r\n          className=\"glass-effect p-8 text-center max-w-md\"\r\n        >\r\n          <h2 className=\"text-3xl font-bold text-primary-orange mb-4\">\r\n            Игра окончена!\r\n          </h2>\r\n          \r\n          <div className=\"space-y-3 mb-6\">\r\n            <div className=\"flex justify-between\">\r\n              <span>Время игры:</span>\r\n              <span className=\"font-bold\">{formatTime(gameTime)}</span>\r\n            </div>\r\n            <div className=\"flex justify-between\">\r\n              <span>Финальный счёт:</span>\r\n              <span className=\"font-bold text-accent-lime\">{gameState.score.toLocaleString()}</span>\r\n            </div>\r\n            <div className=\"flex justify-between\">\r\n              <span>Получено вольт:</span>\r\n              <span className=\"font-bold text-primary-orange\">{gameState.score}⚡</span>\r\n            </div>\r\n            <div className=\"flex justify-between\">\r\n              <span>Всего нажатий:</span>\r\n              <span className=\"font-bold text-accent-blue\">{player.totalClicks}</span>\r\n            </div>\r\n            <div className=\"flex justify-between\">\r\n              <span>Лучшая серия:</span>\r\n              <span className=\"font-bold text-yellow-400\">{player.streak}</span>\r\n            </div>\r\n          </div>\r\n\r\n          {/* Показываем статус сохранения */}\r\n          {isAuthenticated && gameState.score > 0 && (\r\n            <div className=\"mb-4 text-center\">\r\n              {isSavingToServer ? (\r\n                <div className=\"text-blue-400 text-sm\">\r\n                  <span className=\"inline-block animate-spin mr-2\">⏳</span>\r\n                  Сохранение результатов...\r\n                </div>\r\n              ) : (\r\n                <div className=\"text-green-400 text-sm\">\r\n                  ✅ Результаты будут сохранены на сервер\r\n                </div>\r\n              )}\r\n            </div>\r\n          )}\r\n\r\n          {!isAuthenticated && gameState.score > 0 && (\r\n            <div className=\"mb-4 text-center text-yellow-400 text-sm\">\r\n              ⚠️ Результаты сохраняются только локально\r\n            </div>\r\n          )}\r\n\r\n          <motion.button\r\n            onClick={handleEndGame}\r\n            disabled={isSavingToServer}\r\n            className=\"w-full glass-effect p-3 rounded-xl hover:bg-primary-orange/20 transition-colors disabled:opacity-50 disabled:cursor-not-allowed\"\r\n            whileHover={{ scale: isSavingToServer ? 1 : 1.05 }}\r\n            whileTap={{ scale: isSavingToServer ? 1 : 0.95 }}\r\n          >\r\n            <span className=\"font-bold\">\r\n              {isSavingToServer ? 'Сохранение...' : 'Вернуться в меню'}\r\n            </span>\r\n          </motion.button>\r\n        </motion.div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <>\r\n      <ScreenShake isActive={isScreenShaking} />\r\n      <div className=\"min-h-screen bg-gradient-to-br from-background-dark to-background-darker relative\">\r\n      {/* Game HUD */}\r\n      <GameHUD />\r\n      \r\n      {/* Main Game Area */}\r\n      <div className=\"flex flex-col items-center justify-center min-h-screen pt-24 pb-8\">\r\n        {/* Game Timer */}\r\n        <motion.div\r\n          className=\"glass-effect px-6 py-3 mb-8\"\r\n          animate={{ \r\n            scale: gameTime % 10 === 0 && gameTime > 0 ? [1, 1.1, 1] : 1 \r\n          }}\r\n        >\r\n          <div className=\"text-center\">\r\n            <div className=\"text-xs text-gray-300\">ВРЕМЯ ИГРЫ</div>\r\n            <div className=\"text-2xl font-bold text-white font-mono\">\r\n              {formatTime(gameTime)}\r\n            </div>\r\n          </div>\r\n        </motion.div>\r\n\r\n        {/* Tiger Outlet - Main Game Element */}\r\n        <TigerOutlet className=\"mb-8\" onShock={handleShockEffect} />\r\n\r\n        {/* Quick Stats */}\r\n        <div className=\"flex space-x-4 text-center\">\r\n          <motion.div \r\n            className=\"glass-effect px-4 py-2\"\r\n            whileHover={{ scale: 1.05 }}\r\n          >\r\n            <div className=\"text-xs text-gray-300\">ПОСЛЕДНИЙ РИСК</div>\r\n            <div className={`text-sm font-bold ${\r\n              singleMode.currentRisk === 'extreme' ? 'text-red-400' :\r\n              singleMode.currentRisk === 'high' ? 'text-orange-400' :\r\n              singleMode.currentRisk === 'medium' ? 'text-yellow-400' :\r\n              'text-green-400'\r\n            }`}>\r\n              {singleMode.currentRisk === 'extreme' ? 'ЭКСТРИМ' :\r\n               singleMode.currentRisk === 'high' ? 'ВЫСОКИЙ' :\r\n               singleMode.currentRisk === 'medium' ? 'СРЕДНИЙ' : 'НИЗКИЙ'}\r\n            </div>\r\n          </motion.div>\r\n        </div>\r\n\r\n        {/* Pause/Exit Button */}\r\n        <motion.button\r\n          onClick={handleEndGame}\r\n          className=\"mt-8 glass-effect px-6 py-3 rounded-xl hover:bg-red-500/20 transition-colors\"\r\n          whileHover={{ scale: 1.05 }}\r\n          whileTap={{ scale: 0.95 }}\r\n        >\r\n          <span className=\"text-red-300 font-bold\">Завершить игру</span>\r\n        </motion.button>\r\n      </div>\r\n\r\n      {/* Background Effects */}\r\n      <div className=\"fixed inset-0 pointer-events-none overflow-hidden\">\r\n        {/* Electric grid animation */}\r\n        <motion.div\r\n          className=\"absolute inset-0 opacity-10\"\r\n          animate={{\r\n            backgroundPosition: ['0% 0%', '100% 100%'],\r\n          }}\r\n          transition={{\r\n            duration: 20,\r\n            repeat: Infinity,\r\n            ease: 'linear'\r\n          }}\r\n          style={{\r\n            backgroundImage: `\r\n              linear-gradient(0deg, transparent 24%, rgba(255, 107, 53, 0.05) 25%, rgba(255, 107, 53, 0.05) 26%, transparent 27%, transparent 74%, rgba(255, 107, 53, 0.05) 75%, rgba(255, 107, 53, 0.05) 76%, transparent 77%, transparent),\r\n              linear-gradient(90deg, transparent 24%, rgba(255, 107, 53, 0.05) 25%, rgba(255, 107, 53, 0.05) 26%, transparent 27%, transparent 74%, rgba(255, 107, 53, 0.05) 75%, rgba(255, 107, 53, 0.05) 76%, transparent 77%, transparent)\r\n            `,\r\n            backgroundSize: '50px 50px'\r\n          }}\r\n        />\r\n      </div>\r\n    </div>\r\n    </>\r\n  );\r\n};\r\n","import React, { useEffect } from 'react';\r\nimport { motion, AnimatePresence } from 'framer-motion';\r\nimport { LevelConfig } from '../utils/levelSystem';\r\nimport { getOutletImageByLevel } from '../utils/levelSystem';\r\nimport { hapticManager } from '../utils/hapticManager';\r\n\r\ninterface LevelUpNotificationProps {\r\n  isVisible: boolean;\r\n  newLevel: LevelConfig;\r\n  voltsReward: number;\r\n  onClose: () => void;\r\n}\r\n\r\nexport const LevelUpNotification: React.FC<LevelUpNotificationProps> = ({\r\n  isVisible,\r\n  newLevel,\r\n  voltsReward,\r\n  onClose\r\n}) => {\r\n  // Добавляем вибрацию при появлении уведомления\r\n  useEffect(() => {\r\n    if (isVisible) {\r\n      hapticManager.levelUp();\r\n    }\r\n  }, [isVisible]);\r\n  \r\n  // Check if outlet image changed with this level\r\n  if (!newLevel || !newLevel.level) {\r\n    if (isVisible) {\r\n      console.warn('LevelUpNotification: newLevel is invalid', newLevel);\r\n    }\r\n    return null;\r\n  }\r\n  \r\n  const newOutletImage = getOutletImageByLevel(newLevel.level);\r\n  const previousOutletImage = getOutletImageByLevel(newLevel.level - 1);\r\n  const outletImageChanged = newOutletImage !== previousOutletImage;\r\n  return (\r\n    <AnimatePresence>\r\n      {isVisible && (\r\n        <motion.div\r\n          initial={{ opacity: 0 }}\r\n          animate={{ opacity: 1 }}\r\n          exit={{ opacity: 0 }}\r\n          className=\"fixed inset-0 bg-black/80 flex items-center justify-center z-50\"\r\n          onClick={onClose}\r\n        >\r\n          <motion.div\r\n            initial={{ scale: 0.5, opacity: 0, rotateY: -90 }}\r\n            animate={{ scale: 1, opacity: 1, rotateY: 0 }}\r\n            exit={{ scale: 0.5, opacity: 0, rotateY: 90 }}\r\n            transition={{ \r\n              type: \"spring\", \r\n              stiffness: 300, \r\n              damping: 20,\r\n              duration: 0.6 \r\n            }}\r\n            className=\"glass-effect p-8 max-w-md mx-4 text-center relative overflow-hidden\"\r\n            onClick={(e) => e.stopPropagation()}\r\n          >\r\n            {/* Background sparkles */}\r\n            <div className=\"absolute inset-0 pointer-events-none\">\r\n              {[...Array(20)].map((_, i) => (\r\n                <motion.div\r\n                  key={i}\r\n                  className=\"absolute w-1 h-1 bg-yellow-300 rounded-full\"\r\n                  style={{\r\n                    left: `${Math.random() * 100}%`,\r\n                    top: `${Math.random() * 100}%`,\r\n                  }}\r\n                  animate={{\r\n                    opacity: [0, 1, 0],\r\n                    scale: [0, 1, 0],\r\n                  }}\r\n                  transition={{\r\n                    duration: 2,\r\n                    repeat: Infinity,\r\n                    delay: Math.random() * 2,\r\n                  }}\r\n                />\r\n              ))}\r\n            </div>\r\n\r\n            {/* Level up content */}\r\n            <motion.div\r\n              animate={{\r\n                scale: [1, 1.1, 1],\r\n              }}\r\n              transition={{\r\n                duration: 0.6,\r\n                delay: 0.3,\r\n              }}\r\n            >\r\n              <div className=\"text-6xl mb-4\">🎉</div>\r\n              \r\n              <motion.h2 \r\n                className=\"text-3xl font-bold text-primary-orange mb-2\"\r\n                animate={{ \r\n                  textShadow: [\r\n                    \"0 0 10px rgba(255, 107, 53, 0.5)\",\r\n                    \"0 0 20px rgba(255, 107, 53, 0.8)\",\r\n                    \"0 0 10px rgba(255, 107, 53, 0.5)\"\r\n                  ]\r\n                }}\r\n                transition={{ duration: 1.5, repeat: Infinity }}\r\n              >\r\n                НОВЫЙ УРОВЕНЬ!\r\n              </motion.h2>\r\n              \r\n              <div className=\"mb-4\">\r\n                <div className=\"text-5xl font-bold text-accent-blue mb-2\">\r\n                  {newLevel.level}\r\n                </div>\r\n                <div className=\"text-xl text-yellow-300 font-semibold mb-1\">\r\n                  {newLevel.title}\r\n                </div>\r\n                <div className=\"text-sm text-gray-300 italic\">\r\n                  {newLevel.description}\r\n                </div>\r\n              </div>\r\n\r\n              <motion.div \r\n                className=\"glass-effect p-4 rounded-lg bg-gradient-to-r from-yellow-500/20 to-orange-500/20\"\r\n                animate={{ \r\n                  boxShadow: [\r\n                    \"0 0 20px rgba(255, 193, 7, 0.3)\",\r\n                    \"0 0 30px rgba(255, 193, 7, 0.6)\",\r\n                    \"0 0 20px rgba(255, 193, 7, 0.3)\"\r\n                  ]\r\n                }}\r\n                transition={{ duration: 2, repeat: Infinity }}\r\n              >\r\n                <div className=\"text-lg font-bold text-yellow-300 mb-1\">\r\n                  Награда за уровень:\r\n                </div>\r\n                <div className=\"text-2xl font-bold text-white\">\r\n                  +{voltsReward}⚡ Вольт\r\n                </div>\r\n                \r\n                {/* Show outlet upgrade notification */}\r\n                {outletImageChanged && (\r\n                  <div className=\"mt-3 pt-3 border-t border-yellow-400/30\">\r\n                    <div className=\"text-sm font-bold text-blue-300 mb-2\">\r\n                      🎨 Новое изображение розетки!\r\n                    </div>\r\n                    <div className=\"flex items-center justify-center space-x-4\">\r\n                      <div className=\"text-center\">\r\n                        <div className=\"text-xs text-gray-400\">Было:</div>\r\n                        <img \r\n                          src={previousOutletImage} \r\n                          alt=\"Предыдущая розетка\"\r\n                          className=\"w-8 h-8 rounded border border-gray-600\"\r\n                        />\r\n                      </div>\r\n                      <div className=\"text-yellow-400\">→</div>\r\n                      <div className=\"text-center\">\r\n                        <div className=\"text-xs text-gray-400\">Стало:</div>\r\n                        <img \r\n                          src={newOutletImage} \r\n                          alt=\"Новая розетка\"\r\n                          className=\"w-8 h-8 rounded border border-blue-400\"\r\n                        />\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n                )}\r\n              </motion.div>\r\n            </motion.div>\r\n\r\n            {/* Close button */}\r\n            <motion.button\r\n              onClick={onClose}\r\n              className=\"mt-6 px-6 py-3 bg-primary-orange hover:bg-primary-orange/80 text-white font-bold rounded-lg transition-colors\"\r\n              whileHover={{ scale: 1.05 }}\r\n              whileTap={{ scale: 0.95 }}\r\n            >\r\n              Продолжить\r\n            </motion.button>\r\n\r\n            {/* Confetti effect */}\r\n            <div className=\"absolute inset-0 pointer-events-none overflow-hidden\">\r\n              {[...Array(15)].map((_, i) => (\r\n                <motion.div\r\n                  key={`confetti-${i}`}\r\n                  className=\"absolute w-2 h-2 rounded-full\"\r\n                  style={{\r\n                    backgroundColor: ['#FFD700', '#FF6B35', '#00D4FF', '#E8FF00', '#8A2BE2'][i % 5],\r\n                    left: `${50 + (Math.random() - 0.5) * 60}%`,\r\n                    top: '20%',\r\n                  }}\r\n                  animate={{\r\n                    y: ['0vh', '80vh'],\r\n                    x: [(Math.random() - 0.5) * 200, (Math.random() - 0.5) * 400],\r\n                    rotate: [0, 360],\r\n                    opacity: [1, 0],\r\n                  }}\r\n                  transition={{\r\n                    duration: 3,\r\n                    delay: Math.random() * 0.5,\r\n                    ease: \"easeOut\",\r\n                  }}\r\n                />\r\n              ))}\r\n            </div>\r\n          </motion.div>\r\n        </motion.div>\r\n      )}\r\n    </AnimatePresence>\r\n  );\r\n};\r\n","import { useEffect } from 'react';\r\nimport { useGameStore } from './store/gameStore';\r\nimport { MainMenu } from './components/MainMenu';\r\nimport { GameScreen } from './components/GameScreen';\r\nimport { LevelUpNotification } from './components/LevelUpNotification';\r\nimport { TelegramProvider } from './components/TelegramProvider';\r\n\r\nfunction App() {\r\n  const { gameState, levelUpNotification, hideLevelUpNotification } = useGameStore();\r\n\r\n  useEffect(() => {\r\n    // Initialize Telegram WebApp\r\n    if (typeof window !== 'undefined' && window.Telegram?.WebApp) {\r\n      const webApp = window.Telegram.WebApp;\r\n      \r\n      // Основная инициализация\r\n      webApp.ready();\r\n      webApp.expand();\r\n      \r\n      // Настройка темы приложения\r\n      webApp.setHeaderColor('#FF6B35'); // Оранжевый цвет TigerRozetka\r\n      webApp.setBackgroundColor('#1A1A1A'); // Темный фон\r\n      \r\n      // Включение подтверждения закрытия\r\n      webApp.enableClosingConfirmation();\r\n      \r\n      // Настройка главной кнопки (опционально)\r\n      if (webApp.MainButton) {\r\n        webApp.MainButton.setText('🎮 Играть');\r\n        webApp.MainButton.color = '#FF6B35';\r\n        webApp.MainButton.textColor = '#FFFFFF';\r\n      }\r\n      \r\n      // Логирование для отладки\r\n      console.log('Telegram WebApp initialized:', {\r\n        platform: webApp.platform,\r\n        version: webApp.version,\r\n        colorScheme: webApp.colorScheme,\r\n        user: webApp.initDataUnsafe?.user\r\n      });\r\n    } else {\r\n      console.log('Running outside Telegram environment');\r\n    }\r\n  }, []);\r\n\r\n  console.log('App rendering, mode:', gameState.mode);\r\n\r\n  return (\r\n    <TelegramProvider>\r\n      <div className=\"App\">\r\n        {gameState.mode === 'menu' && <MainMenu />}\r\n        {gameState.mode === 'single' && <GameScreen />}\r\n        \r\n        {/* Level Up Notification - Global */}\r\n        {levelUpNotification.level && (\r\n          <LevelUpNotification\r\n            isVisible={levelUpNotification.isVisible}\r\n            newLevel={levelUpNotification.level}\r\n            voltsReward={levelUpNotification.voltsReward || 0}\r\n            onClose={hideLevelUpNotification}\r\n          />\r\n        )}\r\n      </div>\r\n    </TelegramProvider>\r\n  );\r\n}\r\n\r\nexport default App;\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom/client';\r\nimport App from './App.tsx';\r\nimport './index.css';\r\n\r\n// Инициализация Telegram Mini App\r\n// Расширяем WebApp до полного экрана\r\nif (typeof window !== 'undefined' && window.Telegram?.WebApp) {\r\n  const tg = window.Telegram.WebApp;\r\n  \r\n  // Основная настройка\r\n  tg.ready();\r\n  tg.expand();\r\n  \r\n  // Настройка цветовой темы\r\n  tg.setHeaderColor('#000000');\r\n  tg.setBackgroundColor('#000000');\r\n  \r\n  // Отключаем кнопку \"Назад\" (будем управлять навигацией сами)\r\n  tg.BackButton.hide();\r\n  \r\n  // Включаем тактильные уведомления если доступны\r\n  if (tg.HapticFeedback) {\r\n    tg.HapticFeedback.selectionChanged();\r\n  }\r\n  \r\n  console.log('Telegram WebApp initialized:', {\r\n    version: tg.version,\r\n    platform: tg.platform,\r\n    colorScheme: tg.colorScheme,\r\n    user: tg.initDataUnsafe?.user\r\n  });\r\n}\r\n\r\nReactDOM.createRoot(document.getElementById('root')!).render(\r\n  <React.StrictMode>\r\n    <App />\r\n  </React.StrictMode>,\r\n);\r\n"],"names":["m","require$$0","client","createStoreImpl","createState","state","listeners","setState","partial","replace","nextState","previousState","listener","getState","api","initialState","__vite_import_meta_env__","createStore","React","is","x","y","objectIs","useState","useEffect","useLayoutEffect","useDebugValue","useSyncExternalStore$2","subscribe","getSnapshot","value","_useState","inst","forceUpdate","checkIfSnapshotChanged","latestGetSnapshot","nextValue","useSyncExternalStore$1","shim","useSyncExternalStoreShim_production","shimModule","require$$1","useSyncExternalStore","useRef","useMemo","withSelector_production","getServerSnapshot","selector","isEqual","instRef","memoizedSelector","nextSnapshot","hasMemo","memoizedSnapshot","currentSelection","memoizedSelection","nextSelection","maybeGetServerSnapshot","withSelectorModule","ReactExports","useSyncExternalStoreWithSelector","useSyncExternalStoreExports","didWarnAboutEqualityFn","identity","arg","useStore","equalityFn","slice","createImpl","useBoundStore","create","LEVEL_CONFIGS","calculateLevel","totalExperience","currentLevel","i","getExperienceToNextLevel","nextLevelIndex","config","nextLevel","getLevelProgress","current","required","EXPERIENCE_REWARDS","getOutletImageByLevel","level","basePath","API_BASE_URL","ApiClient","__publicField","_a","webApp","_b","initData","data","error","endpoint","options","headers","response","scoreData","type","limit","token","apiClient","defaultGameState","defaultPlayer","defaultSingleMode","defaultSounds","defaultAchievements","useGameStore","set","get","difficulty","now","timeSinceLastClick","currentRisk","dangerLevel","warningSignsActive","newScore","newVolts","isSuccess","newStreak","newStreakCount","experienceGained","newSuccessfulClicks","newShockedClicks","totalAttempts","newLuckCoefficient","addExperience","unlockAchievement","volts","damage","severity","duration","luckHideDuration","voltsDrained","shockImpact","achievementId","achievement","a","stats","amount","newExperience","oldLevel","newLevel","showLevelUpNotification","voltsReward","successfulClicks","shouldRestoreLuckIndicator","gameData","getDifficultyLevel","serverData","errorMessage","HapticManager","enabled","streakCount","isWinner","indicator","style","pattern","delay","vibrateDuration","pauseDuration","hapticManager","ScoreBreakdown","onClose","player","singleMode","gameState","jsx","motion","jsxs","e","LevelDisplay","getCurrentLevelInfo","progressInfo","progressPercent","currentOutletImage","nextOutletImage","outletWillChange","HapticSettings","isVisible","isEnabled","setIsEnabled","testingType","setTestingType","savedEnabled","handleToggleEnabled","newValue","testHaptic","action","TelegramContext","createContext","useTelegram","useContext","TelegramProvider","children","setWebApp","user","setUser","isInTelegram","setIsInTelegram","platform","setPlatform","colorScheme","setColorScheme","tgWebApp","_c","contextValue","TelegramUserInfo","useGameApi","submitState","setSubmitState","statsState","setStatsState","leaderboardState","setLeaderboardState","submitScore","useCallback","getUserStats","getLeaderboard","refillEnergy","useOfflineMode","isOnline","setIsOnline","handleOnline","handleOffline","MainMenu","startSingleMode","loadStatsFromServer","isAuthenticated","showScoreBreakdown","setShowScoreBreakdown","showHapticSettings","setShowHapticSettings","isLoadingStats","setIsLoadingStats","result","handleQuickLevelUp","handleStartGame","SoundManager","name","url","arrayBuffer","audioBuffer","volume","buffer","source","gainNode","intensity","frequency","bufferSize","output","t","envelope","noise","oscillation","lowFreq","highFreq","soundManager","ScorePopup","score","reason","position","experience","getColorClass","getIcon","AnimatePresence","ElectricSparks","isActive","onComplete","sparks","setSparks","generateSparks","sparkCount","colors","newSparks","spark","_","startX","startY","segments","path","currentX","currentY","j","useOutletImageAnimation","currentImage","setCurrentImage","isAnimating","setIsAnimating","newImage","TigerOutlet","className","onShock","clickOutlet","updateScore","triggerShock","isPressed","setIsPressed","glowIntensity","setGlowIntensity","isElectricShockActive","setIsElectricShockActive","scorePopup","setScorePopup","showScorePopup","prev","createSparks","s","handleClick","shockChance","penaltyMessage","basePoints","riskMultiplier","streakBonus","totalPoints","ConnectionStatus","status","GameHUD","ScreenShake","shakeAmount","timer","GameScreen","endGame","submitGameToServer","gameTime","setGameTime","showGameOver","setShowGameOver","isSavingToServer","setIsSavingToServer","isScreenShaking","setIsScreenShaking","handleShockEffect","interval","handleEndGame","gameStore","formatTime","seconds","mins","secs","Fragment","LevelUpNotification","newOutletImage","previousOutletImage","outletImageChanged","App","levelUpNotification","hideLevelUpNotification","tg","ReactDOM"],"mappings":"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","x_google_ignoreList":[0,1,2,3,4,5,6]}