var xe=Object.defineProperty;var ue=(i,a,t)=>a in i?xe(i,a,{enumerable:!0,configurable:!0,writable:!0,value:t}):i[a]=t;var D=(i,a,t)=>ue(i,typeof a!="symbol"?a+"":a,t);import{j as e,m as o,A as H}from"./motion-3WHHzQTP.js";import{a as me,r as x,g as he,R as ae}from"./vendor-CIP6LD3P.js";(function(){const a=document.createElement("link").relList;if(a&&a.supports&&a.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))s(r);new MutationObserver(r=>{for(const n of r)if(n.type==="childList")for(const l of n.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&s(l)}).observe(document,{childList:!0,subtree:!0});function t(r){const n={};return r.integrity&&(n.integrity=r.integrity),r.referrerPolicy&&(n.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?n.credentials="include":r.crossOrigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function s(r){if(r.ep)return;r.ep=!0;const n=t(r);fetch(r.href,n)}})();var z={},K=me;z.createRoot=K.createRoot,z.hydrateRoot=K.hydrateRoot;const ge={},Y=i=>{let a;const t=new Set,s=(d,g)=>{const f=typeof d=="function"?d(a):d;if(!Object.is(f,a)){const p=a;a=g??(typeof f!="object"||f===null)?f:Object.assign({},a,f),t.forEach(m=>m(a,p))}},r=()=>a,u={setState:s,getState:r,getInitialState:()=>h,subscribe:d=>(t.add(d),()=>t.delete(d)),destroy:()=>{(ge?"production":void 0)!=="production"&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),t.clear()}},h=a=i(s,r,u);return u},fe=i=>i?Y(i):Y;var ie={exports:{}},re={},ne={exports:{}},le={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var B=x;function pe(i,a){return i===a&&(i!==0||1/i===1/a)||i!==i&&a!==a}var ve=typeof Object.is=="function"?Object.is:pe,ye=B.useState,be=B.useEffect,je=B.useLayoutEffect,we=B.useDebugValue;function Ne(i,a){var t=a(),s=ye({inst:{value:t,getSnapshot:a}}),r=s[0].inst,n=s[1];return je(function(){r.value=t,r.getSnapshot=a,V(r)&&n({inst:r})},[i,t,a]),be(function(){return V(r)&&n({inst:r}),i(function(){V(r)&&n({inst:r})})},[i]),we(t),t}function V(i){var a=i.getSnapshot;i=i.value;try{var t=a();return!ve(i,t)}catch{return!0}}function ke(i,a){return a()}var Se=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?ke:Ne;le.useSyncExternalStore=B.useSyncExternalStore!==void 0?B.useSyncExternalStore:Se;ne.exports=le;var Ee=ne.exports;/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var O=x,Ce=Ee;function Me(i,a){return i===a&&(i!==0||1/i===1/a)||i!==i&&a!==a}var Te=typeof Object.is=="function"?Object.is:Me,Ae=Ce.useSyncExternalStore,Ie=O.useRef,Re=O.useEffect,$e=O.useMemo,De=O.useDebugValue;re.useSyncExternalStoreWithSelector=function(i,a,t,s,r){var n=Ie(null);if(n.current===null){var l={hasValue:!1,value:null};n.current=l}else l=n.current;n=$e(function(){function u(p){if(!h){if(h=!0,d=p,p=s(p),r!==void 0&&l.hasValue){var m=l.value;if(r(m,p))return g=m}return g=p}if(m=g,Te(d,p))return m;var v=s(p);return r!==void 0&&r(m,v)?(d=p,m):(d=p,g=v)}var h=!1,d,g,f=t===void 0?null:t;return[function(){return u(a())},f===null?void 0:function(){return u(f())}]},[a,t,s,r]);var c=Ae(i,n[0],n[1]);return Re(function(){l.hasValue=!0,l.value=c},[c]),De(c),c};ie.exports=re;var Le=ie.exports;const Pe=he(Le),ce={},{useDebugValue:Fe}=ae,{useSyncExternalStoreWithSelector:_e}=Pe;let X=!1;const qe=i=>i;function He(i,a=qe,t){(ce?"production":void 0)!=="production"&&t&&!X&&(console.warn("[DEPRECATED] Use `createWithEqualityFn` instead of `create` or use `useStoreWithEqualityFn` instead of `useStore`. They can be imported from 'zustand/traditional'. https://github.com/pmndrs/zustand/discussions/1937"),X=!0);const s=_e(i.subscribe,i.getState,i.getServerState||i.getInitialState,a,t);return Fe(s),s}const J=i=>{(ce?"production":void 0)!=="production"&&typeof i!="function"&&console.warn("[DEPRECATED] Passing a vanilla store will be unsupported in a future version. Instead use `import { useStore } from 'zustand'`.");const a=typeof i=="function"?fe(i):i,t=(s,r)=>He(a,s,r);return Object.assign(t,a),t},Ue=i=>i?J(i):J,q=[{level:1,requiredExperience:0,voltsReward:0,title:"–ù–æ–≤–∏—á–æ–∫",description:"–ü–µ—Ä–≤—ã–µ —à–∞–≥–∏ —Å —ç–ª–µ–∫—Ç—Ä–∏—á–µ—Å—Ç–≤–æ–º"},{level:2,requiredExperience:100,voltsReward:50,title:"–£—á–µ–Ω–∏–∫",description:"–û—Å–≤–∞–∏–≤–∞–µ—Ç–µ –æ—Å–Ω–æ–≤—ã"},{level:3,requiredExperience:250,voltsReward:75,title:"–ü—Ä–∞–∫—Ç–∏–∫–∞–Ω—Ç",description:"‚ö†Ô∏è –û–ø–∞—Å–Ω–æ! –¢–µ–ø–µ—Ä—å —É–¥–∞—Ä —Ç–æ–∫–æ–º –æ—Ç–Ω–∏–º–∞–µ—Ç –æ—á–∫–∏"},{level:4,requiredExperience:500,voltsReward:100,title:"–õ—é–±–∏—Ç–µ–ª—å",description:"üî• –ö—Ä–∏—Ç–∏—á–Ω–æ! –ù–∞–ø—Ä—è–∂–µ–Ω–∏–µ –æ—Ç–Ω–∏–º–∞–µ—Ç—Å—è –æ—Ç –æ—á–∫–æ–≤"},{level:5,requiredExperience:850,voltsReward:150,title:"–≠–Ω—Ç—É–∑–∏–∞—Å—Ç",description:"–ü—Ä–æ—è–≤–ª—è–µ—Ç–µ —Å–º–µ–ª–æ—Å—Ç—å –≤ –æ–ø–∞—Å–Ω–æ–π –∏–≥—Ä–µ"},{level:6,requiredExperience:1300,voltsReward:200,title:"–°–º–µ–ª—å—á–∞–∫",description:"–ù–µ –±–æ–∏—Ç–µ—Å—å —Ä–∏—Å–∫–æ–≤–∞—Ç—å"},{level:7,requiredExperience:1900,voltsReward:250,title:"–•—Ä–∞–±—Ä–µ—Ü",description:"–ò–¥–µ—Ç–µ –Ω–∞ –æ–ø—Ä–∞–≤–¥–∞–Ω–Ω—ã–π —Ä–∏—Å–∫"},{level:8,requiredExperience:2600,voltsReward:300,title:"–û—Ç–≤–∞–∂–Ω—ã–π",description:"–ü–æ–∫–æ—Ä—è–µ—Ç–µ —Å–ª–æ–∂–Ω–æ—Å—Ç–∏"},{level:9,requiredExperience:3450,voltsReward:400,title:"–ë–µ–∑—Ä–∞—Å—Å—É–¥–Ω—ã–π",description:"–ò–≥—Ä–∞–µ—Ç–µ —Å –æ–ø–∞—Å–Ω–æ—Å—Ç—å—é"},{level:10,requiredExperience:4500,voltsReward:500,title:"–ü—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª",description:"–ú–∞—Å—Ç–µ—Ä—Å–∫–∏ –≤–ª–∞–¥–µ–µ—Ç–µ —Ä–∏—Å–∫–æ–º"},{level:11,requiredExperience:5800,voltsReward:600,title:"–≠–∫—Å–ø–µ—Ä—Ç",description:"–ó–Ω–∞–µ—Ç–µ –≤—Å–µ —Ç–æ–Ω–∫–æ—Å—Ç–∏"},{level:12,requiredExperience:7400,voltsReward:750,title:"–ú–∞—Å—Ç–µ—Ä",description:"–ü—Ä–µ–≤–æ—Å—Ö–æ–¥–∏—Ç–µ –æ–∂–∏–¥–∞–Ω–∏—è"},{level:13,requiredExperience:9300,voltsReward:900,title:"–í–∏—Ä—Ç—É–æ–∑",description:"–ò–≥—Ä–∞–µ—Ç–µ –∫–∞–∫ —Ö—É–¥–æ–∂–Ω–∏–∫"},{level:14,requiredExperience:11600,voltsReward:1100,title:"–ì—É—Ä—É",description:"–î–æ—Å—Ç–∏–≥–ª–∏ –ø—Ä–æ—Å–≤–µ—Ç–ª–µ–Ω–∏—è"},{level:15,requiredExperience:14400,voltsReward:1300,title:"–°–µ–Ω—Å–µ–π",description:"–£—á–∏—Ç–µ –¥—Ä—É–≥–∏—Ö"},{level:16,requiredExperience:17800,voltsReward:1500,title:"–õ–µ–≥–µ–Ω–¥–∞",description:"–û –≤–∞—Å —Å–ª–∞–≥–∞—é—Ç –ª–µ–≥–µ–Ω–¥—ã"},{level:17,requiredExperience:21900,voltsReward:1750,title:"–ú–∏—Ñ",description:"–ù–µ–¥–æ—Å—Ç–∏–∂–∏–º—ã–π –∏–¥–µ–∞–ª"},{level:18,requiredExperience:26800,voltsReward:2e3,title:"–¢–∏—Ç–∞–Ω",description:"–°–≤–µ—Ä—Ö—á–µ–ª–æ–≤–µ—á–µ—Å–∫–∏–µ —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏"},{level:19,requiredExperience:32600,voltsReward:2300,title:"–ë–æ–≥ –≠–ª–µ–∫—Ç—Ä–∏—á–µ—Å—Ç–≤–∞",description:"–ü–æ–≤–µ–ª–µ–≤–∞–µ—Ç–µ –º–æ–ª–Ω–∏—è–º–∏"},{level:20,requiredExperience:4e4,voltsReward:2500,title:"–ó–µ–≤—Å",description:"–ê–±—Å–æ–ª—é—Ç–Ω–∞—è –≤–ª–∞—Å—Ç—å –Ω–∞–¥ —Ç–æ–∫–æ–º"}];function W(i){let a=q[0];for(let t=q.length-1;t>=0;t--)if(i>=q[t].requiredExperience){a=q[t];break}return a}function oe(i){const a=W(i),t=q.findIndex(r=>r.level===a.level)+1;if(t>=q.length)return{current:i,required:i,remaining:0,nextLevel:null};const s=q[t];return{current:i-a.requiredExperience,required:s.requiredExperience-a.requiredExperience,remaining:s.requiredExperience-i,nextLevel:s}}function Be(i){const{current:a,required:t}=oe(i);return t===0?100:Math.min(100,a/t*100)}const F={SAFE_CLICK:10,RISKY_CLICK:15,EXTREME_CLICK:25,STREAK_5:50,STREAK_10:100,STREAK_25:250,STREAK_50:500,SHOCK_SURVIVAL:5};function U(i){const a="/tigerrosette/";return i<=5?`${a}Media/Pictures/tigrrozetka_1.png`:i<=10?`${a}Media/Pictures/tigrrozetka_2.png`:i<=15?`${a}Media/Pictures/tigrrozetka_3.png`:`${a}Media/Pictures/tigrrozetka_4.png`}const Q="http://localhost:3001/api";class We{constructor(){D(this,"token",null);this.token=localStorage.getItem("auth_token"),this.initializeTelegramAuth()}initializeTelegramAuth(){var a,t;if(typeof window<"u"&&((a=window.Telegram)!=null&&a.WebApp)){const s=window.Telegram.WebApp;(t=s.initDataUnsafe)!=null&&t.user&&this.authenticateWithTelegram(s.initData)}}async authenticateWithTelegram(a){try{const s=await(await fetch(`${Q}/auth/telegram`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({initData:a})})).json();s.token&&(this.token=s.token,localStorage.setItem("auth_token",s.token))}catch(t){console.error("Telegram authentication failed:",t)}}async makeRequest(a,t={}){try{const s={"Content-Type":"application/json",...t.headers};this.token&&(s.Authorization=`Bearer ${this.token}`);const r=await fetch(`${Q}${a}`,{...t,headers:s}),n=await r.json();return r.ok?{success:!0,data:n}:{error:n.error||`HTTP ${r.status}`}}catch(s){return console.error("API request failed:",s),{error:s instanceof Error?s.message:"Network error"}}}async submitScore(a){return this.makeRequest("/game/score",{method:"POST",body:JSON.stringify(a)})}async getUserStats(){return this.makeRequest("/game/stats")}async getLeaderboard(a="level",t=10){return this.makeRequest(`/game/leaderboard?type=${a}&limit=${t}`)}async refillEnergy(){return this.makeRequest("/game/refill-energy",{method:"POST"})}isAuthenticated(){return!!this.token}setToken(a){this.token=a,localStorage.setItem("auth_token",a)}clearToken(){this.token=null,localStorage.removeItem("auth_token")}}const $=new We,Oe={mode:"menu",isPlaying:!1,isPaused:!1,gameTime:0,score:0},Ve={id:"player1",name:"–°–º–µ–ª—å—á–∞–∫",volts:0,level:1,experience:0,streak:0,totalClicks:0,successfulClicks:0,shockedClicks:0,luckCoefficient:50,luckIndicatorHidden:!1,luckHiddenUntil:0,survivalTime:0},Z={difficulty:"easy",aiPattern:"regular",currentRisk:"low",streakCount:0,timeInSafeZone:0,lastClickTime:0,dangerLevel:0,warningSignsActive:!1,aiElectricianActive:!1,nextDischargeTime:0,dischargeWarningTime:0,isDischarging:!1,dischargeDuration:2e3},ze={volume:.7,enabled:!0,backgroundMusicEnabled:!0},Ge=[{id:"first_click",title:"–ü–µ—Ä–≤–æ–µ –ø—Ä–∏–∫–æ—Å–Ω–æ–≤–µ–Ω–∏–µ",description:"–ù–∞–∂–º–∏ –Ω–∞ —Ä–æ–∑–µ—Ç–∫—É –≤–ø–µ—Ä–≤—ã–µ",icon:"‚ö°",requirement:1,progress:0,completed:!1,reward:50,category:"special"},{id:"survivor_5",title:"–ñ–∏–≤—á–∏–∫",description:"–°–µ—Ä–∏—è –∏–∑ 5 —É—Å–ø–µ—à–Ω—ã—Ö –Ω–∞–∂–∞—Ç–∏–π",icon:"üèÉ",requirement:5,progress:0,completed:!1,reward:100,category:"streak"},{id:"survivor_25",title:"–ù–µ—É–±–∏–≤–∞–µ–º—ã–π",description:"–°–µ—Ä–∏—è –∏–∑ 25 —É—Å–ø–µ—à–Ω—ã—Ö –Ω–∞–∂–∞—Ç–∏–π",icon:"üõ°Ô∏è",requirement:25,progress:0,completed:!1,reward:500,category:"streak"},{id:"risk_taker",title:"–ë–µ–∑—Ä–∞—Å—Å—É–¥–Ω—ã–π",description:"50 –Ω–∞–∂–∞—Ç–∏–π –≤ —Ä–µ–∂–∏–º–µ High Risk",icon:"üî•",requirement:50,progress:0,completed:!1,reward:500,category:"risk"},{id:"time_survivor",title:"–í—ã–∂–∏–≤–∞–ª—å—â–∏–∫",description:"–í—ã–∂–∏–≤–∏ 5 –º–∏–Ω—É—Ç –±–µ–∑ –ø–æ—Ä–∞–∂–µ–Ω–∏—è",icon:"‚è∞",requirement:300,progress:0,completed:!1,reward:1e3,category:"survival"}],T=Ue((i,a)=>({gameState:Oe,player:Ve,singleMode:Z,achievements:Ge,sounds:ze,showElectricSparks:!1,sparksIntensity:"medium",showScreenShake:!1,aiElectrician:{name:"–ò–≤–∞–Ω –≠–ª–µ–∫—Ç—Ä–∏–∫",energy:100,maxEnergy:100,equipment:{battery:100,capacitor:100,wires:100,generator:100},mood:"confident",experience:50,isActive:!1,lastMessage:"–ì–æ—Ç–æ–≤ –∫ —Ä–∞–±–æ—Ç–µ!",messageTime:0,failuresCount:0,successfulDischarges:0,workingEfficiency:100,canWork:!0},levelUpNotification:{isVisible:!1,level:null,voltsReward:0},startSingleMode:t=>{i({gameState:{...a().gameState,mode:"single",isPlaying:!0,gameTime:0,score:0},singleMode:{...Z,difficulty:t}}),setTimeout(()=>{a().startAIElectrician()},3e3)},startMultiplayerMode:t=>{let s="multiplayer";t==="duel"&&(s="duel"),i({gameState:{...a().gameState,mode:s,isPlaying:!0,gameTime:0,score:0}}),console.log(`Starting multiplayer mode: ${t}`)},clickOutlet:()=>{const t=a(),s=Date.now(),r=s-t.singleMode.lastClickTime;let n="low";r<1e3?n="extreme":r<2e3?n="high":r<3e3&&(n="medium");const l=Math.min(100,t.singleMode.streakCount*2+(n==="extreme"?40:n==="high"?25:n==="medium"?15:5)+(t.player.luckCoefficient<30?20:0)),c=l>60;i({player:{...t.player,totalClicks:t.player.totalClicks+1},singleMode:{...t.singleMode,lastClickTime:s,currentRisk:n,dangerLevel:l,warningSignsActive:c}}),a().updateLuckCoefficient()},updateScore:t=>{const s=a(),r=s.gameState.score+t.totalPoints,n=s.player.volts+t.totalPoints,l=t.reason!=="–ü–æ—Ä–∞–∂–µ–Ω–∏–µ —Ç–æ–∫–æ–º",c=l?s.player.streak+1:0,u=l?s.singleMode.streakCount+1:0;let h=0;l?(h=F.SAFE_CLICK,t.riskMultiplier>=2&&(h=F.RISKY_CLICK),t.riskMultiplier>=3&&(h=F.EXTREME_CLICK),c===5&&(h+=F.STREAK_5),c===10&&(h+=F.STREAK_10),c===25&&(h+=F.STREAK_25),c===50&&(h+=F.STREAK_50)):h=F.SHOCK_SURVIVAL;const d=l?s.player.successfulClicks+1:s.player.successfulClicks,g=l?s.player.shockedClicks:s.player.shockedClicks+1,f=d+g,p=f>0?Math.round(d/f*100):50;i({gameState:{...s.gameState,score:r},player:{...s.player,volts:n,streak:c,successfulClicks:d,shockedClicks:g,luckCoefficient:p},singleMode:{...s.singleMode,streakCount:u}});const{addExperience:m}=a();m(h);const{unlockAchievement:v}=a();s.player.totalClicks===0&&v("first_click"),c===5&&v("survivor_5"),c===10&&v("survivor_10"),c===25&&v("survivor_25")},calculateShockImpact:t=>{let s,r,n,l;t<50?(s=Math.floor(t*.1)+1,r="mild",n=1e3,l=2e3):t<150?(s=Math.floor(t*.15)+5,r="moderate",n=1500,l=3e3):t<300?(s=Math.floor(t*.2)+10,r="severe",n=2e3,l=5e3):(s=Math.floor(t*.25)+20,r="critical",n=3e3,l=8e3);const c=Math.floor(t*.7);return{damage:s,voltsDrained:c,duration:n,severity:r,luckHideDuration:l}},triggerShock:()=>{const t=a();if(!t.gameState.isPlaying)return;const s=t.calculateShockImpact(t.player.volts);i({player:{...t.player,volts:Math.max(0,t.player.volts-s.voltsDrained),shockedClicks:t.player.shockedClicks+1,totalClicks:t.player.totalClicks+1,streak:0,luckIndicatorHidden:!0,luckHiddenUntil:Date.now()+s.luckHideDuration},showElectricSparks:!0,sparksIntensity:s.severity==="critical"?"extreme":s.severity==="severe"?"high":s.severity==="moderate"?"medium":"low",showScreenShake:!0,gameState:{...t.gameState,score:Math.max(0,t.gameState.score-s.damage)},singleMode:{...t.singleMode,streakCount:0}}),setTimeout(()=>{i({showElectricSparks:!1,showScreenShake:!1})},s.duration),a().updateLuckCoefficient()},endGame:()=>{a().stopAIElectrician(),i({gameState:{...a().gameState,mode:"menu",isPlaying:!1}})},unlockAchievement:t=>{const s=a(),r=s.achievements.find(n=>n.id===t);r&&!r.completed&&i({achievements:s.achievements.map(n=>n.id===t?{...n,completed:!0,progress:n.requirement}:n),player:{...s.player,volts:s.player.volts+r.reward}})},updatePlayerStats:t=>{const s=a();i({player:{...s.player,...t}})},addExperience:t=>{const s=a(),r=s.player.experience+t,n=W(s.player.experience),l=W(r);if(l.level>n.level){const c=s.player.volts+l.voltsReward;i({player:{...s.player,experience:r,level:l.level,volts:c}});const{showLevelUpNotification:u}=a();u(l,l.voltsReward)}else i({player:{...s.player,experience:r}})},getCurrentLevelInfo:()=>{const t=a();return{currentLevel:W(t.player.experience),progressInfo:oe(t.player.experience)}},showLevelUpNotification:(t,s)=>{i({levelUpNotification:{isVisible:!0,level:t,voltsReward:s}})},hideLevelUpNotification:()=>{i({levelUpNotification:{isVisible:!1,level:null,voltsReward:0}})},updateLuckCoefficient:()=>{const t=a(),s=t.player.totalClicks,r=t.player.successfulClicks,n=s>0?Math.round(r/s*100):50,l=t.player.luckIndicatorHidden&&Date.now()>=t.player.luckHiddenUntil;i({player:{...t.player,luckCoefficient:n,luckIndicatorHidden:l?!1:t.player.luckIndicatorHidden}})},startAIElectrician:()=>{const t=a();if(!t.gameState.isPlaying)return;i({singleMode:{...t.singleMode,aiElectricianActive:!0},aiElectrician:{...t.aiElectrician,isActive:!0,lastMessage:a().getAIElectricianMessage(),messageTime:Date.now()}});const s=setInterval(()=>{const r=a();if(!r.singleMode.aiElectricianActive||!r.gameState.isPlaying){clearInterval(s);return}a().updateAIElectrician(),Math.random()<.3&&i({aiElectrician:{...a().aiElectrician,lastMessage:a().getAIElectricianMessage(),messageTime:Date.now()}})},2e3);a().scheduleNextDischarge()},stopAIElectrician:()=>{i(t=>({singleMode:{...t.singleMode,aiElectricianActive:!1,nextDischargeTime:0,dischargeWarningTime:0,isDischarging:!1},aiElectrician:{...t.aiElectrician,isActive:!1,lastMessage:"–°–º–µ–Ω–∞ –∑–∞–∫–æ–Ω—á–µ–Ω–∞, –∏–¥—É –¥–æ–º–æ–π!",messageTime:Date.now()}}))},scheduleNextDischarge:()=>{const t=a();if(!t.singleMode.aiElectricianActive)return;const s=Date.now(),n=(()=>{const u={easy:{min:8e3,max:15e3},medium:{min:6e3,max:12e3},hard:{min:4e3,max:9e3},extreme:{min:3e3,max:7e3}}[t.singleMode.difficulty];let h=1;if(t.singleMode.aiPattern==="burst")h=.7;else if(t.singleMode.aiPattern==="random")h=Math.random()*.8+.6;else if(t.singleMode.aiPattern==="adaptive"){const f=t.player.luckCoefficient;h=f>70?.8:f<30?1.3:1}const d=u.min*h,g=u.max*h;return Math.random()*(g-d)+d})(),l=s+n,c=l-3e3;i({singleMode:{...t.singleMode,nextDischargeTime:l,dischargeWarningTime:c}}),setTimeout(()=>{a().checkForDischarge()},n)},checkForDischarge:()=>{const t=a();if(!t.singleMode.aiElectricianActive||!t.gameState.isPlaying)return;const s=Date.now();!t.singleMode.warningSignsActive&&s>=t.singleMode.dischargeWarningTime&&i({singleMode:{...t.singleMode,warningSignsActive:!0,dangerLevel:85}}),s>=t.singleMode.nextDischargeTime&&!t.singleMode.isDischarging&&(i({singleMode:{...t.singleMode,isDischarging:!0},showElectricSparks:!0,sparksIntensity:"high"}),i({aiElectrician:{...t.aiElectrician,successfulDischarges:t.aiElectrician.successfulDischarges+1,lastMessage:"–û—Ç–ª–∏—á–Ω—ã–π —Ä–∞–∑—Ä—è–¥! –í—Å–µ –ø–æ –ø–ª–∞–Ω—É!",messageTime:s}}),Math.random()<.3&&a().damageAIElectrician("equipment",Math.random()*5+2),setTimeout(()=>{const r=a();i({singleMode:{...r.singleMode,isDischarging:!1,warningSignsActive:!1,dangerLevel:0},showElectricSparks:!1}),a().updateAIElectrician(),a().aiElectrician.canWork?a().scheduleNextDischarge():(i({aiElectrician:{...a().aiElectrician,lastMessage:a().getAIElectricianMessage(),messageTime:Date.now()}}),a().stopAIElectrician())},t.singleMode.dischargeDuration))},updateAIElectrician:()=>{const t=a();if(!t.aiElectrician.isActive)return;const s=t.aiElectrician,r=s.workingEfficiency>80?.1:.2,n=Math.max(0,s.energy-r),l=Math.random()*.05,c={battery:Math.max(0,s.equipment.battery-l),capacitor:Math.max(0,s.equipment.capacitor-l*.5),wires:Math.max(0,s.equipment.wires-l*.3),generator:Math.max(0,s.equipment.generator-l*.7)},u=(c.battery+c.capacitor+c.wires+c.generator)/4,h=Math.min(100,n*.7+u*.3);let d=s.mood;h<20?d="broken":h<40?d="tired":s.failuresCount>s.successfulDischarges?d="frustrated":h>80?d="confident":d="angry";const g=n>10&&u>15;i({aiElectrician:{...s,energy:n,equipment:c,workingEfficiency:h,mood:d,canWork:g}})},damageAIElectrician:(t,s=10)=>{const n=a().aiElectrician;if(t==="energy"){const l=Math.max(0,n.energy-s);i({aiElectrician:{...n,energy:l,failuresCount:n.failuresCount+1,lastMessage:l<=0?"–≠–Ω–µ—Ä–≥–∏—è –∫–æ–Ω—á–∏–ª–∞—Å—å! –ù—É–∂–µ–Ω –æ—Ç–¥—ã—Ö...":"–ê—É—á! –ú–µ–Ω—è —É–¥–∞—Ä–∏–ª–æ —Ç–æ–∫–æ–º!",messageTime:Date.now()}})}else{const l=["battery","capacitor","wires","generator"],c=l[Math.floor(Math.random()*l.length)],u={...n.equipment,[c]:Math.max(0,n.equipment[c]-s)};i({aiElectrician:{...n,equipment:u,failuresCount:n.failuresCount+1,lastMessage:`–°–ª–æ–º–∞–ª—Å—è ${c==="battery"?"–∞–∫–∫—É–º—É–ª—è—Ç–æ—Ä":c==="capacitor"?"–∫–æ–Ω–¥–µ–Ω—Å–∞—Ç–æ—Ä":c==="wires"?"–ø—Ä–æ–≤–æ–¥–∞":"–≥–µ–Ω–µ—Ä–∞—Ç–æ—Ä"}!`,messageTime:Date.now()}})}a().updateAIElectrician()},repairAIElectrician:t=>{const r=a().aiElectrician;if(t==="energy"){const n=Math.min(r.maxEnergy,r.energy+25),l=["–°–ø–∞—Å–∏–±–æ! –ß—É–≤—Å—Ç–≤—É—é –ø—Ä–∏–ª–∏–≤ —Å–∏–ª!","–û—Ç–ª–∏—á–Ω–æ! –¢–µ–ø–µ—Ä—å —è –º–æ–≥—É —Ä–∞–±–æ—Ç–∞—Ç—å –¥–æ–ª—å—à–µ!","–≠–Ω–µ—Ä–≥–∏—è –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∞! –ì–æ—Ç–æ–≤ –∫ —Ä–∞–±–æ—Ç–µ!","–í–∞—É! –ö–∞–∫ –±—É–¥—Ç–æ –∑–∞–Ω–æ–≤–æ —Ä–æ–¥–∏–ª—Å—è!"];i({aiElectrician:{...r,energy:n,lastMessage:l[Math.floor(Math.random()*l.length)],messageTime:Date.now()}})}else{const n={battery:Math.min(100,r.equipment.battery+20),capacitor:Math.min(100,r.equipment.capacitor+20),wires:Math.min(100,r.equipment.wires+20),generator:Math.min(100,r.equipment.generator+20)},l=["–û—Ç—Ä–µ–º–æ–Ω—Ç–∏—Ä–æ–≤–∞–ª –æ–±–æ—Ä—É–¥–æ–≤–∞–Ω–∏–µ, —Ç–µ–ø–µ—Ä—å —Ä–∞–±–æ—Ç–∞–µ—Ç –ª—É—á—à–µ!","–¢–µ—Ö–Ω–∏–∫–∞ –∫–∞–∫ –Ω–æ–≤–∞—è! –°–ø–∞—Å–∏–±–æ –∑–∞ –ø–æ–º–æ—â—å!","–í—Å–µ –¥–µ—Ç–∞–ª–∏ –∑–∞–º–µ–Ω–µ–Ω—ã, –º–æ–∂–Ω–æ –ø—Ä–æ–¥–æ–ª–∂–∞—Ç—å!","–û–±–æ—Ä—É–¥–æ–≤–∞–Ω–∏–µ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–æ! –¢–µ–ø–µ—Ä—å –≤—Å–µ –±—É–¥–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å!"];i({aiElectrician:{...r,equipment:n,lastMessage:l[Math.floor(Math.random()*l.length)],messageTime:Date.now()}})}a().updateAIElectrician()},getAIElectricianMessage:()=>{const s=a().aiElectrician,r={confident:["–Ø –ª—É—á—à–∏–π —ç–ª–µ–∫—Ç—Ä–∏–∫ –≤ –≥–æ—Ä–æ–¥–µ!","–≠—Ç–∞ —Ä–∞–±–æ—Ç–∞ –º–Ω–µ –ø–æ –ø–ª–µ—á—É!","–ù–∏–∫—Ç–æ –Ω–µ —Å–ø—Ä–∞–≤–∏—Ç—Å—è –ª—É—á—à–µ –º–µ–Ω—è!","–£ –º–µ–Ω—è –∑–æ–ª–æ—Ç—ã–µ —Ä—É–∫–∏!","–≠–ª–µ–∫—Ç—Ä–∏—á–µ—Å—Ç–≤–æ - –º–æ—è —Å—Ç–∏—Ö–∏—è!","–Ø –∑–Ω–∞—é –≤—Å–µ –æ —Ç–æ–∫–µ –∏ –Ω–∞–ø—Ä—è–∂–µ–Ω–∏–∏!","–†–æ–∑–µ—Ç–∫–∏ —Ç—Ä–µ–ø–µ—â—É—Ç –æ—Ç –º–æ–µ–≥–æ –º–∞—Å—Ç–µ—Ä—Å—Ç–≤–∞!"],frustrated:["–ß—Ç–æ-—Ç–æ —Å–µ–≥–æ–¥–Ω—è –Ω–µ –º–æ–π –¥–µ–Ω—å...","–¢–µ—Ö–Ω–∏–∫–∞ –ø–æ–¥–≤–æ–¥–∏—Ç, –∫–∞–∫ –≤—Å–µ–≥–¥–∞...","–ú–æ–∂–µ—Ç –±—ã—Ç—å, —Å—Ç–æ–∏—Ç —Å–º–µ–Ω–∏—Ç—å –ø—Ä–æ—Ñ–µ—Å—Å–∏—é?","–û–ø—è—Ç—å —á—Ç–æ-—Ç–æ –ø–æ—à–ª–æ –Ω–µ —Ç–∞–∫!","–ü–æ—á–µ–º—É –Ω–∏—á–µ–≥–æ –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–∞–∫ –Ω–∞–¥–æ?","–ö—Ç–æ –≤–æ–æ–±—â–µ –ø—Ä–æ–µ–∫—Ç–∏—Ä–æ–≤–∞–ª —ç—Ç—É —Å—Ö–µ–º—É?!","–ö–∞–∂–¥—ã–π –¥–µ–Ω—å –æ–¥–Ω–∏ –ø—Ä–æ–±–ª–µ–º—ã..."],tired:["–£—Å—Ç–∞–ª —è —É–∂–µ...","–ù—É–∂–µ–Ω –ø–µ—Ä–µ—Ä—ã–≤ –Ω–∞ –∫–æ—Ñ–µ","–°–∏–ª –±–æ–ª—å—à–µ –Ω–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å","–•–æ—á–µ—Ç—Å—è –¥–æ–º–æ–π...","–†–∞–±–æ—á–∏–π –¥–µ–Ω—å —Å–ª–∏—à–∫–æ–º –¥–ª–∏–Ω–Ω—ã–π","–ì–ª–∞–∑–∞ —É–∂–µ —Å–ª–∏–ø–∞—é—Ç—Å—è","–ú–æ–∂–µ—Ç, —Ö–≤–∞—Ç–∏—Ç –Ω–∞ —Å–µ–≥–æ–¥–Ω—è?"],broken:["–í—Å–µ —Å–ª–æ–º–∞–ª–æ—Å—å! –ù–∏—á–µ–≥–æ –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç!","–≠—Ç–æ –∫–æ–Ω–µ—Ü! –Ø –±–æ–ª—å—à–µ –Ω–µ –º–æ–≥—É!","–í—ã–∑—ã–≤–∞–π—Ç–µ –¥—Ä—É–≥–æ–≥–æ —ç–ª–µ–∫—Ç—Ä–∏–∫–∞...","–¢–µ—Ö–Ω–∏–∫–∞ –≤ —Ö–ª–∞–º, –∞ —è –±–µ–∑ —Å–∏–ª!","–ê–≤–∞—Ä–∏–π–Ω–æ–µ –æ—Ç–∫–ª—é—á–µ–Ω–∏–µ! –í—Å–µ –ø—Ä–æ–ø–∞–ª–æ!","–°–∏—Å—Ç–µ–º–Ω—ã–π —Å–±–æ–π! –ü–æ–º–æ–≥–∏—Ç–µ!","–Ø —Å–ª–æ–º–∞–ª—Å—è –∫–∞–∫ —Å—Ç–∞—Ä–∞—è –ª–∞–º–ø–æ—á–∫–∞!"],angry:["–î–∞ —á—Ç–æ –∂ —Ç–∞–∫–æ–µ?! –û–ø—è—Ç—å —Å–±–æ–π!","–ö—Ç–æ –ø—Ä–æ–µ–∫—Ç–∏—Ä–æ–≤–∞–ª —ç—Ç—É —Å—Ö–µ–º—É?!","–†—É–∫–∏ –±—ã –ø–æ–æ—Ç—Ä—ã–≤–∞—Ç—å —Å–æ–∑–¥–∞—Ç–µ–ª—è–º!","–ù–µ—Ä–≤—ã —É–∂–µ –Ω–∞ –ø—Ä–µ–¥–µ–ª–µ!","–°–∫–æ–ª—å–∫–æ –º–æ–∂–Ω–æ —Ç–µ—Ä–ø–µ—Ç—å —ç—Ç—É –µ—Ä—É–Ω–¥—É?!","–ì–¥–µ –º–æ–π –º–æ–ª–æ—Ç–æ–∫?! –°–µ–π—á–∞—Å –≤—Å–µ –∏—Å–ø—Ä–∞–≤–ª—é!","–ü—Ä–æ—Ç–∏–≤–Ω–∞—è —Ç–µ—Ö–Ω–∏–∫–∞! –ù–µ–Ω–∞–≤–∏–∂—É!","–õ—É—á—à–µ –±—ã –ø–æ—à–µ–ª –≤ –ø—Ä–æ–≥—Ä–∞–º–º–∏—Å—Ç—ã!"]},n=r[s.mood]||r.confident;return n[Math.floor(Math.random()*n.length)]},submitGameToServer:async()=>{const t=a();if(!$.isAuthenticated())return console.warn("User not authenticated, skipping server submission"),{success:!1,error:"Not authenticated"};try{const s={score:t.gameState.score,level:Ke(t.singleMode.difficulty),timePlayed:Math.floor(t.gameState.gameTime/1e3)};console.log("Submitting game data to server:",s);const r=await $.submitScore(s);if(r.error)return console.error("Failed to submit score:",r.error),{success:!1,error:r.error};if(r.data){const n=r.data;if(i({player:{...t.player,volts:n.totalVolts,experience:n.totalExperience,level:n.newLevel}}),n.leveledUp){const{showLevelUpNotification:l}=a();l({level:n.newLevel},n.levelUpReward)}return console.log("Successfully submitted score and synced with server"),{success:!0}}return{success:!0}}catch(s){const r=s instanceof Error?s.message:"Unknown error";return console.error("Error submitting game to server:",r),{success:!1,error:r}}},syncWithServer:async()=>{if(!$.isAuthenticated())return{success:!1,error:"Not authenticated"};try{const t=await $.getUserStats();if(t.error)return{success:!1,error:t.error};if(t.data){const s=t.data;return i({player:{...a().player,volts:s.totalVolts,experience:s.totalExperience,level:s.level}}),console.log("Successfully synced with server"),{success:!0}}return{success:!0}}catch(t){const s=t instanceof Error?t.message:"Unknown error";return console.error("Error syncing with server:",s),{success:!1,error:s}}},loadStatsFromServer:async()=>{if(!$.isAuthenticated())return{success:!1,error:"Not authenticated"};try{const t=await $.getUserStats();if(t.error)return{success:!1,error:t.error};if(t.data){const s=t.data;return i({player:{...a().player,volts:s.totalVolts,experience:s.totalExperience,level:s.level}}),console.log("Successfully loaded stats from server"),{success:!0}}return{success:!0}}catch(t){const s=t instanceof Error?t.message:"Unknown error";return console.error("Error loading stats from server:",s),{success:!1,error:s}}}}));function Ke(i){switch(i){case"easy":return 1;case"medium":return 2;case"hard":return 3;case"extreme":return 4;default:return 1}}class Ye{constructor(){D(this,"hapticFeedback",null);D(this,"isEnabled",!0);D(this,"isTelegramEnvironment",!1);this.initializeTelegramHaptics()}initializeTelegramHaptics(){var a;try{if(typeof window<"u"&&((a=window.Telegram)!=null&&a.WebApp)){this.isTelegramEnvironment=!0;const t=window.Telegram.WebApp;t.HapticFeedback?(this.hapticFeedback=t.HapticFeedback,console.log("Telegram Haptic Feedback initialized")):console.log("HapticFeedback not available in this Telegram version")}else console.log("Not in Telegram environment, haptics disabled")}catch(t){console.warn("Failed to initialize Telegram haptics:",t)}}setEnabled(a){this.isEnabled=a}isAvailable(){return(this.isTelegramEnvironment&&this.hapticFeedback!==null||typeof window<"u"&&"navigator"in window&&"vibrate"in navigator)&&this.isEnabled}light(){this.isAvailable()?this.hapticFeedback.impactOccurred("light"):this.fallbackVibration(50)}medium(){this.isAvailable()?this.hapticFeedback.impactOccurred("medium"):this.fallbackVibration(100)}heavy(){this.isAvailable()?this.hapticFeedback.impactOccurred("heavy"):this.fallbackVibration(150)}soft(){this.isAvailable()?this.hapticFeedback.impactOccurred("soft"):this.fallbackVibration(30)}rigid(){this.isAvailable()?this.hapticFeedback.impactOccurred("rigid"):this.fallbackVibration(200)}success(){this.isAvailable()?this.hapticFeedback.notificationOccurred("success"):this.customPattern([100,50,100])}error(){this.isAvailable()?this.hapticFeedback.notificationOccurred("error"):this.customPattern([200,100,200,100,200])}warning(){this.isAvailable()?this.hapticFeedback.notificationOccurred("warning"):this.customPattern([150,50,150])}selection(){this.isAvailable()?this.hapticFeedback.selectionChanged():this.fallbackVibration(25)}outletPress(){this.medium()}survivalSuccess(){this.success()}electricShock(){this.isEnabled&&(this.rigid(),setTimeout(()=>{this.isEnabled&&this.heavy()},50))}electricWarning(){this.isEnabled&&(this.light(),setTimeout(()=>{this.isEnabled&&this.light()},100))}levelUp(){this.success(),setTimeout(()=>this.medium(),150),setTimeout(()=>this.success(),300)}dangerWarning(){this.isEnabled&&(this.light(),setTimeout(()=>{this.isEnabled&&this.light()},100))}extremeDangerWarning(){this.isEnabled&&(this.light(),setTimeout(()=>{this.isEnabled&&this.medium()},150),setTimeout(()=>{this.isEnabled&&this.heavy()},300))}rewardReceived(){this.light(),setTimeout(()=>this.medium(),100)}streakAchievement(a){a>=25?(this.heavy(),setTimeout(()=>this.heavy(),200),setTimeout(()=>this.heavy(),400)):a>=10?(this.medium(),setTimeout(()=>this.medium(),150)):a>=5&&(this.light(),setTimeout(()=>this.light(),100))}itemUsed(){this.soft()}shopPurchase(){this.medium(),setTimeout(()=>this.light(),100)}gameInvitation(){this.warning(),setTimeout(()=>this.light(),500),setTimeout(()=>this.light(),1e3)}roundStart(){this.light()}gameEnd(a){a?(this.success(),setTimeout(()=>this.medium(),200),setTimeout(()=>this.success(),400)):this.error()}fallbackVibration(a){if("navigator"in window&&"vibrate"in navigator)try{navigator.vibrate(a),console.log(`üîπ Fallback vibration: ${a}ms`)}catch(t){console.warn("Vibration not supported:",t)}else console.log(`üì≥ Haptic feedback: ${a}ms (visual only)`),this.visualFeedback(a)}visualFeedback(a){const t=document.createElement("div");if(t.style.cssText=`
      position: fixed;
      top: 20px;
      right: 20px;
      background: #FF6B35;
      color: white;
      padding: 8px 12px;
      border-radius: 20px;
      font-size: 12px;
      font-weight: bold;
      z-index: 10000;
      pointer-events: none;
      animation: pulse 0.3s ease-in-out;
    `,t.textContent=`üì≥ ${a}ms`,!document.querySelector("#haptic-style")){const s=document.createElement("style");s.id="haptic-style",s.textContent=`
        @keyframes pulse {
          0% { transform: scale(0.8); opacity: 0; }
          50% { transform: scale(1.1); opacity: 1; }
          100% { transform: scale(1); opacity: 0.8; }
        }
      `,document.head.appendChild(s)}document.body.appendChild(t),setTimeout(()=>{t.parentNode&&t.parentNode.removeChild(t)},Math.max(a,500))}customPattern(a){if("navigator"in window&&"vibrate"in navigator)try{navigator.vibrate(a),console.log(`üîπ Vibration pattern: [${a.join(", ")}]ms`)}catch(t){console.warn("Vibration pattern not supported:",t)}else console.log(`üì≥ Haptic pattern: [${a.join(", ")}]ms (visual only)`),this.visualPatternFeedback(a)}visualPatternFeedback(a){let t=0;for(let s=0;s<a.length;s+=2){const r=a[s],n=a[s+1]||0;setTimeout(()=>{this.visualFeedback(r)},t),t+=r+n}}test(){this.medium(),setTimeout(()=>this.light(),200),setTimeout(()=>this.heavy(),400)}}const b=new Ye,Xe=({onClose:i})=>{const{player:a,singleMode:t,gameState:s}=T();return e.jsx(o.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/80 flex items-center justify-center p-4 z-50",onClick:i,children:e.jsxs(o.div,{initial:{opacity:0,y:20,scale:.9},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:20,scale:.9},className:"glass-effect p-6 max-w-2xl mx-auto relative max-h-[90vh] overflow-y-auto",onClick:r=>r.stopPropagation(),children:[e.jsx("button",{onClick:i,className:"absolute top-4 right-4 text-gray-400 hover:text-white transition-colors text-2xl",children:"‚úï"}),e.jsx("h3",{className:"text-2xl font-bold text-center mb-6 text-primary-orange",children:"üìä –°–∏—Å—Ç–µ–º–∞ –æ—á–∫–æ–≤ –∏ —É—Ä–æ–≤–Ω–µ–π"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-6",children:[e.jsxs("div",{className:"text-center glass-effect p-3 rounded-lg",children:[e.jsx("div",{className:"text-xs text-gray-400",children:"–¢–ï–ö–£–©–ê–Ø –°–ï–†–ò–Ø"}),e.jsx("div",{className:"text-xl font-bold text-yellow-400",children:t.streakCount})]}),e.jsxs("div",{className:"text-center glass-effect p-3 rounded-lg",children:[e.jsx("div",{className:"text-xs text-gray-400",children:"–ö–û–≠–§–§–ò–¶–ò–ï–ù–¢ –£–î–ê–ß–ò"}),e.jsxs("div",{className:`text-xl font-bold ${a.luckCoefficient>=70?"text-green-400":a.luckCoefficient>=50?"text-yellow-400":a.luckCoefficient>=30?"text-orange-400":"text-red-400"}`,children:[a.luckCoefficient,"%"]})]}),e.jsxs("div",{className:"text-center glass-effect p-3 rounded-lg",children:[e.jsx("div",{className:"text-xs text-gray-400",children:"–¢–ï–ö–£–©–ò–ô –°–ß–ï–¢"}),e.jsxs("div",{className:"text-xl font-bold text-green-400",children:[s.score,"‚ö°"]})]}),e.jsxs("div",{className:"text-center glass-effect p-3 rounded-lg",children:[e.jsx("div",{className:"text-xs text-gray-400",children:"–í–°–ï–ì–û –í–û–õ–¨–¢"}),e.jsxs("div",{className:"text-xl font-bold text-blue-400",children:[a.volts,"‚ö°"]})]})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("h4",{className:"text-lg font-bold text-accent-blue mb-3",children:"üçÄ –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ —É–¥–∞—á–∏"}),e.jsxs("div",{className:"grid grid-cols-3 gap-3",children:[e.jsxs("div",{className:"glass-effect p-3 rounded-lg text-center",children:[e.jsx("div",{className:"text-xs text-gray-400",children:"–£–°–ü–ï–®–ù–´–•"}),e.jsx("div",{className:"text-lg font-bold text-green-400",children:a.successfulClicks})]}),e.jsxs("div",{className:"glass-effect p-3 rounded-lg text-center",children:[e.jsx("div",{className:"text-xs text-gray-400",children:"–£–î–ê–†–û–í –¢–û–ö–û–ú"}),e.jsx("div",{className:"text-lg font-bold text-red-400",children:a.shockedClicks})]}),e.jsxs("div",{className:"glass-effect p-3 rounded-lg text-center",children:[e.jsx("div",{className:"text-xs text-gray-400",children:"–í–°–ï–ì–û –ö–õ–ò–ö–û–í"}),e.jsx("div",{className:"text-lg font-bold text-blue-400",children:a.totalClicks})]})]}),e.jsx("div",{className:"mt-3 text-center",children:e.jsx("div",{className:"text-sm text-gray-300",children:"üí° –£–¥–∞—á–∞ —Ä–∞—Å—Å—á–∏—Ç—ã–≤–∞–µ—Ç—Å—è –∫–∞–∫ –ø—Ä–æ—Ü–µ–Ω—Ç —É—Å–ø–µ—à–Ω—ã—Ö –Ω–∞–∂–∞—Ç–∏–π"})})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"text-lg font-bold text-accent-blue mb-3",children:"üìà –°–∏—Å—Ç–µ–º–∞ –æ–ø—ã—Ç–∞ –∏ —É—Ä–æ–≤–Ω–µ–π"}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{className:"glass-effect p-3 rounded-lg",children:[e.jsx("div",{className:"text-green-400 font-bold",children:"üü¢ –ë–µ–∑–æ–ø–∞—Å–Ω–æ–µ –Ω–∞–∂–∞—Ç–∏–µ:"}),e.jsx("div",{className:"text-sm text-gray-300",children:"+10 –æ–ø—ã—Ç–∞"})]}),e.jsxs("div",{className:"glass-effect p-3 rounded-lg",children:[e.jsx("div",{className:"text-yellow-400 font-bold",children:"üü° –†–∏—Å–∫–æ–≤–∞–Ω–Ω–æ–µ (2x+):"}),e.jsx("div",{className:"text-sm text-gray-300",children:"+15 –æ–ø—ã—Ç–∞"})]}),e.jsxs("div",{className:"glass-effect p-3 rounded-lg",children:[e.jsx("div",{className:"text-red-400 font-bold",children:"üî¥ –≠–∫—Å—Ç—Ä–µ–º–∞–ª—å–Ω–æ–µ (3x+):"}),e.jsx("div",{className:"text-sm text-gray-300",children:"+25 –æ–ø—ã—Ç–∞"})]}),e.jsxs("div",{className:"glass-effect p-3 rounded-lg",children:[e.jsx("div",{className:"text-orange-400 font-bold",children:"üí• –ü–æ—Ä–∞–∂–µ–Ω–∏–µ —Ç–æ–∫–æ–º:"}),e.jsx("div",{className:"text-sm text-gray-300",children:"+5 –æ–ø—ã—Ç–∞"})]})]}),e.jsxs("div",{className:"mt-3 text-center",children:[e.jsx("div",{className:"text-sm text-yellow-400 font-semibold",children:"üèÜ –ó–∞ –ø–æ–≤—ã—à–µ–Ω–∏–µ —É—Ä–æ–≤–Ω—è –≤—ã –ø–æ–ª—É—á–∞–µ—Ç–µ –±–æ–Ω—É—Å–Ω—ã–µ –≤–æ–ª—å—Ç—ã!"}),e.jsx("div",{className:"text-xs text-gray-400 mt-1",children:"–£—Ä–æ–≤–µ–Ω—å 2: +50‚ö° ‚Ä¢ –£—Ä–æ–≤–µ–Ω—å 5: +150‚ö° ‚Ä¢ –£—Ä–æ–≤–µ–Ω—å 10: +500‚ö°"}),e.jsx("div",{className:"text-xs text-blue-300 mt-2",children:"üé® –ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Ä–æ–∑–µ—Ç–∫–∏ –º–µ–Ω—è–µ—Ç—Å—è –∫–∞–∂–¥—ã–µ 5 —É—Ä–æ–≤–Ω–µ–π!"})]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-lg font-bold text-accent-blue mb-3",children:"‚ö° –ë–∞–∑–æ–≤—ã–µ –æ—á–∫–∏ –∑–∞ –Ω–∞–∂–∞—Ç–∏–µ"}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{className:"glass-effect p-3 rounded-lg",children:[e.jsx("div",{className:"text-green-400 font-bold",children:"üü¢ –ë–µ–∑–æ–ø–∞—Å–Ω–æ–µ –Ω–∞–∂–∞—Ç–∏–µ:"}),e.jsx("div",{className:"text-sm text-gray-300",children:"+10‚ö° (–±–∞–∑–æ–≤—ã–µ –æ—á–∫–∏)"})]}),e.jsxs("div",{className:"glass-effect p-3 rounded-lg",children:[e.jsx("div",{className:"text-red-400 font-bold",children:"üí• –ü–æ—Ä–∞–∂–µ–Ω–∏–µ —Ç–æ–∫–æ–º:"}),e.jsx("div",{className:"text-sm text-gray-300",children:"-8‚ö° –¥–æ -25‚ö° (—Å–ª—É—á–∞–π–Ω–æ)"})]})]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-lg font-bold text-accent-blue mb-3",children:"üéØ –ú–Ω–æ–∂–∏—Ç–µ–ª–∏ –∑–∞ —Ä–∏—Å–∫"}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{className:"glass-effect p-3 rounded-lg",children:[e.jsx("div",{className:"text-green-400 font-bold",children:"üü¢ –õ—ë–≥–∫–∏–π (15% —Ä–∏—Å–∫):"}),e.jsx("div",{className:"text-sm text-gray-300",children:"√ó1.0 (–±–∞–∑–æ–≤—ã–µ –æ—á–∫–∏)"})]}),e.jsxs("div",{className:"glass-effect p-3 rounded-lg",children:[e.jsx("div",{className:"text-yellow-400 font-bold",children:"üü° –°—Ä–µ–¥–Ω–∏–π (25% —Ä–∏—Å–∫):"}),e.jsx("div",{className:"text-sm text-gray-300",children:"√ó1.5 –º–Ω–æ–∂–∏—Ç–µ–ª—å"})]}),e.jsxs("div",{className:"glass-effect p-3 rounded-lg",children:[e.jsx("div",{className:"text-orange-400 font-bold",children:"üü† –°–ª–æ–∂–Ω—ã–π (35% —Ä–∏—Å–∫):"}),e.jsx("div",{className:"text-sm text-gray-300",children:"√ó2.0 –º–Ω–æ–∂–∏—Ç–µ–ª—å"})]}),e.jsxs("div",{className:"glass-effect p-3 rounded-lg",children:[e.jsx("div",{className:"text-red-400 font-bold",children:"üî¥ –≠–∫—Å—Ç—Ä–∏–º (50% —Ä–∏—Å–∫):"}),e.jsx("div",{className:"text-sm text-gray-300",children:"√ó3.0 –º–Ω–æ–∂–∏—Ç–µ–ª—å"})]})]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-lg font-bold text-accent-blue mb-3",children:"üî• –ë–æ–Ω—É—Å—ã –∑–∞ —Å–µ—Ä–∏–∏"}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{className:"glass-effect p-3 rounded-lg",children:[e.jsx("div",{className:"text-gray-400 font-bold",children:"0-4 –Ω–∞–∂–∞—Ç–∏–π:"}),e.jsx("div",{className:"text-sm text-gray-300",children:"√ó1.0 (–±–µ–∑ –±–æ–Ω—É—Å–∞)"})]}),e.jsxs("div",{className:"glass-effect p-3 rounded-lg",children:[e.jsx("div",{className:"text-yellow-400 font-bold",children:"5+ –Ω–∞–∂–∞—Ç–∏–π:"}),e.jsx("div",{className:"text-sm text-gray-300",children:"√ó1.2 –±–æ–Ω—É—Å"})]}),e.jsxs("div",{className:"glass-effect p-3 rounded-lg",children:[e.jsx("div",{className:"text-orange-400 font-bold",children:"10+ –Ω–∞–∂–∞—Ç–∏–π:"}),e.jsx("div",{className:"text-sm text-gray-300",children:"√ó1.5 –±–æ–Ω—É—Å"})]}),e.jsxs("div",{className:"glass-effect p-3 rounded-lg",children:[e.jsx("div",{className:"text-red-400 font-bold",children:"25+ –Ω–∞–∂–∞—Ç–∏–π:"}),e.jsx("div",{className:"text-sm text-gray-300",children:"√ó2.0 –±–æ–Ω—É—Å"})]}),e.jsxs("div",{className:"glass-effect p-3 rounded-lg",children:[e.jsx("div",{className:"text-purple-400 font-bold",children:"50+ –Ω–∞–∂–∞—Ç–∏–π:"}),e.jsx("div",{className:"text-sm text-gray-300",children:"√ó3.0 –±–æ–Ω—É—Å"})]})]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-lg font-bold text-accent-blue mb-3",children:"üßÆ –§–æ—Ä–º—É–ª–∞ —Ä–∞—Å—á—ë—Ç–∞"}),e.jsx("div",{className:"glass-effect p-4 rounded-lg bg-gradient-to-r from-blue-500/10 to-purple-500/10",children:e.jsxs("div",{className:"text-center text-lg font-mono",children:[e.jsx("span",{className:"text-white",children:"–ò—Ç–æ–≥–æ–≤—ã–µ –æ—á–∫–∏"})," =",e.jsx("span",{className:"text-green-400",children:" 10‚ö°"})," √ó",e.jsx("span",{className:"text-orange-400",children:" –†–∏—Å–∫"})," √ó",e.jsx("span",{className:"text-yellow-400",children:" –°–µ—Ä–∏—è"})]})})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-lg font-bold text-accent-blue mb-3",children:"üí° –ü—Ä–∏–º–µ—Ä—ã —Ä–∞—Å—á—ë—Ç–æ–≤"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"bg-black/30 p-3 rounded-lg",children:[e.jsx("div",{className:"text-green-400 font-bold",children:"üü¢ –ë–µ–∑–æ–ø–∞—Å–Ω–∞—è –∏–≥—Ä–∞:"}),e.jsxs("div",{className:"text-sm text-gray-300",children:["10‚ö° √ó 1.0 (–Ω–∏–∑–∫–∏–π —Ä–∏—Å–∫) √ó 1.2 (5+ —Å–µ—Ä–∏—è) = ",e.jsx("span",{className:"text-white font-bold",children:"12‚ö°"})]})]}),e.jsxs("div",{className:"bg-black/30 p-3 rounded-lg",children:[e.jsx("div",{className:"text-orange-400 font-bold",children:"üü† –†–∏—Å–∫–æ–≤–∞–Ω–Ω–∞—è –∏–≥—Ä–∞:"}),e.jsxs("div",{className:"text-sm text-gray-300",children:["10‚ö° √ó 2.0 (–≤—ã—Å–æ–∫–∏–π —Ä–∏—Å–∫) √ó 1.5 (10+ —Å–µ—Ä–∏—è) = ",e.jsx("span",{className:"text-white font-bold",children:"30‚ö°"})]})]}),e.jsxs("div",{className:"bg-black/30 p-3 rounded-lg",children:[e.jsx("div",{className:"text-red-400 font-bold",children:"üî¥ –≠–∫—Å—Ç—Ä–µ–º–∞–ª—å–Ω–∞—è –∏–≥—Ä–∞:"}),e.jsxs("div",{className:"text-sm text-gray-300",children:["10‚ö° √ó 3.0 (—ç–∫—Å—Ç—Ä–∏–º —Ä–∏—Å–∫) √ó 2.0 (25+ —Å–µ—Ä–∏—è) = ",e.jsx("span",{className:"text-white font-bold",children:"60‚ö°"})]})]}),e.jsxs("div",{className:"bg-black/30 p-3 rounded-lg",children:[e.jsx("div",{className:"text-red-400 font-bold",children:"üí• –ü–æ—Ä–∞–∂–µ–Ω–∏–µ —Ç–æ–∫–æ–º:"}),e.jsxs("div",{className:"text-sm text-gray-300",children:["–°–ª—É—á–∞–π–Ω–æ –æ—Ç 8‚ö° –¥–æ 25‚ö° + ",e.jsx("span",{className:"text-red-400",children:"—Å–µ—Ä–∏—è —Å–±—Ä–∞—Å—ã–≤–∞–µ—Ç—Å—è"})]})]})]})]})]}),e.jsx("div",{className:"mt-6 text-center text-xs text-gray-400",children:"üí° –°–æ–≤–µ—Ç: –ë–∞–ª–∞–Ω—Å–∏—Ä—É–π—Ç–µ –º–µ–∂–¥—É —Ä–∏—Å–∫–æ–º –∏ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å—é –¥–ª—è –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–≥–æ –∑–∞—Ä–∞–±–æ—Ç–∫–∞!"})]})})},Je=()=>{const{player:i,getCurrentLevelInfo:a}=T(),{currentLevel:t,progressInfo:s}=a(),r=Be(i.experience),n=U(t.level),l=s.nextLevel?U(s.nextLevel.level):null,c=l&&l!==n;return e.jsxs("div",{className:"glass-effect p-4 rounded-xl space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("img",{src:U(t.level),alt:`–†–æ–∑–µ—Ç–∫–∞ —É—Ä–æ–≤–Ω—è ${t.level}`,className:"w-12 h-12 rounded-lg border-2 border-primary-orange shadow-lg"}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-gray-400 uppercase tracking-wide",children:"–£—Ä–æ–≤–µ–Ω—å"}),e.jsxs("div",{className:"flex items-baseline space-x-2",children:[e.jsx("span",{className:"text-2xl font-bold text-primary-orange",children:t.level}),e.jsx("span",{className:"text-sm text-gray-300",children:t.title})]})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("div",{className:"text-xs text-gray-400",children:"–û–ø—ã—Ç"}),e.jsx("div",{className:"text-lg font-bold text-accent-blue",children:i.experience.toLocaleString()})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between text-xs text-gray-400",children:[e.jsx("span",{children:s.current}),e.jsx("span",{children:s.nextLevel?`${s.remaining} –¥–æ ${s.nextLevel.level} —É—Ä–æ–≤–Ω—è`:"–ú–∞–∫—Å–∏–º—É–º"}),e.jsx("span",{children:s.required})]}),e.jsxs("div",{className:"relative w-full bg-gray-700 rounded-full h-2 overflow-hidden",children:[e.jsx(o.div,{className:"h-full bg-gradient-to-r from-accent-blue to-primary-orange rounded-full",initial:{width:0},animate:{width:`${r}%`},transition:{duration:.8,ease:"easeOut"}}),r>0&&e.jsx(o.div,{className:"absolute top-0 right-0 w-1 h-full bg-white opacity-80",style:{right:`${100-r}%`},animate:{opacity:[.8,.3,.8]},transition:{repeat:1/0,duration:1.5}})]})]}),e.jsx("div",{className:"text-xs text-gray-400 italic text-center",children:t.description}),s.nextLevel&&e.jsxs("div",{className:"text-center pt-2 border-t border-gray-600",children:[e.jsx("div",{className:"text-xs text-gray-500",children:"–°–ª–µ–¥—É—é—â–∏–π —É—Ä–æ–≤–µ–Ω—å"}),e.jsxs("div",{className:"text-sm",children:[e.jsx("span",{className:"text-accent-lime font-semibold",children:s.nextLevel.title}),e.jsx("span",{className:"text-gray-400",children:" ‚Ä¢ "}),e.jsxs("span",{className:"text-yellow-400",children:["+",s.nextLevel.voltsReward,"‚ö°"]})]}),c&&e.jsxs("div",{className:"flex items-center justify-center space-x-2 mt-2",children:[e.jsx("span",{className:"text-xs text-blue-300",children:"üé® –ù–æ–≤–∞—è —Ä–æ–∑–µ—Ç–∫–∞:"}),e.jsx("img",{src:l,alt:`–†–æ–∑–µ—Ç–∫–∞ —É—Ä–æ–≤–Ω—è ${s.nextLevel.level}`,className:"w-6 h-6 rounded border border-blue-400 shadow-sm"})]})]})]})},Qe=({isVisible:i,onClose:a})=>{const[t,s]=x.useState(!0),[r,n]=x.useState(null);x.useEffect(()=>{const u=localStorage.getItem("hapticEnabled");if(u!==null){const h=JSON.parse(u);s(h),b.setEnabled(h)}},[]);const l=()=>{const u=!t;s(u),b.setEnabled(u),localStorage.setItem("hapticEnabled",JSON.stringify(u)),u&&b.test()},c=(u,h)=>{n(u),h(),setTimeout(()=>n(null),500)};return i?e.jsx(o.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/80 flex items-center justify-center z-50 p-4",onClick:a,children:e.jsxs(o.div,{initial:{scale:.8,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.8,opacity:0},className:"bg-gradient-to-br from-gray-900 to-gray-800 rounded-2xl p-6 max-w-sm w-full border border-primary-orange/20",onClick:u=>u.stopPropagation(),children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h2",{className:"text-2xl font-bold text-primary-orange",children:"–í–∏–±—Ä–∞—Ü–∏—è"}),e.jsx("button",{onClick:a,className:"text-gray-400 hover:text-white text-2xl",children:"√ó"})]}),e.jsx("div",{className:"mb-6",children:e.jsxs("div",{className:"flex justify-between items-center p-4 bg-gray-800/50 rounded-xl",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-white",children:"–í–∫–ª—é—á–∏—Ç—å –≤–∏–±—Ä–∞—Ü–∏—é"}),e.jsx("p",{className:"text-sm text-gray-400",children:b.isAvailable()?"–ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è –≤–∞—à–∏–º —É—Å—Ç—Ä–æ–π—Å—Ç–≤–æ–º":"–ù–µ–¥–æ—Å—Ç—É–ø–Ω–æ –Ω–∞ –≤–∞—à–µ–º —É—Å—Ç—Ä–æ–π—Å—Ç–≤–µ"})]}),e.jsx(o.button,{onClick:l,className:`w-12 h-6 rounded-full p-1 transition-colors ${t?"bg-primary-orange":"bg-gray-600"}`,whileTap:{scale:.95},children:e.jsx(o.div,{className:"w-4 h-4 bg-white rounded-full",animate:{x:t?24:0},transition:{type:"spring",stiffness:500,damping:30}})})]})}),t&&e.jsxs("div",{className:"space-y-3",children:[e.jsx("h3",{className:"text-lg font-semibold text-white mb-3",children:"–¢–µ—Å—Ç –≤–∏–±—Ä–∞—Ü–∏–∏"}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("h4",{className:"text-sm font-medium text-gray-300",children:"–ò–≥—Ä–æ–≤—ã–µ —Å–æ–±—ã—Ç–∏—è"}),e.jsx(o.button,{onClick:()=>c("press",()=>b.outletPress()),className:`w-full p-3 rounded-lg border transition-colors ${r==="press"?"bg-blue-500/30 border-blue-400 text-blue-200":"bg-gray-700/50 border-gray-600 text-gray-300 hover:bg-gray-600/50"}`,whileHover:{scale:1.02},whileTap:{scale:.98},children:"üîå –ù–∞–∂–∞—Ç–∏–µ –Ω–∞ —Ä–æ–∑–µ—Ç–∫—É"}),e.jsx(o.button,{onClick:()=>c("success",()=>b.survivalSuccess()),className:`w-full p-3 rounded-lg border transition-colors ${r==="success"?"bg-green-500/30 border-green-400 text-green-200":"bg-gray-700/50 border-gray-600 text-gray-300 hover:bg-gray-600/50"}`,whileHover:{scale:1.02},whileTap:{scale:.98},children:"‚úÖ –£—Å–ø–µ—à–Ω–æ–µ –≤—ã–∂–∏–≤–∞–Ω–∏–µ"}),e.jsx(o.button,{onClick:()=>c("shock",()=>b.electricShock()),className:`w-full p-3 rounded-lg border transition-colors ${r==="shock"?"bg-red-500/30 border-red-400 text-red-200":"bg-gray-700/50 border-gray-600 text-gray-300 hover:bg-gray-600/50"}`,whileHover:{scale:1.02},whileTap:{scale:.98},children:"‚ö° –£–¥–∞—Ä —Ç–æ–∫–æ–º"}),e.jsx(o.button,{onClick:()=>c("levelup",()=>b.levelUp()),className:`w-full p-3 rounded-lg border transition-colors ${r==="levelup"?"bg-yellow-500/30 border-yellow-400 text-yellow-200":"bg-gray-700/50 border-gray-600 text-gray-300 hover:bg-gray-600/50"}`,whileHover:{scale:1.02},whileTap:{scale:.98},children:"üÜô –ü–æ–≤—ã—à–µ–Ω–∏–µ —É—Ä–æ–≤–Ω—è"})]}),e.jsxs("div",{className:"space-y-2 mt-4",children:[e.jsx("h4",{className:"text-sm font-medium text-gray-300",children:"–ò–Ω—Ç–µ–Ω—Å–∏–≤–Ω–æ—Å—Ç—å"}),e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsx(o.button,{onClick:()=>c("light",()=>b.light()),className:`p-2 rounded-lg border text-sm transition-colors ${r==="light"?"bg-gray-500/30 border-gray-400 text-gray-200":"bg-gray-700/50 border-gray-600 text-gray-300 hover:bg-gray-600/50"}`,whileHover:{scale:1.02},whileTap:{scale:.98},children:"–õ–µ–≥–∫–∞—è"}),e.jsx(o.button,{onClick:()=>c("medium",()=>b.medium()),className:`p-2 rounded-lg border text-sm transition-colors ${r==="medium"?"bg-gray-500/30 border-gray-400 text-gray-200":"bg-gray-700/50 border-gray-600 text-gray-300 hover:bg-gray-600/50"}`,whileHover:{scale:1.02},whileTap:{scale:.98},children:"–°—Ä–µ–¥–Ω—è—è"}),e.jsx(o.button,{onClick:()=>c("heavy",()=>b.heavy()),className:`p-2 rounded-lg border text-sm transition-colors ${r==="heavy"?"bg-gray-500/30 border-gray-400 text-gray-200":"bg-gray-700/50 border-gray-600 text-gray-300 hover:bg-gray-600/50"}`,whileHover:{scale:1.02},whileTap:{scale:.98},children:"–°–∏–ª—å–Ω–∞—è"}),e.jsx(o.button,{onClick:()=>c("rigid",()=>b.rigid()),className:`p-2 rounded-lg border text-sm transition-colors ${r==="rigid"?"bg-gray-500/30 border-gray-400 text-gray-200":"bg-gray-700/50 border-gray-600 text-gray-300 hover:bg-gray-600/50"}`,whileHover:{scale:1.02},whileTap:{scale:.98},children:"–†–µ–∑–∫–∞—è"})]})]})]}),e.jsx("div",{className:"mt-6 p-3 bg-blue-900/20 border border-blue-500/30 rounded-lg",children:e.jsx("p",{className:"text-xs text-blue-300 text-center",children:"üí° –í–∏–±—Ä–∞—Ü–∏—è –¥–æ—Å—Ç—É–ø–Ω–∞ —Ç–æ–ª—å–∫–æ –≤ Telegram Mini App –Ω–∞ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞—Ö"})})]})}):null},de=x.createContext({webApp:null,user:null,isInTelegram:!1,platform:"unknown",colorScheme:"dark"}),Ze=()=>x.useContext(de),et=({children:i})=>{const[a,t]=x.useState(null),[s,r]=x.useState(null),[n,l]=x.useState(!1),[c,u]=x.useState("unknown"),[h,d]=x.useState("dark");x.useEffect(()=>{var f,p,m;if(typeof window<"u"&&((f=window.Telegram)!=null&&f.WebApp)){const v=window.Telegram.WebApp;v.ready(),v.expand(),t(v),l(!0),u(v.platform||"unknown"),d(v.colorScheme||"dark"),(p=v.initDataUnsafe)!=null&&p.user&&(r(v.initDataUnsafe.user),console.log("Telegram user:",v.initDataUnsafe.user)),v.setHeaderColor("#000000"),v.setBackgroundColor("#000000"),v.disableClosingConfirmation(),console.log("Telegram WebApp initialized successfully"),v.ready(),v.expand(),console.log("Telegram WebApp Context initialized:",{platform:v.platform,colorScheme:v.colorScheme,user:(m=v.initDataUnsafe)==null?void 0:m.user,version:v.version})}},[]);const g={webApp:a,user:s,isInTelegram:n,platform:c,colorScheme:h};return e.jsx(de.Provider,{value:g,children:i})},tt=()=>{var r;const{user:i,isInTelegram:a,platform:t,colorScheme:s}=Ze();return a?e.jsx(o.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},className:"bg-gradient-to-r from-blue-900/20 to-purple-900/20 border border-blue-500/30 rounded-lg p-3 mb-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[i!=null&&i.photo_url?e.jsx("img",{src:i.photo_url,alt:"Avatar",className:"w-8 h-8 rounded-full border border-blue-400/50"}):e.jsx("div",{className:"w-8 h-8 bg-gradient-to-br from-blue-500 to-purple-600 rounded-full flex items-center justify-center",children:e.jsx("span",{className:"text-white text-sm font-bold",children:((r=i==null?void 0:i.first_name)==null?void 0:r[0])||"?"})}),e.jsxs("div",{children:[e.jsxs("div",{className:"text-sm font-medium text-white",children:[i==null?void 0:i.first_name," ",i==null?void 0:i.last_name,(i==null?void 0:i.is_premium)&&e.jsx("span",{className:"ml-1 text-yellow-400",children:"‚≠ê"})]}),e.jsxs("div",{className:"text-xs text-gray-400",children:["@",(i==null?void 0:i.username)||"no_username"," ‚Ä¢ ",t]})]})]}),e.jsx("div",{className:"text-right",children:e.jsxs("div",{className:`text-xs px-2 py-1 rounded-full border ${s==="dark"?"bg-gray-800 border-gray-600 text-gray-300":"bg-gray-200 border-gray-400 text-gray-700"}`,children:[s==="dark"?"üåô":"‚òÄÔ∏è"," ",s]})})]})}):e.jsx("div",{className:"text-xs text-gray-500 text-center p-2",children:"üíª –í–µ–±-–≤–µ—Ä—Å–∏—è (–Ω–µ –≤ Telegram)"})};function G(){const[i,a]=x.useState({data:null,loading:!1,error:null}),[t,s]=x.useState({data:null,loading:!1,error:null}),[r,n]=x.useState({data:null,loading:!1,error:null}),l=x.useCallback(async d=>{a({data:null,loading:!0,error:null});try{const g=await $.submitScore(d);return g.error?(a({data:null,loading:!1,error:g.error}),{success:!1,error:g.error}):(a({data:g.data,loading:!1,error:null}),{success:!0,data:g.data})}catch(g){const f=g instanceof Error?g.message:"Unknown error";return a({data:null,loading:!1,error:f}),{success:!1,error:f}}},[]),c=x.useCallback(async()=>{s({data:null,loading:!0,error:null});try{const d=await $.getUserStats();return d.error?(s({data:null,loading:!1,error:d.error}),{success:!1,error:d.error}):(s({data:d.data,loading:!1,error:null}),{success:!0,data:d.data})}catch(d){const g=d instanceof Error?d.message:"Unknown error";return s({data:null,loading:!1,error:g}),{success:!1,error:g}}},[]),u=x.useCallback(async(d="level",g=10)=>{n({data:null,loading:!0,error:null});try{const f=await $.getLeaderboard(d,g);return f.error?(n({data:null,loading:!1,error:f.error}),{success:!1,error:f.error}):(n({data:f.data,loading:!1,error:null}),{success:!0,data:f.data})}catch(f){const p=f instanceof Error?f.message:"Unknown error";return n({data:null,loading:!1,error:p}),{success:!1,error:p}}},[]),h=x.useCallback(async()=>{try{const d=await $.refillEnergy();return d.error?{success:!1,error:d.error}:{success:!0,data:d.data}}catch(d){return{success:!1,error:d instanceof Error?d.message:"Unknown error"}}},[]);return{submitScore:l,getUserStats:c,getLeaderboard:u,refillEnergy:h,submitState:i,statsState:t,leaderboardState:r,isAuthenticated:$.isAuthenticated()}}function st(){const[i,a]=x.useState(navigator.onLine);return x.useState(()=>{const t=()=>a(!0),s=()=>a(!1);return window.addEventListener("online",t),window.addEventListener("offline",s),()=>{window.removeEventListener("online",t),window.removeEventListener("offline",s)}}),{isOnline:i}}const at=()=>{const{startSingleMode:i,startMultiplayerMode:a,player:t,addExperience:s,loadStatsFromServer:r}=T(),{isAuthenticated:n}=G(),[l,c]=x.useState(!1),[u,h]=x.useState(!1),[d,g]=x.useState(!1);x.useEffect(()=>{(async()=>{if(n&&!d){g(!0);try{const v=await r();v.success?console.log("‚úÖ –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∑–∞–≥—Ä—É–∂–µ–Ω–∞ —Å —Å–µ—Ä–≤–µ—Ä–∞"):console.warn("‚ö†Ô∏è –ù–µ —É–¥–∞–ª–æ—Å—å –∑–∞–≥—Ä—É–∑–∏—Ç—å —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É —Å —Å–µ—Ä–≤–µ—Ä–∞:",v.error)}catch(v){console.error("‚ùå –û—à–∏–±–∫–∞ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏:",v)}finally{g(!1)}}})()},[n,r,d]);const f=()=>{s(100)},p=m=>{b.medium(),i(m)};return e.jsxs("div",{className:"min-h-screen flex flex-col items-center justify-center p-4 bg-gradient-to-br from-background-dark to-background-darker",children:[e.jsxs(o.div,{initial:{opacity:0,y:-50},animate:{opacity:1,y:0},transition:{duration:.8},className:"text-center mb-8",children:[e.jsx("h1",{className:"text-6xl font-bold text-primary-orange tiger-stripes bg-clip-text text-transparent mb-4",children:"–¢–ò–ì–†"}),e.jsx("h2",{className:"text-4xl font-bold text-accent-blue mb-2",children:"–†–û–ó–ï–¢–ö–ê"}),e.jsx("p",{className:"text-lg text-gray-300",children:"Telegram Mini App Game"})]}),e.jsx(o.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,delay:.2},className:"mb-6",children:e.jsx(Je,{})}),n&&d&&e.jsxs(o.div,{initial:{opacity:0},animate:{opacity:1},className:"mb-4 text-center text-blue-400 text-sm",children:[e.jsx("span",{className:"inline-block animate-spin mr-2",children:"‚è≥"}),"–°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è —Å —Å–µ—Ä–≤–µ—Ä–æ–º..."]}),!n&&e.jsx(o.div,{initial:{opacity:0},animate:{opacity:1},className:"mb-4 text-center text-yellow-400 text-sm",children:"‚ö†Ô∏è –ò–≥—Ä–∞ –≤ –∞–≤—Ç–æ–Ω–æ–º–Ω–æ–º —Ä–µ–∂–∏–º–µ"}),e.jsx(o.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,delay:.25},className:"mb-4 w-full max-w-md",children:e.jsx(tt,{})}),e.jsxs(o.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{duration:.5,delay:.3},className:"glass-effect p-6 mb-8 text-center",children:[e.jsxs("div",{className:"text-sm text-gray-300 mb-2",children:["–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å, ",t.name,"!"]}),e.jsxs("div",{className:"flex justify-center space-x-6",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-gray-400",children:"–í–û–õ–¨–¢–´"}),e.jsxs("div",{className:"text-xl font-bold text-primary-orange",children:[t.volts,"‚ö°"]})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-gray-400",children:"–£–†–û–í–ï–ù–¨"}),e.jsx("div",{className:"text-xl font-bold text-accent-blue",children:t.level})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-gray-400",children:"–í–°–ï–ì–û –ù–ê–ñ–ê–¢–ò–ô"}),e.jsx("div",{className:"text-xl font-bold text-accent-lime",children:t.totalClicks})]})]})]}),e.jsxs(o.div,{initial:{opacity:0,y:50},animate:{opacity:1,y:0},transition:{duration:.6,delay:.5},className:"w-full max-w-md space-y-4",children:[e.jsx("h3",{className:"text-2xl font-bold text-center text-white mb-6",children:"‚ö° –û–¥–∏–Ω–æ—á–Ω—ã–π —Ä–µ–∂–∏–º"}),e.jsx("p",{className:"text-center text-gray-300 text-sm mb-4",children:"–í—ã–±–µ—Ä–∏—Ç–µ —Å–ª–æ–∂–Ω–æ—Å—Ç—å –∏–≥—Ä—ã –ø—Ä–æ—Ç–∏–≤ –ò–ò —ç–ª–µ–∫—Ç—Ä–∏–∫–∞"}),e.jsx(o.button,{onClick:()=>p("easy"),className:"w-full glass-effect p-4 rounded-xl hover:bg-green-500/20 transition-colors",whileHover:{scale:1.02,x:10},whileTap:{scale:.98},children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{className:"text-left",children:[e.jsx("div",{className:"text-lg font-bold text-green-400",children:"–õ–Å–ì–ö–ò–ô"}),e.jsx("div",{className:"text-sm text-gray-300",children:"15% —à–∞–Ω—Å —Ä–∞–∑—Ä—è–¥–∞ ‚Ä¢ 2 —Å–µ–∫ –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ"})]}),e.jsx("div",{className:"text-2xl",children:"üü¢"})]})}),e.jsx(o.button,{onClick:()=>p("medium"),className:"w-full glass-effect p-4 rounded-xl hover:bg-yellow-500/20 transition-colors",whileHover:{scale:1.02,x:10},whileTap:{scale:.98},children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{className:"text-left",children:[e.jsx("div",{className:"text-lg font-bold text-yellow-400",children:"–°–†–ï–î–ù–ò–ô"}),e.jsx("div",{className:"text-sm text-gray-300",children:"25% —à–∞–Ω—Å —Ä–∞–∑—Ä—è–¥–∞ ‚Ä¢ 1.5 —Å–µ–∫ –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ"})]}),e.jsx("div",{className:"text-2xl",children:"üü°"})]})}),e.jsx(o.button,{onClick:()=>p("hard"),className:"w-full glass-effect p-4 rounded-xl hover:bg-orange-500/20 transition-colors",whileHover:{scale:1.02,x:10},whileTap:{scale:.98},children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{className:"text-left",children:[e.jsx("div",{className:"text-lg font-bold text-orange-400",children:"–°–õ–û–ñ–ù–´–ô"}),e.jsx("div",{className:"text-sm text-gray-300",children:"35% —à–∞–Ω—Å —Ä–∞–∑—Ä—è–¥–∞ ‚Ä¢ 1 —Å–µ–∫ –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ"})]}),e.jsx("div",{className:"text-2xl",children:"üü†"})]})}),e.jsx(o.button,{onClick:()=>p("extreme"),className:"w-full glass-effect p-4 rounded-xl hover:bg-red-500/20 transition-colors",whileHover:{scale:1.02,x:10},whileTap:{scale:.98},children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{className:"text-left",children:[e.jsx("div",{className:"text-lg font-bold text-red-400",children:"–≠–ö–°–¢–†–ò–ú"}),e.jsx("div",{className:"text-sm text-gray-300",children:"50% —à–∞–Ω—Å —Ä–∞–∑—Ä—è–¥–∞ ‚Ä¢ 0.5 —Å–µ–∫ –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ"})]}),e.jsx("div",{className:"text-2xl",children:"üî¥"})]})}),e.jsxs(o.div,{className:"w-full border-t border-white/10 pt-6 mt-6",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,delay:.7},children:[e.jsx("h4",{className:"text-xl font-bold text-center text-white mb-4",children:"üéÆ –ú–Ω–æ–≥–æ–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–π —Ä–µ–∂–∏–º"}),e.jsx(o.button,{onClick:()=>{b.medium(),a("duel")},className:"w-full glass-effect p-4 rounded-xl hover:bg-purple-500/20 transition-colors border border-purple-400/30",whileHover:{scale:1.02,x:10},whileTap:{scale:.98},children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{className:"text-left",children:[e.jsx("div",{className:"text-lg font-bold text-purple-400",children:"–î–£–≠–õ–¨"}),e.jsx("div",{className:"text-sm text-gray-300",children:"–°–æ—Ä–µ–≤–Ω–æ–≤–∞–Ω–∏–µ 1v1 ‚Ä¢ Real-time –±–æ–π"})]}),e.jsx("div",{className:"text-2xl",children:"‚öîÔ∏è"})]})}),e.jsx(o.button,{onClick:()=>{b.medium(),a("tournament")},className:"w-full glass-effect p-4 rounded-xl hover:bg-blue-500/20 transition-colors border border-blue-400/30 mt-3",whileHover:{scale:1.02,x:10},whileTap:{scale:.98},children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{className:"text-left",children:[e.jsx("div",{className:"text-lg font-bold text-blue-400",children:"–¢–£–†–ù–ò–†"}),e.jsx("div",{className:"text-sm text-gray-300",children:"–î–æ 8 –∏–≥—Ä–æ–∫–æ–≤ ‚Ä¢ –ë—Ä–∞–∫–∫–µ—Ç —Å–∏—Å—Ç–µ–º–∞"})]}),e.jsx("div",{className:"text-2xl",children:"üèÜ"})]})}),e.jsx(o.button,{onClick:()=>{b.medium(),a("coop")},className:"w-full glass-effect p-4 rounded-xl hover:bg-green-500/20 transition-colors border border-green-400/30 mt-3",whileHover:{scale:1.02,x:10},whileTap:{scale:.98},children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{className:"text-left",children:[e.jsx("div",{className:"text-lg font-bold text-green-400",children:"–ö–û–û–ü"}),e.jsx("div",{className:"text-sm text-gray-300",children:"–ö–æ–º–∞–Ω–¥–Ω–∞—è –∏–≥—Ä–∞ ‚Ä¢ –ü—Ä–æ—Ç–∏–≤ –ò–ò"})]}),e.jsx("div",{className:"text-2xl",children:"ü§ù"})]})})]}),e.jsx(o.button,{onClick:()=>{b.light(),c(!0)},className:"w-full glass-effect p-3 rounded-xl hover:bg-blue-500/20 transition-colors border border-blue-400/30",whileHover:{scale:1.02},whileTap:{scale:.98},children:e.jsxs("div",{className:"flex justify-center items-center space-x-2",children:[e.jsx("span",{className:"text-lg",children:"üìä"}),e.jsx("span",{className:"text-lg font-semibold text-blue-400",children:"–û—á–∫–∏ –∏ —É—Ä–æ–≤–Ω–∏"})]})}),e.jsx(o.button,{onClick:()=>{b.light(),h(!0)},className:"w-full glass-effect p-3 rounded-xl hover:bg-purple-500/20 transition-colors border border-purple-400/30",whileHover:{scale:1.02},whileTap:{scale:.98},children:e.jsxs("div",{className:"flex justify-center items-center space-x-2",children:[e.jsx("span",{className:"text-lg",children:"üì≥"}),e.jsx("span",{className:"text-lg font-semibold text-purple-400",children:"–í–∏–±—Ä–∞—Ü–∏—è"})]})})]}),l&&e.jsx(Xe,{onClose:()=>c(!1)}),u&&e.jsx(Qe,{isVisible:u,onClose:()=>h(!1)}),e.jsxs(o.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.5,delay:1},className:"mt-8 text-center text-gray-400 text-sm space-y-2",children:[e.jsx("p",{children:"‚ö° –ò–≥—Ä–∞–π –æ—Å—Ç–æ—Ä–æ–∂–Ω–æ! ‚ö°"}),e.jsx("p",{className:"mt-2",children:"v1.1.0 | Single Mode + Multiplayer Preview"}),e.jsx("button",{onClick:()=>{b.light(),f()},className:"mt-2 px-3 py-1 text-xs bg-purple-600/30 hover:bg-purple-600/50 text-purple-300 rounded transition-colors",children:"üîß +100 –æ–ø—ã—Ç–∞ (—Ç–µ—Å—Ç)"})]})]})};class it{constructor(){D(this,"audioContext",null);D(this,"sounds",new Map);D(this,"volume",.7);D(this,"enabled",!0);this.init()}async init(){try{this.audioContext=new(window.AudioContext||window.webkitAudioContext)}catch(a){console.warn("Web Audio API not supported:",a)}}async loadSound(a,t){if(this.audioContext)try{const r=await(await fetch(t)).arrayBuffer(),n=await this.audioContext.decodeAudioData(r);this.sounds.set(a,n)}catch(s){console.warn(`Failed to load sound ${a}:`,s)}}playSound(a,t=1){if(!this.enabled||!this.audioContext)return;const s=this.sounds.get(a);if(!s)return;const r=this.audioContext.createBufferSource(),n=this.audioContext.createGain();r.buffer=s,n.gain.value=this.volume*t,r.connect(n),n.connect(this.audioContext.destination),r.start()}generateSparkSound(a){if(!this.enabled||!this.audioContext)return;const t={low:.1,medium:.2,high:.3,extreme:.5}[a],s={low:2e3,medium:3e3,high:4e3,extreme:5e3}[a],r=this.audioContext.sampleRate*t,n=this.audioContext.createBuffer(1,r,this.audioContext.sampleRate),l=n.getChannelData(0);for(let h=0;h<r;h++){const d=h/this.audioContext.sampleRate,g=Math.exp(-d*10),f=(Math.random()*2-1)*g,p=Math.sin(2*Math.PI*s*d*(1+Math.random()*.5));l[h]=f*p*.3}const c=this.audioContext.createBufferSource(),u=this.audioContext.createGain();c.buffer=n,u.gain.value=this.volume*(a==="extreme"?.8:.5),c.connect(u),u.connect(this.audioContext.destination),c.start()}generateShockSound(){if(!this.enabled||!this.audioContext)return;const t=this.audioContext.sampleRate*.8,s=this.audioContext.createBuffer(1,t,this.audioContext.sampleRate),r=s.getChannelData(0);for(let c=0;c<t;c++){const u=c/this.audioContext.sampleRate,h=Math.exp(-u*3),d=Math.sin(2*Math.PI*100*u),g=Math.sin(2*Math.PI*800*u)*.5,f=(Math.random()*2-1)*.3;r[c]=(d+g+f)*h*.6}const n=this.audioContext.createBufferSource(),l=this.audioContext.createGain();n.buffer=s,l.gain.value=this.volume,n.connect(l),l.connect(this.audioContext.destination),n.start()}generateWarningSound(){if(!this.enabled||!this.audioContext)return;const a=.3,t=this.audioContext.sampleRate*a,s=this.audioContext.createBuffer(1,t,this.audioContext.sampleRate),r=s.getChannelData(0);for(let c=0;c<t;c++){const u=c/this.audioContext.sampleRate,h=1e3+Math.sin(u*20)*200,d=Math.sin(Math.PI*u/a);r[c]=Math.sin(2*Math.PI*h*u)*d*.4}const n=this.audioContext.createBufferSource(),l=this.audioContext.createGain();n.buffer=s,l.gain.value=this.volume*.6,n.connect(l),l.connect(this.audioContext.destination),n.start()}setVolume(a){this.volume=Math.max(0,Math.min(1,a))}setEnabled(a){this.enabled=a}getVolume(){return this.volume}isEnabled(){return this.enabled}}const ee=new it,rt=({score:i,reason:a,isVisible:t,position:s,type:r,experience:n=0})=>{const l=()=>{switch(r){case"success":return i>=30?"text-yellow-300":i>=20?"text-green-300":"text-blue-300";case"shock":return"text-red-300";case"bonus":return"text-purple-300";default:return"text-white"}},c=()=>{switch(r){case"success":return i>=30?"üî•":i>=20?"‚ö°":"‚ú®";case"shock":return"üí•";case"bonus":return"üéâ";default:return"‚ö°"}};return e.jsx(H,{children:t&&e.jsx(o.div,{className:`absolute pointer-events-none z-50 ${l()}`,initial:{opacity:0,scale:.5,x:s.x,y:s.y},animate:{opacity:[0,1,1,0],scale:[.5,1.2,1,.8],y:s.y-80,x:s.x+(Math.random()-.5)*40},transition:{duration:2,ease:"easeOut"},children:e.jsx("div",{className:"bg-black/80 backdrop-blur-sm rounded-lg px-3 py-2 border border-current",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("span",{className:"text-lg",children:c()}),e.jsxs("div",{children:[e.jsxs("div",{className:"font-bold text-lg",children:["+",i,"‚ö°"]}),n>0&&e.jsxs("div",{className:"text-xs text-blue-300",children:["+",n," –æ–ø—ã—Ç–∞"]}),e.jsx("div",{className:"text-xs opacity-80",children:a})]})]})})})})},nt=({isActive:i,intensity:a="medium",onComplete:t})=>{const[s,r]=x.useState([]);x.useEffect(()=>{i?n():r([])},[i,a]);const n=()=>{const l={low:6,medium:12,high:18,extreme:25}[a],c=["#3B82F6","#EF4444","#FFFFFF","#FBBF24","#8B5CF6"],u=[];for(let h=0;h<l;h++)u.push({id:h,x:Math.random()*100,y:Math.random()*100,angle:Math.random()*360,length:20+Math.random()*60,delay:Math.random()*.3,color:c[Math.floor(Math.random()*c.length)]});r(u),setTimeout(()=>{r([]),t==null||t()},1e3)};return e.jsxs("div",{className:"absolute inset-0 pointer-events-none overflow-hidden",children:[e.jsx(H,{children:s.map(l=>e.jsxs(o.div,{className:"absolute",style:{left:`${l.x}%`,top:`${l.y}%`,transform:`rotate(${l.angle}deg)`},initial:{opacity:0,scale:0},animate:{opacity:[0,1,.7,0],scale:[0,1,.8,0],x:[0,Math.cos(l.angle*Math.PI/180)*l.length],y:[0,Math.sin(l.angle*Math.PI/180)*l.length]},transition:{duration:.6,delay:l.delay,ease:"easeOut"},children:[e.jsx("div",{className:"w-1 bg-gradient-to-r opacity-90 rounded-full shadow-lg",style:{height:`${l.length}px`,backgroundColor:l.color,boxShadow:`0 0 8px ${l.color}, 0 0 16px ${l.color}40`}}),e.jsx("div",{className:"absolute top-0 left-0 w-1 blur-sm opacity-60 rounded-full",style:{height:`${l.length}px`,backgroundColor:l.color}})]},l.id))}),e.jsx(H,{children:i&&e.jsx(o.svg,{className:"absolute inset-0 w-full h-full",initial:{opacity:0},animate:{opacity:[0,1,.8,.2,.9,0]},transition:{duration:.8,times:[0,.1,.3,.5,.7,1]},children:Array.from({length:3},(l,c)=>{const u=20+Math.random()*60,h=20+Math.random()*60,d=5+Math.floor(Math.random()*5);let g=`M ${u} ${h}`,f=u,p=h;for(let m=0;m<d;m++)f+=(Math.random()-.5)*40,p+=(Math.random()-.5)*40,g+=` L ${f} ${p}`;return e.jsx(o.path,{d:g,stroke:"#FFFFFF",strokeWidth:Math.random()*2+1,fill:"none",opacity:.8,filter:"drop-shadow(0 0 4px #3B82F6)",initial:{pathLength:0},animate:{pathLength:1},transition:{duration:.3,delay:c*.1,ease:"easeOut"}},c)})})}),e.jsx(H,{children:i&&e.jsx(o.div,{className:"absolute inset-0 bg-white mix-blend-screen",initial:{opacity:0},animate:{opacity:[0,.4,.1,.3,0]},transition:{duration:.5,times:[0,.1,.3,.6,1]}})})]})},lt=()=>{const{player:i}=T(),[a,t]=x.useState(U(i.level)),[s,r]=x.useState(!1);return x.useEffect(()=>{const n=U(i.level);console.log(`Player level: ${i.level}, Image path: ${n}`),n!==a&&(r(!0),setTimeout(()=>{t(n),r(!1)},300))},[i.level,a]),{currentImage:a,isAnimating:s}},ct=({className:i="",onShock:a})=>{const{clickOutlet:t,singleMode:s,gameState:r,updateScore:n,triggerShock:l}=T(),{currentImage:c,isAnimating:u}=lt(),[h,d]=x.useState([]),[g,f]=x.useState(!1),[p,m]=x.useState(1),[v,y]=x.useState(!1),[S,C]=x.useState({visible:!1,score:0,reason:"",type:"success"}),w=x.useCallback((k,I,M)=>{C({visible:!0,score:k,reason:I,type:M}),setTimeout(()=>{C(A=>({...A,visible:!1}))},2e3)},[]),E=x.useCallback(k=>{const I={low:3,medium:6,high:12,extreme:20}[k],M=Array.from({length:I},(A,L)=>({id:`spark-${Date.now()}-${L}`,x:Math.random()*200-100,y:Math.random()*200-100,intensity:k,timestamp:Date.now(),duration:300+Math.random()*200,color:k==="extreme"?"#E8FF00":k==="high"?"#00D4FF":k==="medium"?"#8A2BE2":"#FF6B35"}));d(A=>[...A,...M]),M.forEach(A=>{setTimeout(()=>{d(L=>L.filter(j=>j.id!==A.id))},A.duration)})},[]),_=x.useCallback(()=>{if(!r.isPlaying)return;if(s.warningSignsActive&&(s.dangerLevel>80?b.extremeDangerWarning():s.dangerLevel>60&&b.dangerWarning()),b.outletPress(),f(!0),t(),s.isDischarging)y(!0),m(3),a==null||a(),b.electricShock(),ee.generateShockSound(),l(),setTimeout(()=>{y(!1)},1e3),setTimeout(()=>{const I=window.lastPenaltyMessage;if(I)w(0,I,"shock"),window.lastPenaltyMessage=null;else{const M={basePoints:8,riskMultiplier:1,streakBonus:0,timeBonus:0,totalPoints:8+Math.floor(Math.random()*17),reason:"–ü–æ—Ä–∞–∂–µ–Ω–∏–µ —Ç–æ–∫–æ–º"};n(M),w(M.totalPoints,M.reason,"shock")}},100);else{const I=s.currentRisk==="extreme"?"extreme":s.currentRisk==="high"?"high":s.currentRisk==="medium"?"medium":"low";E(I),m(2),b.survivalSuccess(),ee.generateSparkSound(I);const M=10,A={low:1,medium:1.5,high:2,extreme:3}[s.currentRisk],L=s.streakCount>=25?3:s.streakCount>=10?2:s.streakCount>=5?1.5:1,j=Math.floor(M*A*L),N={basePoints:M,riskMultiplier:A,streakBonus:L,timeBonus:0,totalPoints:j,reason:`–í—ã–∂–∏–≤–∞–Ω–∏–µ (${s.currentRisk} —Ä–∏—Å–∫)`};n(N),w(N.totalPoints,N.reason,"success"),s.streakCount>0&&s.streakCount%5===0&&b.streakAchievement(s.streakCount)}setTimeout(()=>{f(!1),m(1)},200)},[r.isPlaying,s,t,E,n]);return e.jsxs("div",{className:`relative ${i}`,children:[e.jsxs(o.button,{onClick:_,disabled:!r.isPlaying,className:"relative w-64 h-64 rounded-2xl overflow-hidden disabled:opacity-50 bg-gray-800",whileTap:{scale:.95},whileHover:{scale:1.05},animate:{scale:g?.9:1,filter:`brightness(${p}) saturate(${p})`,rotateY:u?[0,180,360]:0},transition:{rotateY:{duration:.6,ease:"easeInOut"}},style:{boxShadow:`0 0 ${20*p}px rgba(255, 107, 53, ${.5*p})`},children:[e.jsx("img",{src:c,alt:"Tiger Outlet",className:"absolute inset-0 w-full h-full object-cover rounded-2xl",onError:k=>{console.error("Image failed to load:",c),console.error("Error event:",k),console.error("Current window location:",window.location.href),console.error("Trying full path:",`${window.location.origin}${c}`),k.currentTarget.style.display="none"},onLoad:()=>{console.log("Image loaded successfully:",c)}}),e.jsx("div",{className:"absolute inset-0 tiger-stripes opacity-20 mix-blend-overlay"}),e.jsx(o.div,{className:"absolute inset-0 rounded-2xl",animate:{boxShadow:s.warningSignsActive?`0 0 ${30*p}px #FF0000, inset 0 0 ${30*p}px #FF0000`:`0 0 ${15*p}px #FF6B35, inset 0 0 ${15*p}px #FF6B35`},transition:{duration:s.warningSignsActive?.1:.2}}),s.dangerLevel>50&&e.jsx(o.div,{className:"absolute -top-12 left-1/2 transform -translate-x-1/2",initial:{opacity:0,scale:0},animate:{opacity:[.7,1,.7,1],scale:[.8,1.2,.8,1.2]},transition:{duration:1,repeat:1/0,ease:"easeInOut"},children:e.jsx("div",{className:`px-2 py-1 rounded-full text-xs font-bold ${s.dangerLevel>80?"bg-red-500 text-white":s.dangerLevel>70?"bg-orange-500 text-white":"bg-yellow-500 text-black"}`,children:s.dangerLevel>80?"üî¥ –ö–†–ò–¢–ò–ß–ù–û":s.dangerLevel>70?"üü† –û–ü–ê–°–ù–û":"üü° –†–ò–°–ö"})}),e.jsx(nt,{isActive:v,intensity:"extreme",onComplete:()=>y(!1)})]}),e.jsx(H,{children:h.map(k=>e.jsx(o.div,{className:"absolute w-2 h-2 rounded-full pointer-events-none",style:{backgroundColor:k.color,boxShadow:`0 0 10px ${k.color}`,left:"50%",top:"50%"},initial:{x:0,y:0,scale:0,opacity:1},animate:{x:k.x,y:k.y,scale:[0,1.5,.8,0],opacity:[1,1,.5,0],rotate:[0,180,360]},transition:{duration:k.duration/1e3,ease:"easeOut"}},k.id))}),e.jsx("div",{className:"absolute -bottom-8 left-1/2 transform -translate-x-1/2",children:e.jsxs("div",{className:`px-3 py-1 rounded-full text-xs font-bold ${s.currentRisk==="extreme"?"bg-red-500 text-white":s.currentRisk==="high"?"bg-orange-500 text-white":s.currentRisk==="medium"?"bg-yellow-500 text-black":"bg-green-500 text-white"}`,children:[s.currentRisk==="extreme"?"–≠–ö–°–¢–†–ò–ú":s.currentRisk==="high"?"–í–´–°–û–ö–ò–ô":s.currentRisk==="medium"?"–°–†–ï–î–ù–ò–ô":"–ù–ò–ó–ö–ò–ô"," –†–ò–°–ö"]})}),e.jsx(rt,{score:S.score,reason:S.reason,isVisible:S.visible,position:{x:0,y:-32},type:S.type})]})},ot=({className:i=""})=>{const{isAuthenticated:a}=G(),{isOnline:t}=st(),r=t?a?{text:"–ü–æ–¥–∫–ª—é—á–µ–Ω–æ –∫ —Å–µ—Ä–≤–µ—Ä—É",color:"text-green-400",icon:"‚úÖ",bgColor:"bg-green-500/10"}:{text:"–ê–≤—Ç–æ–Ω–æ–º–Ω—ã–π —Ä–µ–∂–∏–º",color:"text-yellow-400",icon:"‚ö†Ô∏è",bgColor:"bg-yellow-500/10"}:{text:"–ù–µ—Ç –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è",color:"text-red-400",icon:"‚ùå",bgColor:"bg-red-500/10"};return e.jsx(o.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},className:`glass-effect p-2 rounded-lg ${r.bgColor} ${i}`,children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("span",{className:"text-sm",children:r.icon}),e.jsx("span",{className:`text-xs font-medium ${r.color}`,children:r.text})]})})},dt=()=>{const{player:i,gameState:a,singleMode:t,aiElectrician:s,repairAIElectrician:r}=T();return e.jsxs("div",{className:"fixed top-0 left-0 right-0 z-10 bg-black/20 backdrop-blur-sm border-b border-white/10",children:[e.jsxs("div",{className:"flex justify-between items-center p-4",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs(o.div,{className:"glass-effect px-4 py-2",whileHover:{scale:1.05},children:[e.jsx("div",{className:"text-xs text-gray-300",children:"–°–ß–Å–¢"}),e.jsx("div",{className:"text-xl font-bold text-accent-lime",children:a.score.toLocaleString()})]}),e.jsxs(o.div,{className:"glass-effect px-4 py-2",whileHover:{scale:1.05},children:[e.jsx("div",{className:"text-xs text-gray-300",children:"–í–û–õ–¨–¢–´"}),e.jsxs("div",{className:"text-xl font-bold text-primary-orange",children:[i.volts.toLocaleString(),"‚ö°"]})]})]}),e.jsx("div",{className:"text-center",children:e.jsxs(o.div,{className:"glass-effect px-4 py-2",animate:{scale:t.streakCount>0?[1,1.1,1]:1,boxShadow:t.streakCount>=5?"0 0 20px #E8FF00":"0 0 10px rgba(255,255,255,0.2)"},transition:{duration:.3},children:[e.jsx("div",{className:"text-xs text-gray-300",children:"–°–ï–†–ò–Ø"}),e.jsx("div",{className:`text-xl font-bold ${t.streakCount>=25?"text-red-400":t.streakCount>=10?"text-orange-400":t.streakCount>=5?"text-yellow-400":"text-white"}`,children:t.streakCount})]})}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs(o.div,{className:"glass-effect px-4 py-2",whileHover:{scale:1.05},animate:{opacity:i.luckIndicatorHidden&&Date.now()<i.luckHiddenUntil?.3:1},transition:{duration:.3},children:[e.jsx("div",{className:"text-xs text-gray-300",children:"–£–î–ê–ß–ê"}),e.jsx("div",{className:`text-sm font-bold ${i.luckIndicatorHidden&&Date.now()<i.luckHiddenUntil?"text-gray-500":i.luckCoefficient>=70?"text-green-400":i.luckCoefficient>=50?"text-yellow-400":i.luckCoefficient>=30?"text-orange-400":"text-red-400"}`,children:i.luckIndicatorHidden&&Date.now()<i.luckHiddenUntil?"???":`${i.luckCoefficient}%`})]}),e.jsxs(o.div,{className:"glass-effect px-4 py-2",whileHover:{scale:1.05},children:[e.jsx("div",{className:"text-xs text-gray-300",children:"–°–õ–û–ñ–ù–û–°–¢–¨"}),e.jsx("div",{className:`text-sm font-bold ${t.difficulty==="extreme"?"text-red-400":t.difficulty==="hard"?"text-orange-400":t.difficulty==="medium"?"text-yellow-400":"text-green-400"}`,children:t.difficulty==="extreme"?"–≠–ö–°–¢–†–ò–ú":t.difficulty==="hard"?"–°–õ–û–ñ–ù–´–ô":t.difficulty==="medium"?"–°–†–ï–î–ù–ò–ô":"–õ–Å–ì–ö–ò–ô"})]}),e.jsxs(o.div,{className:"glass-effect px-4 py-2",whileHover:{scale:1.05},animate:{boxShadow:t.dangerLevel>80?"0 0 20px #ff4444":t.dangerLevel>60?"0 0 15px #ff8800":t.dangerLevel>40?"0 0 10px #ffaa00":"0 0 5px rgba(255,255,255,0.2)"},children:[e.jsx("div",{className:"text-xs text-gray-300",children:"–û–ü–ê–°–ù–û–°–¢–¨"}),e.jsxs("div",{className:`text-sm font-bold ${t.dangerLevel>80?"text-red-400":t.dangerLevel>60?"text-orange-400":t.dangerLevel>40?"text-yellow-400":"text-green-400"}`,children:[t.dangerLevel,"%"]})]}),e.jsxs(o.div,{className:"glass-effect px-4 py-2",whileHover:{scale:1.05},animate:{boxShadow:t.isDischarging?"0 0 20px #ff0000":t.warningSignsActive?"0 0 15px #ff8800":t.aiElectricianActive?"0 0 10px #00ffff":"0 0 5px rgba(255,255,255,0.2)",scale:t.isDischarging?[1,1.05,1]:1},transition:{duration:.3,repeat:t.isDischarging?1/0:0},children:[e.jsx("div",{className:"text-xs text-gray-300",children:"–ò–ò –≠–õ–ï–ö–¢–†–ò–ö"}),e.jsx("div",{className:`text-sm font-bold ${t.isDischarging?"text-red-400":t.warningSignsActive?"text-orange-400":t.aiElectricianActive?"text-cyan-400":"text-gray-500"}`,children:t.isDischarging?"‚ö° –†–ê–ó–†–Ø–î!":t.warningSignsActive?"‚ö†Ô∏è –í–ù–ò–ú–ê–ù–ò–ï!":t.aiElectricianActive?"ü§ñ –ê–ö–¢–ò–í–ï–ù":"üò¥ –°–ü–ò–¢"})]}),e.jsxs(o.div,{className:"glass-effect px-4 py-2",whileHover:{scale:1.05},children:[e.jsx("div",{className:"text-xs text-gray-300",children:"–ù–ê–ñ–ê–¢–ò–ô"}),e.jsx("div",{className:"text-lg font-bold text-accent-blue",children:i.totalClicks})]}),e.jsx(ot,{})]})]}),t.warningSignsActive&&e.jsx(o.div,{className:"bg-yellow-500/80 text-black px-4 py-2 text-center font-bold",initial:{opacity:0,y:-20},animate:{opacity:[0,1,.7,1,.7,1],y:0},transition:{duration:.5},children:"‚ö†Ô∏è –û–ü–ê–°–ù–û–°–¢–¨! –í–´–°–û–ö–ò–ô –†–ò–°–ö –†–ê–ó–†–Ø–î–ê! ‚ö†Ô∏è"}),t.dangerLevel>30&&e.jsxs(o.div,{className:`px-4 py-1 text-center text-xs font-semibold ${t.dangerLevel>70?"bg-red-500/60 text-white":t.dangerLevel>50?"bg-orange-500/60 text-white":"bg-yellow-500/60 text-black"}`,initial:{opacity:0},animate:{opacity:1},transition:{duration:.3},children:["üî• –£–†–û–í–ï–ù–¨ –û–ü–ê–°–ù–û–°–¢–ò: ",t.dangerLevel,"% üî•"]}),t.aiElectricianActive&&e.jsx(o.div,{className:"bg-black/40 border-t border-white/10 px-4 py-3",initial:{opacity:0,y:-10},animate:{opacity:1,y:0},transition:{duration:.3},children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs("div",{className:"text-sm",children:[e.jsxs("div",{className:"text-cyan-400 font-bold",children:["‚ö° ",s.name]}),e.jsx("div",{className:`text-xs ${s.mood==="confident"?"text-green-400":s.mood==="frustrated"?"text-orange-400":s.mood==="tired"?"text-yellow-400":s.mood==="broken"?"text-red-400":"text-red-600"}`,children:s.lastMessage})]}),e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsx("div",{className:"text-xs text-gray-300 mb-1",children:"–≠–ù–ï–†–ì–ò–Ø"}),e.jsx("div",{className:"w-20 h-2 bg-gray-700 rounded-full overflow-hidden",children:e.jsx(o.div,{className:`h-full rounded-full ${s.energy>60?"bg-green-500":s.energy>30?"bg-yellow-500":"bg-red-500"}`,initial:{width:0},animate:{width:`${s.energy}%`},transition:{duration:.5}})}),e.jsxs("div",{className:"text-xs text-white",children:[Math.round(s.energy),"%"]})]}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-xs text-gray-300",children:"–ë–ê–¢"}),e.jsxs("div",{className:`text-xs font-bold ${s.equipment.battery>70?"text-green-400":s.equipment.battery>30?"text-yellow-400":"text-red-400"}`,children:[Math.round(s.equipment.battery),"%"]})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-xs text-gray-300",children:"–ö–û–ù"}),e.jsxs("div",{className:`text-xs font-bold ${s.equipment.capacitor>70?"text-green-400":s.equipment.capacitor>30?"text-yellow-400":"text-red-400"}`,children:[Math.round(s.equipment.capacitor),"%"]})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-xs text-gray-300",children:"–ü–†–í"}),e.jsxs("div",{className:`text-xs font-bold ${s.equipment.wires>70?"text-green-400":s.equipment.wires>30?"text-yellow-400":"text-red-400"}`,children:[Math.round(s.equipment.wires),"%"]})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-xs text-gray-300",children:"–ì–ï–ù"}),e.jsxs("div",{className:`text-xs font-bold ${s.equipment.generator>70?"text-green-400":s.equipment.generator>30?"text-yellow-400":"text-red-400"}`,children:[Math.round(s.equipment.generator),"%"]})]})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-xs text-gray-300",children:"–≠–§–§–ï–ö–¢"}),e.jsxs("div",{className:`text-sm font-bold ${s.workingEfficiency>80?"text-green-400":s.workingEfficiency>50?"text-yellow-400":"text-red-400"}`,children:[Math.round(s.workingEfficiency),"%"]})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-xs text-gray-300",children:"–£–°–ü–ï–•/–ù–ï–£–î–ê–ß"}),e.jsx("div",{className:"text-xs text-green-400",children:s.successfulDischarges}),e.jsx("div",{className:"text-xs text-red-400",children:s.failuresCount})]}),e.jsx("div",{className:"text-center",children:e.jsx("div",{className:`text-sm font-bold ${s.canWork?"text-green-400":"text-red-400"}`,children:s.canWork?"‚úÖ –†–ê–ë–û–¢–ê–ï–¢":"‚ùå –ù–ï –†–ê–ë–û–¢–ê–ï–¢"})})]}),e.jsxs("div",{className:"flex space-x-2 mt-2",children:[e.jsx(o.button,{className:"glass-effect px-3 py-1 text-xs text-green-400 hover:text-green-300 disabled:text-gray-500 disabled:cursor-not-allowed",onClick:()=>{i.volts>=50&&(r("energy"),T.getState().updatePlayerStats({volts:i.volts-50}))},disabled:i.volts<50||s.energy>=90,whileHover:{scale:1.05},whileTap:{scale:.95},children:"‚ö° –ó–∞—Ä—è–¥–∏—Ç—å (50‚ö°)"}),e.jsx(o.button,{className:"glass-effect px-3 py-1 text-xs text-blue-400 hover:text-blue-300 disabled:text-gray-500 disabled:cursor-not-allowed",onClick:()=>{i.volts>=100&&(r("equipment"),T.getState().updatePlayerStats({volts:i.volts-100}))},disabled:i.volts<100||Object.values(s.equipment).every(n=>n>=95),whileHover:{scale:1.05},whileTap:{scale:.95},children:"üîß –ü–æ—á–∏–Ω–∏—Ç—å (100‚ö°)"})]})]})})]})},xt=({isActive:i,intensity:a="medium",duration:t=500,onComplete:s})=>{const r={low:5,medium:10,high:15,extreme:20}[a];return x.useEffect(()=>{if(i&&s){const n=setTimeout(s,t);return()=>clearTimeout(n)}},[i,t,s]),i?e.jsx(o.div,{className:"fixed inset-0 pointer-events-none z-50",initial:{x:0,y:0},animate:{x:[0,-r,r,-r,r,0],y:[0,r,-r,r,-r,0]},transition:{duration:t/1e3,times:[0,.1,.2,.3,.4,1],ease:"easeInOut"},children:e.jsx(o.div,{className:"absolute inset-0 bg-red-500 mix-blend-multiply",initial:{opacity:0},animate:{opacity:[0,.3,0,.2,0]},transition:{duration:t/1e3}})}):null},ut=()=>{const{gameState:i,singleMode:a,endGame:t,player:s,submitGameToServer:r}=T(),{isAuthenticated:n}=G(),[l,c]=x.useState(0),[u,h]=x.useState(!1),[d,g]=x.useState(!1),[f,p]=x.useState(!1),m=x.useCallback(()=>{p(!0),setTimeout(()=>{p(!1)},600)},[]);x.useEffect(()=>{if(!i.isPlaying)return;const S=setInterval(()=>{c(C=>C+1)},1e3);return()=>clearInterval(S)},[i.isPlaying]),x.useEffect(()=>{l>=600&&h(!0)},[l]);const v=async()=>{if(h(!1),c(0),n&&i.score>0){g(!0);try{const S=T.getState();S.gameState.gameTime=l*1e3;const C=await r();C.success?console.log("‚úÖ –ò–≥—Ä–∞ —É—Å–ø–µ—à–Ω–æ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∞ –Ω–∞ —Å–µ—Ä–≤–µ—Ä"):console.warn("‚ö†Ô∏è –ù–µ —É–¥–∞–ª–æ—Å—å —Å–æ—Ö—Ä–∞–Ω–∏—Ç—å –∏–≥—Ä—É –Ω–∞ —Å–µ—Ä–≤–µ—Ä:",C.error)}catch(S){console.error("‚ùå –û—à–∏–±–∫–∞ –ø—Ä–∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–∏ –∏–≥—Ä—ã:",S)}finally{g(!1)}}t()},y=S=>{const C=Math.floor(S/60),w=S%60;return`${C.toString().padStart(2,"0")}:${w.toString().padStart(2,"0")}`};return u?e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-background-dark to-background-darker",children:e.jsxs(o.div,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},className:"glass-effect p-8 text-center max-w-md",children:[e.jsx("h2",{className:"text-3xl font-bold text-primary-orange mb-4",children:"–ò–≥—Ä–∞ –æ–∫–æ–Ω—á–µ–Ω–∞!"}),e.jsxs("div",{className:"space-y-3 mb-6",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"–í—Ä–µ–º—è –∏–≥—Ä—ã:"}),e.jsx("span",{className:"font-bold",children:y(l)})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"–§–∏–Ω–∞–ª—å–Ω—ã–π —Å—á—ë—Ç:"}),e.jsx("span",{className:"font-bold text-accent-lime",children:i.score.toLocaleString()})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"–ü–æ–ª—É—á–µ–Ω–æ –≤–æ–ª—å—Ç:"}),e.jsxs("span",{className:"font-bold text-primary-orange",children:[i.score,"‚ö°"]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"–í—Å–µ–≥–æ –Ω–∞–∂–∞—Ç–∏–π:"}),e.jsx("span",{className:"font-bold text-accent-blue",children:s.totalClicks})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"–õ—É—á—à–∞—è —Å–µ—Ä–∏—è:"}),e.jsx("span",{className:"font-bold text-yellow-400",children:s.streak})]})]}),n&&i.score>0&&e.jsx("div",{className:"mb-4 text-center",children:d?e.jsxs("div",{className:"text-blue-400 text-sm",children:[e.jsx("span",{className:"inline-block animate-spin mr-2",children:"‚è≥"}),"–°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤..."]}):e.jsx("div",{className:"text-green-400 text-sm",children:"‚úÖ –†–µ–∑—É–ª—å—Ç–∞—Ç—ã –±—É–¥—É—Ç —Å–æ—Ö—Ä–∞–Ω–µ–Ω—ã –Ω–∞ —Å–µ—Ä–≤–µ—Ä"})}),!n&&i.score>0&&e.jsx("div",{className:"mb-4 text-center text-yellow-400 text-sm",children:"‚ö†Ô∏è –†–µ–∑—É–ª—å—Ç–∞—Ç—ã —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è —Ç–æ–ª—å–∫–æ –ª–æ–∫–∞–ª—å–Ω–æ"}),e.jsx(o.button,{onClick:v,disabled:d,className:"w-full glass-effect p-3 rounded-xl hover:bg-primary-orange/20 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",whileHover:{scale:d?1:1.05},whileTap:{scale:d?1:.95},children:e.jsx("span",{className:"font-bold",children:d?"–°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ...":"–í–µ—Ä–Ω—É—Ç—å—Å—è –≤ –º–µ–Ω—é"})})]})}):e.jsxs(e.Fragment,{children:[e.jsx(xt,{isActive:f}),e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-background-dark to-background-darker relative",children:[e.jsx(dt,{}),e.jsxs("div",{className:"flex flex-col items-center justify-center min-h-screen pt-24 pb-8",children:[e.jsx(o.div,{className:"glass-effect px-6 py-3 mb-8",animate:{scale:l%10===0&&l>0?[1,1.1,1]:1},children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-xs text-gray-300",children:"–í–†–ï–ú–Ø –ò–ì–†–´"}),e.jsx("div",{className:"text-2xl font-bold text-white font-mono",children:y(l)})]})}),e.jsx(ct,{className:"mb-8",onShock:m}),e.jsx("div",{className:"flex space-x-4 text-center",children:e.jsxs(o.div,{className:"glass-effect px-4 py-2",whileHover:{scale:1.05},children:[e.jsx("div",{className:"text-xs text-gray-300",children:"–ü–û–°–õ–ï–î–ù–ò–ô –†–ò–°–ö"}),e.jsx("div",{className:`text-sm font-bold ${a.currentRisk==="extreme"?"text-red-400":a.currentRisk==="high"?"text-orange-400":a.currentRisk==="medium"?"text-yellow-400":"text-green-400"}`,children:a.currentRisk==="extreme"?"–≠–ö–°–¢–†–ò–ú":a.currentRisk==="high"?"–í–´–°–û–ö–ò–ô":a.currentRisk==="medium"?"–°–†–ï–î–ù–ò–ô":"–ù–ò–ó–ö–ò–ô"})]})}),e.jsx(o.button,{onClick:v,className:"mt-8 glass-effect px-6 py-3 rounded-xl hover:bg-red-500/20 transition-colors",whileHover:{scale:1.05},whileTap:{scale:.95},children:e.jsx("span",{className:"text-red-300 font-bold",children:"–ó–∞–≤–µ—Ä—à–∏—Ç—å –∏–≥—Ä—É"})})]}),e.jsx("div",{className:"fixed inset-0 pointer-events-none overflow-hidden",children:e.jsx(o.div,{className:"absolute inset-0 opacity-10",animate:{backgroundPosition:["0% 0%","100% 100%"]},transition:{duration:20,repeat:1/0,ease:"linear"},style:{backgroundImage:`
              linear-gradient(0deg, transparent 24%, rgba(255, 107, 53, 0.05) 25%, rgba(255, 107, 53, 0.05) 26%, transparent 27%, transparent 74%, rgba(255, 107, 53, 0.05) 75%, rgba(255, 107, 53, 0.05) 76%, transparent 77%, transparent),
              linear-gradient(90deg, transparent 24%, rgba(255, 107, 53, 0.05) 25%, rgba(255, 107, 53, 0.05) 26%, transparent 27%, transparent 74%, rgba(255, 107, 53, 0.05) 75%, rgba(255, 107, 53, 0.05) 76%, transparent 77%, transparent)
            `,backgroundSize:"50px 50px"}})})]})]})},mt=()=>{const i=()=>{b.light(),T.getState().endGame()};return e.jsxs("div",{className:"min-h-screen flex flex-col items-center justify-center p-4 bg-gradient-to-br from-background-dark to-background-darker",children:[e.jsxs(o.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},transition:{duration:.6},className:"text-center",children:[e.jsx("h1",{className:"text-4xl font-bold text-primary-orange mb-4",children:"üéÆ –ú–Ω–æ–≥–æ–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–π —Ä–µ–∂–∏–º"}),e.jsx("p",{className:"text-xl text-gray-300 mb-8",children:"–°–∫–æ—Ä–æ –∑–¥–µ—Å—å –±—É–¥—É—Ç —ç–ø–∏—á–µ—Å–∫–∏–µ –¥—É—ç–ª–∏!"})]}),e.jsxs(o.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{duration:.5,delay:.2},className:"glass-effect p-8 rounded-xl text-center max-w-md",children:[e.jsx("div",{className:"text-6xl mb-4",children:"üöß"}),e.jsx("h2",{className:"text-2xl font-bold text-white mb-4",children:"–í —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ"}),e.jsx("p",{className:"text-gray-300 mb-6",children:"–ú—ã —Ä–∞–±–æ—Ç–∞–µ–º –Ω–∞–¥ –∑–∞—Ö–≤–∞—Ç—ã–≤–∞—é—â–∏–º–∏ –º–Ω–æ–≥–æ–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–º–∏ —Ä–µ–∂–∏–º–∞–º–∏:"}),e.jsxs("div",{className:"space-y-3 text-left mb-6",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("span",{className:"text-purple-400",children:"‚öîÔ∏è"}),e.jsx("span",{className:"text-gray-300",children:"–î—É—ç–ª–∏ 1v1 –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏"})]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("span",{className:"text-blue-400",children:"üèÜ"}),e.jsx("span",{className:"text-gray-300",children:"–¢—É—Ä–Ω–∏—Ä—ã –¥–æ 8 –∏–≥—Ä–æ–∫–æ–≤"})]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("span",{className:"text-green-400",children:"ü§ù"}),e.jsx("span",{className:"text-gray-300",children:"–ö–æ–æ–ø–µ—Ä–∞—Ç–∏–≤–Ω—ã–µ —Ä–µ–∂–∏–º—ã"})]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("span",{className:"text-yellow-400",children:"üìä"}),e.jsx("span",{className:"text-gray-300",children:"–ì–ª–æ–±–∞–ª—å–Ω—ã–µ —Ç–∞–±–ª–∏—Ü—ã –ª–∏–¥–µ—Ä–æ–≤"})]})]}),e.jsx(o.button,{onClick:i,className:"w-full glass-effect p-3 rounded-xl hover:bg-orange-500/20 transition-colors border border-orange-400/30",whileHover:{scale:1.02},whileTap:{scale:.98},children:e.jsx("span",{className:"text-lg font-semibold text-orange-400",children:"‚Üê –ù–∞–∑–∞–¥ –≤ –º–µ–Ω—é"})})]}),e.jsx(o.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.5,delay:.4},className:"mt-8 text-center text-gray-400 text-sm",children:e.jsx("p",{children:"üîî –ü–æ–¥–ø–∏—à–∏—Ç–µ—Å—å –Ω–∞ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è, —á—Ç–æ–±—ã —É–∑–Ω–∞—Ç—å –æ –∑–∞–ø—É—Å–∫–µ –ø–µ—Ä–≤—ã–º–∏!"})})]})},ht=()=>{const{player:i}=T(),[a,t]=x.useState(!1),[s,r]=x.useState(null),[n,l]=x.useState(null),[c,u]=x.useState([]),h=x.useRef(null),d=x.useRef([]),g=x.useCallback(()=>{console.log("üîå –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ —Å–µ—Ä–≤–µ—Ä—É –¥—É—ç–ª–µ–π..."),setTimeout(()=>{t(!0),console.log("‚úÖ –ü–æ–¥–∫–ª—é—á–µ–Ω–æ –∫ —Å–µ—Ä–≤–µ—Ä—É –¥—É—ç–ª–µ–π"),h.current=setInterval(()=>{if(d.current.length>0){const w=d.current.shift();w&&u(E=>[...E,w])}},100)},1e3)},[]),f=x.useCallback(()=>{h.current&&(clearInterval(h.current),h.current=null),t(!1),r(null),l(null),u([]),console.log("üîå –û—Ç–∫–ª—é—á–µ–Ω–æ –æ—Ç —Å–µ—Ä–≤–µ—Ä–∞ –¥—É—ç–ª–µ–π")},[]),p=x.useCallback(async()=>{if(!a)throw new Error("–ù–µ –ø–æ–¥–∫–ª—é—á–µ–Ω –∫ —Å–µ—Ä–≤–µ—Ä—É");return console.log("üîç –ü–æ–∏—Å–∫ –¥—É—ç–ª–∏..."),new Promise(w=>{setTimeout(()=>{const E={id:`duel_${Date.now()}`,players:[i.id,"bot_opponent"],status:"waiting",createdAt:Date.now()},_={id:"bot_opponent",name:`–°–æ–ø–µ—Ä–Ω–∏–∫ ${Math.floor(Math.random()*1e3)}`,level:Math.max(1,i.level-2+Math.floor(Math.random()*5)),volts:Math.floor(Math.random()*500)+100,isReady:!1,score:0,streak:0};r(E),l(_),console.log("‚úÖ –î—É—ç–ª—å –Ω–∞–π–¥–µ–Ω–∞!",E),w(E)},2e3+Math.random()*3e3)})},[a,i.id,i.level]),m=x.useCallback(w=>{if(!a||!s){console.warn("‚ö†Ô∏è –ù–µ —É–¥–∞–ª–æ—Å—å –æ—Ç–ø—Ä–∞–≤–∏—Ç—å —Å–æ–æ–±—â–µ–Ω–∏–µ: –Ω–µ—Ç —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è –∏–ª–∏ –∫–æ–º–Ω–∞—Ç—ã");return}const E={...w,timestamp:Date.now()};console.log("üì§ –û—Ç–ø—Ä–∞–≤–∫–∞ —Å–æ–æ–±—â–µ–Ω–∏—è:",E),w.type==="player_ready"&&setTimeout(()=>{d.current.push({type:"player_ready",playerId:"bot_opponent",timestamp:Date.now()})},1e3+Math.random()*2e3),w.type==="player_action"&&setTimeout(()=>{Math.random()<.6&&d.current.push({type:Math.random()<.2?"player_shocked":"player_action",playerId:"bot_opponent",data:{points:Math.floor(Math.random()*60)+20,volts:Math.floor(Math.random()*40)+10},timestamp:Date.now()})},500+Math.random()*2e3)},[a,s]),v=x.useCallback(()=>{m({type:"player_ready",playerId:i.id})},[m,i.id]),y=x.useCallback((w,E)=>{m({type:"player_action",playerId:i.id,data:{points:w,volts:E}})},[m,i.id]),S=x.useCallback(w=>{m({type:"player_shocked",playerId:i.id,data:{damage:w}})},[m,i.id]),C=x.useCallback(()=>{s&&m({type:"game_end",playerId:i.id,data:{reason:"left"}}),r(null),l(null),u([])},[s,m,i.id]);return x.useEffect(()=>()=>{f()},[f]),{isConnected:a,currentRoom:s,opponent:n,messages:c,connect:g,disconnect:f,findDuel:p,setReady:v,sendPlayerAction:y,sendPlayerShocked:S,leaveDuel:C,setOpponent:l}},gt=()=>{const{player:i,endGame:a}=T(),{isConnected:t,currentRoom:s,opponent:r,messages:n,connect:l,disconnect:c,findDuel:u,setReady:h,sendPlayerAction:d,sendPlayerShocked:g,leaveDuel:f,setOpponent:p}=ht(),[m,v]=x.useState({status:"connecting",timeLeft:60,winner:null,roundNumber:1,maxRounds:3}),[y,S]=x.useState({id:i.id,name:i.name,volts:i.volts,level:i.level,isReady:!1,isAlive:!0,score:0,streak:0}),[C,w]=x.useState(0),[E,_]=x.useState(0);x.useEffect(()=>(l(),()=>{c()}),[l,c]),x.useEffect(()=>{t&&m.status==="connecting"&&(v(j=>({...j,status:"searching"})),u().then(()=>{v(j=>({...j,status:"found"})),b.medium()}))},[t,m.status,u]),x.useEffect(()=>{const j=n[n.length-1];if(j)switch(j.type){case"player_ready":j.playerId!==i.id&&p(N=>N?{...N,isReady:!0}:null);break;case"player_action":if(j.playerId!==i.id&&r){const{points:N,volts:R}=j.data;p(P=>P?{...P,score:P.score+N,volts:P.volts+R,streak:P.streak+1}:null)}break;case"player_shocked":if(j.playerId!==i.id&&r){const{damage:N}=j.data;p(R=>R?{...R,volts:Math.max(0,R.volts-N),streak:0}:null)}break;case"game_start":v(N=>({...N,status:"countdown"})),w(3);break;case"game_end":v(N=>({...N,status:"finished"}));break}},[n,i.id,r,p]),x.useEffect(()=>{m.status==="found"&&y.isReady&&(r!=null&&r.isReady)&&(v(j=>({...j,status:"countdown"})),w(3))},[m.status,y.isReady,r==null?void 0:r.isReady]),x.useEffect(()=>{if(m.status==="countdown"&&C>0){const j=setTimeout(()=>{w(N=>N-1),b.light()},1e3);return()=>clearTimeout(j)}else m.status==="countdown"&&C===0&&(v(j=>({...j,status:"playing"})),_(m.timeLeft),b.heavy())},[m.status,C,m.timeLeft]),x.useEffect(()=>{if(m.status==="playing"&&E>0){const j=setTimeout(()=>{_(N=>N-1)},1e3);return()=>clearTimeout(j)}else if(m.status==="playing"&&E===0){const j=y.score>((r==null?void 0:r.score)||0)?y.id:((r==null?void 0:r.score)||0)>y.score?r==null?void 0:r.id:null;v(N=>({...N,status:"finished",winner:j}))}},[m.status,E,y.score,r==null?void 0:r.score]);const k=()=>{S(j=>({...j,isReady:!0})),h(),b.medium()},I=x.useCallback(()=>{if(m.status!=="playing")return;const j=Math.floor(Math.random()*80)+20;Math.random()<.25?(S(P=>({...P,volts:Math.max(0,P.volts-30),streak:0})),g(30),b.heavy()):(S(R=>({...R,score:R.score+j,volts:R.volts+j,streak:R.streak+1})),d(j,j),b.light())},[m.status,d,g]),M=()=>{b.light(),f(),a()},A=()=>{switch(m.status){case"connecting":return"–ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ —Å–µ—Ä–≤–µ—Ä—É...";case"searching":return"–ü–æ–∏—Å–∫ —Å–æ–ø–µ—Ä–Ω–∏–∫–∞...";case"found":return"–°–æ–ø–µ—Ä–Ω–∏–∫ –Ω–∞–π–¥–µ–Ω!";case"ready":return"–ü—Ä–∏–≥–æ—Ç–æ–≤—å—Ç–µ—Å—å!";case"countdown":return`–ù–∞—á–∏–Ω–∞–µ–º —á–µ—Ä–µ–∑ ${C}`;case"playing":return`–û—Å—Ç–∞–ª–æ—Å—å: ${E}—Å`;case"finished":return m.winner?m.winner===y.id?"–ü–æ–±–µ–¥–∞!":"–ü–æ—Ä–∞–∂–µ–Ω–∏–µ":"–ù–∏—á—å—è!";default:return""}},L=()=>t?s?"üü¢ –í –¥—É—ç–ª–∏":"üü° –ü–æ–¥–∫–ª—é—á–µ–Ω":"üî¥ –ù–µ –ø–æ–¥–∫–ª—é—á–µ–Ω";return e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-background-dark to-background-darker",children:[e.jsx("div",{className:"bg-black/40 border-b border-white/10 p-4",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("button",{onClick:M,className:"text-gray-400 hover:text-white transition-colors",children:"‚Üê –ù–∞–∑–∞–¥"}),e.jsx("h1",{className:"text-xl font-bold text-primary-orange",children:"‚öîÔ∏è –î–£–≠–õ–¨ REAL-TIME"}),e.jsx("div",{className:"text-sm text-gray-400",children:L()})]})}),e.jsxs("div",{className:"bg-black/30 p-4 text-center",children:[e.jsx(o.div,{className:"text-2xl font-bold text-white",animate:{scale:m.status==="countdown"?[1,1.2,1]:1},transition:{duration:.5,repeat:m.status==="countdown"?1/0:0},children:A()}),s&&e.jsxs("div",{className:"text-sm text-gray-400 mt-2",children:["–ö–æ–º–Ω–∞—Ç–∞: ",s.id.slice(-8)]})]}),(m.status==="found"||m.status==="ready"||m.status==="countdown"||m.status==="playing"||m.status==="finished")&&r&&e.jsxs("div",{className:"flex justify-between items-center p-4 bg-black/20",children:[e.jsx(o.div,{className:"glass-effect p-4 rounded-xl flex-1 mr-2",animate:{borderColor:y.isReady?"#10B981":"#6B7280",boxShadow:y.streak>0?"0 0 20px #10B981":"none"},children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-lg font-bold text-green-400",children:y.name}),e.jsxs("div",{className:"text-sm text-gray-300",children:["–£—Ä–æ–≤–µ–Ω—å ",y.level]}),e.jsx("div",{className:"text-2xl font-bold text-white mt-2",children:y.score}),e.jsx("div",{className:"text-xs text-gray-400",children:"–û—á–∫–∏"}),e.jsxs("div",{className:"text-sm text-yellow-400 mt-1",children:["–°–µ—Ä–∏—è: ",y.streak]}),e.jsxs("div",{className:"text-sm text-blue-400",children:[y.volts,"‚ö°"]}),y.isReady&&e.jsx("div",{className:"text-xs text-green-400 mt-1",children:"‚úì –ì–æ—Ç–æ–≤"})]})}),e.jsx("div",{className:"px-4",children:e.jsx("div",{className:"text-3xl font-bold text-red-400",children:"VS"})}),e.jsx(o.div,{className:"glass-effect p-4 rounded-xl flex-1 ml-2",animate:{borderColor:r.isReady?"#10B981":"#6B7280",boxShadow:r.streak>0?"0 0 20px #EF4444":"none"},children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-lg font-bold text-red-400",children:r.name}),e.jsxs("div",{className:"text-sm text-gray-300",children:["–£—Ä–æ–≤–µ–Ω—å ",r.level]}),e.jsx("div",{className:"text-2xl font-bold text-white mt-2",children:r.score}),e.jsx("div",{className:"text-xs text-gray-400",children:"–û—á–∫–∏"}),e.jsxs("div",{className:"text-sm text-yellow-400 mt-1",children:["–°–µ—Ä–∏—è: ",r.streak]}),e.jsxs("div",{className:"text-sm text-blue-400",children:[r.volts,"‚ö°"]}),r.isReady&&e.jsx("div",{className:"text-xs text-green-400 mt-1",children:"‚úì –ì–æ—Ç–æ–≤"})]})})]}),e.jsx("div",{className:"flex-1 flex flex-col items-center justify-center p-4",children:e.jsxs(H,{mode:"wait",children:[(m.status==="connecting"||m.status==="searching")&&e.jsxs(o.div,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.8},className:"text-center",children:[e.jsx("div",{className:"text-6xl mb-4",children:m.status==="connecting"?"ÔøΩ":"ÔøΩüîç"}),e.jsx("div",{className:"text-xl text-gray-300 mb-4",children:m.status==="connecting"?"–ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ —Å–µ—Ä–≤–µ—Ä—É...":"–ò—â–µ–º –¥–æ—Å—Ç–æ–π–Ω–æ–≥–æ —Å–æ–ø–µ—Ä–Ω–∏–∫–∞..."}),e.jsx("div",{className:"animate-spin text-4xl",children:"‚ö°"})]},"searching"),m.status==="found"&&e.jsxs(o.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"text-center",children:[e.jsx("div",{className:"text-6xl mb-4",children:"‚öîÔ∏è"}),e.jsx("div",{className:"text-xl text-white mb-6",children:"–°–æ–ø–µ—Ä–Ω–∏–∫ –Ω–∞–π–¥–µ–Ω!"}),e.jsxs("div",{className:"text-lg text-gray-300 mb-4",children:[r==null?void 0:r.name," (–£—Ä–æ–≤–µ–Ω—å ",r==null?void 0:r.level,")"]}),e.jsx(o.button,{onClick:k,disabled:y.isReady,className:`px-8 py-4 rounded-xl font-bold text-lg transition-colors ${y.isReady?"bg-green-600 text-white cursor-default":"bg-orange-600 hover:bg-orange-500 text-white"}`,whileHover:{scale:y.isReady?1:1.05},whileTap:{scale:y.isReady?1:.95},children:y.isReady?"‚úì –ì–æ—Ç–æ–≤! –ñ–¥–µ–º —Å–æ–ø–µ—Ä–Ω–∏–∫–∞...":"–ì–æ—Ç–æ–≤ –∫ –±–æ—é!"})]},"found"),m.status==="countdown"&&e.jsx(o.div,{initial:{opacity:0,scale:2},animate:{opacity:1,scale:1},exit:{opacity:0,scale:0},className:"text-center",children:e.jsx(o.div,{className:"text-9xl font-bold text-red-400",animate:{scale:[1,1.2,1]},transition:{duration:.5},children:C||"‚ö°"})},"countdown"),m.status==="playing"&&e.jsxs(o.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"w-full max-w-md",children:[e.jsx("div",{className:"w-full h-48 bg-orange-500 rounded-lg cursor-pointer flex items-center justify-center hover:bg-orange-600 transition-colors",onClick:I,children:e.jsx("span",{className:"text-white text-2xl font-bold",children:"‚ö° –ö–õ–ò–ö ‚ö°"})}),e.jsx("div",{className:"text-center mt-4 text-white",children:"üî• Real-time –¥—É—ç–ª—å! –ö–ª–∏–∫–∞–π—Ç–µ –±—ã—Å—Ç—Ä–æ! üî•"}),e.jsxs("div",{className:"text-center mt-2 text-gray-400 text-sm",children:["–í—Ä–µ–º—è: ",E,"—Å | –í–∞—à —Å—á–µ—Ç: ",y.score," | –°–æ–ø–µ—Ä–Ω–∏–∫: ",(r==null?void 0:r.score)||0]})]},"playing"),m.status==="finished"&&e.jsxs(o.div,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.8},className:"text-center",children:[e.jsx("div",{className:"text-6xl mb-4",children:m.winner===y.id?"üèÜ":m.winner===(r==null?void 0:r.id)?"üíÄ":"ü§ù"}),e.jsx("div",{className:"text-3xl font-bold text-white mb-4",children:A()}),e.jsxs("div",{className:"text-lg text-gray-300 mb-6",children:["–§–∏–Ω–∞–ª—å–Ω—ã–π —Å—á–µ—Ç: ",y.score," - ",(r==null?void 0:r.score)||0]}),m.winner===y.id&&e.jsxs("div",{className:"text-green-400 text-lg mb-4",children:["+",Math.floor(y.score*.1)," –æ–ø—ã—Ç–∞ –∑–∞ –ø–æ–±–µ–¥—É!"]}),e.jsx(o.button,{onClick:M,className:"px-8 py-4 bg-orange-600 hover:bg-orange-500 text-white rounded-xl font-bold text-lg transition-colors",whileHover:{scale:1.05},whileTap:{scale:.95},children:"–í–µ—Ä–Ω—É—Ç—å—Å—è –≤ –º–µ–Ω—é"})]},"finished")]})})]})},ft=({isVisible:i,newLevel:a,voltsReward:t,onClose:s})=>{if(x.useEffect(()=>{i&&b.levelUp()},[i]),!a||!a.level)return i&&console.warn("LevelUpNotification: newLevel is invalid",a),null;const r=U(a.level),n=U(a.level-1),l=r!==n;return e.jsx(H,{children:i&&e.jsx(o.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/80 flex items-center justify-center z-50",onClick:s,children:e.jsxs(o.div,{initial:{scale:.5,opacity:0,rotateY:-90},animate:{scale:1,opacity:1,rotateY:0},exit:{scale:.5,opacity:0,rotateY:90},transition:{type:"spring",stiffness:300,damping:20,duration:.6},className:"glass-effect p-8 max-w-md mx-4 text-center relative overflow-hidden",onClick:c=>c.stopPropagation(),children:[e.jsx("div",{className:"absolute inset-0 pointer-events-none",children:[...Array(20)].map((c,u)=>e.jsx(o.div,{className:"absolute w-1 h-1 bg-yellow-300 rounded-full",style:{left:`${Math.random()*100}%`,top:`${Math.random()*100}%`},animate:{opacity:[0,1,0],scale:[0,1,0]},transition:{duration:2,repeat:1/0,delay:Math.random()*2}},u))}),e.jsxs(o.div,{animate:{scale:[1,1.1,1]},transition:{duration:.6,delay:.3},children:[e.jsx("div",{className:"text-6xl mb-4",children:"üéâ"}),e.jsx(o.h2,{className:"text-3xl font-bold text-primary-orange mb-2",animate:{textShadow:["0 0 10px rgba(255, 107, 53, 0.5)","0 0 20px rgba(255, 107, 53, 0.8)","0 0 10px rgba(255, 107, 53, 0.5)"]},transition:{duration:1.5,repeat:1/0},children:"–ù–û–í–´–ô –£–†–û–í–ï–ù–¨!"}),e.jsxs("div",{className:"mb-4",children:[e.jsx("div",{className:"text-5xl font-bold text-accent-blue mb-2",children:a.level}),e.jsx("div",{className:"text-xl text-yellow-300 font-semibold mb-1",children:a.title}),e.jsx("div",{className:"text-sm text-gray-300 italic",children:a.description})]}),e.jsxs(o.div,{className:"glass-effect p-4 rounded-lg bg-gradient-to-r from-yellow-500/20 to-orange-500/20",animate:{boxShadow:["0 0 20px rgba(255, 193, 7, 0.3)","0 0 30px rgba(255, 193, 7, 0.6)","0 0 20px rgba(255, 193, 7, 0.3)"]},transition:{duration:2,repeat:1/0},children:[e.jsx("div",{className:"text-lg font-bold text-yellow-300 mb-1",children:"–ù–∞–≥—Ä–∞–¥–∞ –∑–∞ —É—Ä–æ–≤–µ–Ω—å:"}),e.jsxs("div",{className:"text-2xl font-bold text-white",children:["+",t,"‚ö° –í–æ–ª—å—Ç"]}),l&&e.jsxs("div",{className:"mt-3 pt-3 border-t border-yellow-400/30",children:[e.jsx("div",{className:"text-sm font-bold text-blue-300 mb-2",children:"üé® –ù–æ–≤–æ–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Ä–æ–∑–µ—Ç–∫–∏!"}),e.jsxs("div",{className:"flex items-center justify-center space-x-4",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-xs text-gray-400",children:"–ë—ã–ª–æ:"}),e.jsx("img",{src:n,alt:"–ü—Ä–µ–¥—ã–¥—É—â–∞—è —Ä–æ–∑–µ—Ç–∫–∞",className:"w-8 h-8 rounded border border-gray-600"})]}),e.jsx("div",{className:"text-yellow-400",children:"‚Üí"}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-xs text-gray-400",children:"–°—Ç–∞–ª–æ:"}),e.jsx("img",{src:r,alt:"–ù–æ–≤–∞—è —Ä–æ–∑–µ—Ç–∫–∞",className:"w-8 h-8 rounded border border-blue-400"})]})]})]})]})]}),e.jsx(o.button,{onClick:s,className:"mt-6 px-6 py-3 bg-primary-orange hover:bg-primary-orange/80 text-white font-bold rounded-lg transition-colors",whileHover:{scale:1.05},whileTap:{scale:.95},children:"–ü—Ä–æ–¥–æ–ª–∂–∏—Ç—å"}),e.jsx("div",{className:"absolute inset-0 pointer-events-none overflow-hidden",children:[...Array(15)].map((c,u)=>e.jsx(o.div,{className:"absolute w-2 h-2 rounded-full",style:{backgroundColor:["#FFD700","#FF6B35","#00D4FF","#E8FF00","#8A2BE2"][u%5],left:`${50+(Math.random()-.5)*60}%`,top:"20%"},animate:{y:["0vh","80vh"],x:[(Math.random()-.5)*200,(Math.random()-.5)*400],rotate:[0,360],opacity:[1,0]},transition:{duration:3,delay:Math.random()*.5,ease:"easeOut"}},`confetti-${u}`))})]})})})};function pt(){const{gameState:i,levelUpNotification:a,hideLevelUpNotification:t}=T();return x.useEffect(()=>{var s,r;if(typeof window<"u"&&((s=window.Telegram)!=null&&s.WebApp)){const n=window.Telegram.WebApp;n.ready(),n.expand(),n.setHeaderColor("#FF6B35"),n.setBackgroundColor("#1A1A1A"),n.enableClosingConfirmation(),n.MainButton&&(n.MainButton.setText("üéÆ –ò–≥—Ä–∞—Ç—å"),n.MainButton.color="#FF6B35",n.MainButton.textColor="#FFFFFF"),console.log("Telegram WebApp initialized:",{platform:n.platform,version:n.version,colorScheme:n.colorScheme,user:(r=n.initDataUnsafe)==null?void 0:r.user})}else console.log("Running outside Telegram environment")},[]),console.log("App rendering, mode:",i.mode),e.jsx(et,{children:e.jsxs("div",{className:"App",children:[i.mode==="menu"&&e.jsx(at,{}),i.mode==="single"&&e.jsx(ut,{}),i.mode==="multiplayer"&&e.jsx(mt,{}),i.mode==="duel"&&e.jsx(gt,{}),a.level&&e.jsx(ft,{isVisible:a.isVisible,newLevel:a.level,voltsReward:a.voltsReward||0,onClose:t})]})})}var te,se;if(typeof window<"u"&&((te=window.Telegram)!=null&&te.WebApp)){const i=window.Telegram.WebApp;i.ready(),i.expand(),i.setHeaderColor("#000000"),i.setBackgroundColor("#000000"),i.BackButton.hide(),i.HapticFeedback&&i.HapticFeedback.selectionChanged(),console.log("Telegram WebApp initialized:",{version:i.version,platform:i.platform,colorScheme:i.colorScheme,user:(se=i.initDataUnsafe)==null?void 0:se.user})}z.createRoot(document.getElementById("root")).render(e.jsx(ae.StrictMode,{children:e.jsx(pt,{})}));
//# sourceMappingURL=index-DcFGHnAu.js.map
