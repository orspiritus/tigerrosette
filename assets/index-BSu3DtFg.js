var se=Object.defineProperty;var ae=(a,s,t)=>s in a?se(a,s,{enumerable:!0,configurable:!0,writable:!0,value:t}):a[s]=t;var w=(a,s,t)=>ae(a,typeof s!="symbol"?s+"":s,t);import{j as e,m as c,A as P}from"./motion-3WHHzQTP.js";import{a as ie,r as u,g as re,R as W}from"./vendor-CIP6LD3P.js";(function(){const s=document.createElement("link").relList;if(s&&s.supports&&s.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))i(r);new MutationObserver(r=>{for(const l of r)if(l.type==="childList")for(const o of l.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&i(o)}).observe(document,{childList:!0,subtree:!0});function t(r){const l={};return r.integrity&&(l.integrity=r.integrity),r.referrerPolicy&&(l.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?l.credentials="include":r.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function i(r){if(r.ep)return;r.ep=!0;const l=t(r);fetch(r.href,l)}})();var H={},B=ie;H.createRoot=B.createRoot,H.hydrateRoot=B.hydrateRoot;const le={},V=a=>{let s;const t=new Set,i=(h,p)=>{const g=typeof h=="function"?h(s):h;if(!Object.is(g,s)){const m=s;s=p??(typeof g!="object"||g===null)?g:Object.assign({},s,g),t.forEach(f=>f(s,m))}},r=()=>s,d={setState:i,getState:r,getInitialState:()=>x,subscribe:h=>(t.add(h),()=>t.delete(h)),destroy:()=>{(le?"production":void 0)!=="production"&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),t.clear()}},x=s=a(i,r,d);return d},ne=a=>a?V(a):V;var G={exports:{}},K={},Y={exports:{}},X={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var A=u;function oe(a,s){return a===s&&(a!==0||1/a===1/s)||a!==a&&s!==s}var ce=typeof Object.is=="function"?Object.is:oe,de=A.useState,xe=A.useEffect,me=A.useLayoutEffect,ue=A.useDebugValue;function he(a,s){var t=s(),i=de({inst:{value:t,getSnapshot:s}}),r=i[0].inst,l=i[1];return me(function(){r.value=t,r.getSnapshot=s,O(r)&&l({inst:r})},[a,t,s]),xe(function(){return O(r)&&l({inst:r}),a(function(){O(r)&&l({inst:r})})},[a]),ue(t),t}function O(a){var s=a.getSnapshot;a=a.value;try{var t=s();return!ce(a,t)}catch{return!0}}function ge(a,s){return s()}var pe=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?ge:he;X.useSyncExternalStore=A.useSyncExternalStore!==void 0?A.useSyncExternalStore:pe;Y.exports=X;var fe=Y.exports;/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var F=u,ve=fe;function be(a,s){return a===s&&(a!==0||1/a===1/s)||a!==a&&s!==s}var ye=typeof Object.is=="function"?Object.is:be,je=ve.useSyncExternalStore,Ne=F.useRef,we=F.useEffect,ke=F.useMemo,Se=F.useDebugValue;K.useSyncExternalStoreWithSelector=function(a,s,t,i,r){var l=Ne(null);if(l.current===null){var o={hasValue:!1,value:null};l.current=o}else o=l.current;l=ke(function(){function d(m){if(!x){if(x=!0,h=m,m=i(m),r!==void 0&&o.hasValue){var f=o.value;if(r(f,m))return p=f}return p=m}if(f=p,ye(h,m))return f;var y=i(m);return r!==void 0&&r(f,y)?(h=m,f):(h=m,p=y)}var x=!1,h,p,g=t===void 0?null:t;return[function(){return d(s())},g===null?void 0:function(){return d(g())}]},[s,t,i,r]);var n=je(a,l[0],l[1]);return we(function(){o.hasValue=!0,o.value=n},[n]),Se(n),n};G.exports=K;var Ce=G.exports;const Ee=re(Ce),J={},{useDebugValue:Te}=W,{useSyncExternalStoreWithSelector:Me}=Ee;let D=!1;const Ae=a=>a;function Re(a,s=Ae,t){(J?"production":void 0)!=="production"&&t&&!D&&(console.warn("[DEPRECATED] Use `createWithEqualityFn` instead of `create` or use `useStoreWithEqualityFn` instead of `useStore`. They can be imported from 'zustand/traditional'. https://github.com/pmndrs/zustand/discussions/1937"),D=!0);const i=Me(a.subscribe,a.getState,a.getServerState||a.getInitialState,s,t);return Te(i),i}const z=a=>{(J?"production":void 0)!=="production"&&typeof a!="function"&&console.warn("[DEPRECATED] Passing a vanilla store will be unsupported in a future version. Instead use `import { useStore } from 'zustand'`.");const s=typeof a=="function"?ne(a):a,t=(i,r)=>Re(s,i,r);return Object.assign(t,s),t},Ie=a=>a?z(a):z,C=[{level:1,requiredExperience:0,voltsReward:0,title:"–ù–æ–≤–∏—á–æ–∫",description:"–ü–µ—Ä–≤—ã–µ —à–∞–≥–∏ —Å —ç–ª–µ–∫—Ç—Ä–∏—á–µ—Å—Ç–≤–æ–º"},{level:2,requiredExperience:100,voltsReward:50,title:"–£—á–µ–Ω–∏–∫",description:"–û—Å–≤–∞–∏–≤–∞–µ—Ç–µ –æ—Å–Ω–æ–≤—ã"},{level:3,requiredExperience:250,voltsReward:75,title:"–ü—Ä–∞–∫—Ç–∏–∫–∞–Ω—Ç",description:"‚ö†Ô∏è –û–ø–∞—Å–Ω–æ! –¢–µ–ø–µ—Ä—å —É–¥–∞—Ä —Ç–æ–∫–æ–º –æ—Ç–Ω–∏–º–∞–µ—Ç –æ—á–∫–∏"},{level:4,requiredExperience:500,voltsReward:100,title:"–õ—é–±–∏—Ç–µ–ª—å",description:"üî• –ö—Ä–∏—Ç–∏—á–Ω–æ! –ù–∞–ø—Ä—è–∂–µ–Ω–∏–µ –æ—Ç–Ω–∏–º–∞–µ—Ç—Å—è –æ—Ç –æ—á–∫–æ–≤"},{level:5,requiredExperience:850,voltsReward:150,title:"–≠–Ω—Ç—É–∑–∏–∞—Å—Ç",description:"–ü—Ä–æ—è–≤–ª—è–µ—Ç–µ —Å–º–µ–ª–æ—Å—Ç—å –≤ –æ–ø–∞—Å–Ω–æ–π –∏–≥—Ä–µ"},{level:6,requiredExperience:1300,voltsReward:200,title:"–°–º–µ–ª—å—á–∞–∫",description:"–ù–µ –±–æ–∏—Ç–µ—Å—å —Ä–∏—Å–∫–æ–≤–∞—Ç—å"},{level:7,requiredExperience:1900,voltsReward:250,title:"–•—Ä–∞–±—Ä–µ—Ü",description:"–ò–¥–µ—Ç–µ –Ω–∞ –æ–ø—Ä–∞–≤–¥–∞–Ω–Ω—ã–π —Ä–∏—Å–∫"},{level:8,requiredExperience:2600,voltsReward:300,title:"–û—Ç–≤–∞–∂–Ω—ã–π",description:"–ü–æ–∫–æ—Ä—è–µ—Ç–µ —Å–ª–æ–∂–Ω–æ—Å—Ç–∏"},{level:9,requiredExperience:3450,voltsReward:400,title:"–ë–µ–∑—Ä–∞—Å—Å—É–¥–Ω—ã–π",description:"–ò–≥—Ä–∞–µ—Ç–µ —Å –æ–ø–∞—Å–Ω–æ—Å—Ç—å—é"},{level:10,requiredExperience:4500,voltsReward:500,title:"–ü—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª",description:"–ú–∞—Å—Ç–µ—Ä—Å–∫–∏ –≤–ª–∞–¥–µ–µ—Ç–µ —Ä–∏—Å–∫–æ–º"},{level:11,requiredExperience:5800,voltsReward:600,title:"–≠–∫—Å–ø–µ—Ä—Ç",description:"–ó–Ω–∞–µ—Ç–µ –≤—Å–µ —Ç–æ–Ω–∫–æ—Å—Ç–∏"},{level:12,requiredExperience:7400,voltsReward:750,title:"–ú–∞—Å—Ç–µ—Ä",description:"–ü—Ä–µ–≤–æ—Å—Ö–æ–¥–∏—Ç–µ –æ–∂–∏–¥–∞–Ω–∏—è"},{level:13,requiredExperience:9300,voltsReward:900,title:"–í–∏—Ä—Ç—É–æ–∑",description:"–ò–≥—Ä–∞–µ—Ç–µ –∫–∞–∫ —Ö—É–¥–æ–∂–Ω–∏–∫"},{level:14,requiredExperience:11600,voltsReward:1100,title:"–ì—É—Ä—É",description:"–î–æ—Å—Ç–∏–≥–ª–∏ –ø—Ä–æ—Å–≤–µ—Ç–ª–µ–Ω–∏—è"},{level:15,requiredExperience:14400,voltsReward:1300,title:"–°–µ–Ω—Å–µ–π",description:"–£—á–∏—Ç–µ –¥—Ä—É–≥–∏—Ö"},{level:16,requiredExperience:17800,voltsReward:1500,title:"–õ–µ–≥–µ–Ω–¥–∞",description:"–û –≤–∞—Å —Å–ª–∞–≥–∞—é—Ç –ª–µ–≥–µ–Ω–¥—ã"},{level:17,requiredExperience:21900,voltsReward:1750,title:"–ú–∏—Ñ",description:"–ù–µ–¥–æ—Å—Ç–∏–∂–∏–º—ã–π –∏–¥–µ–∞–ª"},{level:18,requiredExperience:26800,voltsReward:2e3,title:"–¢–∏—Ç–∞–Ω",description:"–°–≤–µ—Ä—Ö—á–µ–ª–æ–≤–µ—á–µ—Å–∫–∏–µ —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏"},{level:19,requiredExperience:32600,voltsReward:2300,title:"–ë–æ–≥ –≠–ª–µ–∫—Ç—Ä–∏—á–µ—Å—Ç–≤–∞",description:"–ü–æ–≤–µ–ª–µ–≤–∞–µ—Ç–µ –º–æ–ª–Ω–∏—è–º–∏"},{level:20,requiredExperience:4e4,voltsReward:2500,title:"–ó–µ–≤—Å",description:"–ê–±—Å–æ–ª—é—Ç–Ω–∞—è –≤–ª–∞—Å—Ç—å –Ω–∞–¥ —Ç–æ–∫–æ–º"}];function R(a){let s=C[0];for(let t=C.length-1;t>=0;t--)if(a>=C[t].requiredExperience){s=C[t];break}return s}function Q(a){const s=R(a),t=C.findIndex(r=>r.level===s.level)+1;if(t>=C.length)return{current:a,required:a,remaining:0,nextLevel:null};const i=C[t];return{current:a-s.requiredExperience,required:i.requiredExperience-s.requiredExperience,remaining:i.requiredExperience-a,nextLevel:i}}function Pe(a){const{current:s,required:t}=Q(a);return t===0?100:Math.min(100,s/t*100)}const k={SAFE_CLICK:10,RISKY_CLICK:15,EXTREME_CLICK:25,STREAK_5:50,STREAK_10:100,STREAK_25:250,STREAK_50:500,SHOCK_SURVIVAL:5};function E(a){const s="/tigerrosette/";return a<=5?`${s}Media/Pictures/tigrrozetka_1.png`:a<=10?`${s}Media/Pictures/tigrrozetka_2.png`:a<=15?`${s}Media/Pictures/tigrrozetka_3.png`:`${s}Media/Pictures/tigrrozetka_4.png`}const Fe={mode:"menu",isPlaying:!1,isPaused:!1,gameTime:0,score:0},$e={id:"player1",name:"–°–º–µ–ª—å—á–∞–∫",volts:0,level:1,experience:0,streak:0,totalClicks:0,survivalTime:0},U={difficulty:"easy",aiPattern:"regular",currentRisk:"low",streakCount:0,timeInSafeZone:0,lastClickTime:0,warningActive:!1,shockActive:!1},_e={volume:.7,enabled:!0,backgroundMusicEnabled:!0},Le=[{id:"first_click",name:"–ü–µ—Ä–≤–æ–µ –ø—Ä–∏–∫–æ—Å–Ω–æ–≤–µ–Ω–∏–µ",description:"–ù–∞–∂–º–∏ –Ω–∞ —Ä–æ–∑–µ—Ç–∫—É –≤–ø–µ—Ä–≤—ã–µ",icon:"‚ö°",requirement:1,progress:0,completed:!1,reward:50,category:"special"},{id:"survivor_5",name:"–ñ–∏–≤—á–∏–∫",description:"–°–µ—Ä–∏—è –∏–∑ 5 —É—Å–ø–µ—à–Ω—ã—Ö –Ω–∞–∂–∞—Ç–∏–π",icon:"üèÉ",requirement:5,progress:0,completed:!1,reward:100,category:"streak"},{id:"survivor_25",name:"–ù–µ—É–±–∏–≤–∞–µ–º—ã–π",description:"–°–µ—Ä–∏—è –∏–∑ 25 —É—Å–ø–µ—à–Ω—ã—Ö –Ω–∞–∂–∞—Ç–∏–π",icon:"ÔøΩ",requirement:25,progress:0,completed:!1,reward:500,category:"streak"},{id:"risk_taker",name:"–ë–µ–∑—Ä–∞—Å—Å—É–¥–Ω—ã–π",description:"50 –Ω–∞–∂–∞—Ç–∏–π –≤ —Ä–µ–∂–∏–º–µ High Risk",icon:"üî•",requirement:50,progress:0,completed:!1,reward:500,category:"risk"},{id:"time_survivor",name:"–í—ã–∂–∏–≤–∞–ª—å—â–∏–∫",description:"–í—ã–∂–∏–≤–∏ 5 –º–∏–Ω—É—Ç –±–µ–∑ –ø–æ—Ä–∞–∂–µ–Ω–∏—è",icon:"‚è∞",requirement:300,progress:0,completed:!1,reward:1e3,category:"survival"}],S=Ie((a,s)=>({gameState:Fe,player:$e,singleMode:U,achievements:Le,sounds:_e,levelUpNotification:{isVisible:!1,level:null,voltsReward:0},startSingleMode:t=>{a({gameState:{...s().gameState,mode:"single",isPlaying:!0,gameTime:0,score:0},singleMode:{...U,difficulty:t}})},clickOutlet:()=>{const t=s(),i=Date.now(),r=i-t.singleMode.lastClickTime;let l="low";r<1e3?l="extreme":r<2e3?l="high":r<3e3&&(l="medium"),a({player:{...t.player,totalClicks:t.player.totalClicks+1},singleMode:{...t.singleMode,lastClickTime:i,currentRisk:l}})},updateScore:t=>{const i=s(),r=i.gameState.score+t.totalPoints,l=i.player.volts+t.totalPoints,o=t.reason!=="–ü–æ—Ä–∞–∂–µ–Ω–∏–µ —Ç–æ–∫–æ–º",n=o?i.player.streak+1:0,d=o?i.singleMode.streakCount+1:0;let x=0;o?(x=k.SAFE_CLICK,t.riskMultiplier>=2&&(x=k.RISKY_CLICK),t.riskMultiplier>=3&&(x=k.EXTREME_CLICK),n===5&&(x+=k.STREAK_5),n===10&&(x+=k.STREAK_10),n===25&&(x+=k.STREAK_25),n===50&&(x+=k.STREAK_50)):x=k.SHOCK_SURVIVAL,a({gameState:{...i.gameState,score:r},player:{...i.player,volts:l,streak:n},singleMode:{...i.singleMode,streakCount:d}});const{addExperience:h}=s();h(x);const{unlockAchievement:p}=s();i.player.totalClicks===0&&p("first_click"),n===5&&p("survivor_5"),n===10&&p("survivor_10"),n===25&&p("survivor_25")},triggerShock:()=>{const t=s();let i=t.gameState.score,r=t.player.volts,l="";const o=R(t.player.experience).level;if(o>=4){const n=Math.min(t.player.volts,Math.floor(t.gameState.score*.1));i=Math.max(0,t.gameState.score-n),l=`–ü–æ—Ç–µ—Ä—è–Ω–æ ${n} –æ—á–∫–æ–≤ (–Ω–∞–ø—Ä—è–∂–µ–Ω–∏–µ)!`}else if(o>=3){const n=Math.floor(t.gameState.score*.05);i=Math.max(0,t.gameState.score-n),l=`–ü–æ—Ç–µ—Ä—è–Ω–æ ${n} –æ—á–∫–æ–≤!`}a({gameState:{...t.gameState,score:i},singleMode:{...t.singleMode,shockActive:!0,streakCount:0},player:{...t.player,streak:0,volts:r}}),l&&typeof window<"u"&&(window.lastPenaltyMessage=l),setTimeout(()=>{a({singleMode:{...s().singleMode,shockActive:!1}})},500)},triggerWarning:()=>{const t=s();a({singleMode:{...t.singleMode,warningActive:!0}}),setTimeout(()=>{a({singleMode:{...s().singleMode,warningActive:!1}})},2e3)},endGame:()=>{a({gameState:{...s().gameState,mode:"menu",isPlaying:!1}})},unlockAchievement:t=>{const i=s(),r=i.achievements.find(l=>l.id===t);r&&!r.completed&&a({achievements:i.achievements.map(l=>l.id===t?{...l,completed:!0,progress:l.requirement}:l),player:{...i.player,volts:i.player.volts+r.reward}})},updatePlayerStats:t=>{const i=s();a({player:{...i.player,...t}})},addExperience:t=>{const i=s(),r=i.player.experience+t,l=R(i.player.experience),o=R(r);if(o.level>l.level){const n=i.player.volts+o.voltsReward;a({player:{...i.player,experience:r,level:o.level,volts:n}});const{showLevelUpNotification:d}=s();d(o,o.voltsReward)}else a({player:{...i.player,experience:r}})},getCurrentLevelInfo:()=>{const t=s();return{currentLevel:R(t.player.experience),progressInfo:Q(t.player.experience)}},showLevelUpNotification:(t,i)=>{a({levelUpNotification:{isVisible:!0,level:t,voltsReward:i}})},hideLevelUpNotification:()=>{a({levelUpNotification:{isVisible:!1,level:null,voltsReward:0}})}}));class Oe{constructor(){w(this,"hapticFeedback",null);w(this,"isEnabled",!0);w(this,"isTelegramEnvironment",!1);this.initializeTelegramHaptics()}initializeTelegramHaptics(){var s;try{if(typeof window<"u"&&((s=window.Telegram)!=null&&s.WebApp)){this.isTelegramEnvironment=!0;const t=window.Telegram.WebApp;t.HapticFeedback?(this.hapticFeedback=t.HapticFeedback,console.log("Telegram Haptic Feedback initialized")):console.log("HapticFeedback not available in this Telegram version")}else console.log("Not in Telegram environment, haptics disabled")}catch(t){console.warn("Failed to initialize Telegram haptics:",t)}}setEnabled(s){this.isEnabled=s}isAvailable(){return(this.isTelegramEnvironment&&this.hapticFeedback!==null||typeof window<"u"&&"navigator"in window&&"vibrate"in navigator)&&this.isEnabled}light(){this.isAvailable()?this.hapticFeedback.impactOccurred("light"):this.fallbackVibration(50)}medium(){this.isAvailable()?this.hapticFeedback.impactOccurred("medium"):this.fallbackVibration(100)}heavy(){this.isAvailable()?this.hapticFeedback.impactOccurred("heavy"):this.fallbackVibration(150)}soft(){this.isAvailable()?this.hapticFeedback.impactOccurred("soft"):this.fallbackVibration(30)}rigid(){this.isAvailable()?this.hapticFeedback.impactOccurred("rigid"):this.fallbackVibration(200)}success(){this.isAvailable()?this.hapticFeedback.notificationOccurred("success"):this.customPattern([100,50,100])}error(){this.isAvailable()?this.hapticFeedback.notificationOccurred("error"):this.customPattern([200,100,200,100,200])}warning(){this.isAvailable()?this.hapticFeedback.notificationOccurred("warning"):this.customPattern([150,50,150])}selection(){this.isAvailable()?this.hapticFeedback.selectionChanged():this.fallbackVibration(25)}outletPress(){this.medium()}survivalSuccess(){this.success()}electricShock(){this.rigid(),setTimeout(()=>{this.isEnabled&&this.heavy()},100)}levelUp(){this.success(),setTimeout(()=>this.medium(),150),setTimeout(()=>this.success(),300)}rewardReceived(){this.light(),setTimeout(()=>this.medium(),100)}streakAchievement(s){s>=25?(this.heavy(),setTimeout(()=>this.heavy(),200),setTimeout(()=>this.heavy(),400)):s>=10?(this.medium(),setTimeout(()=>this.medium(),150)):s>=5&&(this.light(),setTimeout(()=>this.light(),100))}itemUsed(){this.soft()}shopPurchase(){this.medium(),setTimeout(()=>this.light(),100)}gameInvitation(){this.warning(),setTimeout(()=>this.light(),500),setTimeout(()=>this.light(),1e3)}roundStart(){this.light()}gameEnd(s){s?(this.success(),setTimeout(()=>this.medium(),200),setTimeout(()=>this.success(),400)):this.error()}fallbackVibration(s){if("navigator"in window&&"vibrate"in navigator)try{navigator.vibrate(s),console.log(`üîπ Fallback vibration: ${s}ms`)}catch(t){console.warn("Vibration not supported:",t)}else console.log(`üì≥ Haptic feedback: ${s}ms (visual only)`),this.visualFeedback(s)}visualFeedback(s){const t=document.createElement("div");if(t.style.cssText=`
      position: fixed;
      top: 20px;
      right: 20px;
      background: #FF6B35;
      color: white;
      padding: 8px 12px;
      border-radius: 20px;
      font-size: 12px;
      font-weight: bold;
      z-index: 10000;
      pointer-events: none;
      animation: pulse 0.3s ease-in-out;
    `,t.textContent=`üì≥ ${s}ms`,!document.querySelector("#haptic-style")){const i=document.createElement("style");i.id="haptic-style",i.textContent=`
        @keyframes pulse {
          0% { transform: scale(0.8); opacity: 0; }
          50% { transform: scale(1.1); opacity: 1; }
          100% { transform: scale(1); opacity: 0.8; }
        }
      `,document.head.appendChild(i)}document.body.appendChild(t),setTimeout(()=>{t.parentNode&&t.parentNode.removeChild(t)},Math.max(s,500))}customPattern(s){if("navigator"in window&&"vibrate"in navigator)try{navigator.vibrate(s),console.log(`üîπ Vibration pattern: [${s.join(", ")}]ms`)}catch(t){console.warn("Vibration pattern not supported:",t)}else console.log(`üì≥ Haptic pattern: [${s.join(", ")}]ms (visual only)`),this.visualPatternFeedback(s)}visualPatternFeedback(s){let t=0;for(let i=0;i<s.length;i+=2){const r=s[i],l=s[i+1]||0;setTimeout(()=>{this.visualFeedback(r)},t),t+=r+l}}test(){this.medium(),setTimeout(()=>this.light(),200),setTimeout(()=>this.heavy(),400)}}const b=new Oe,He=({onClose:a})=>{const{player:s,singleMode:t,gameState:i}=S();return e.jsx(c.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/80 flex items-center justify-center p-4 z-50",onClick:a,children:e.jsxs(c.div,{initial:{opacity:0,y:20,scale:.9},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:20,scale:.9},className:"glass-effect p-6 max-w-2xl mx-auto relative max-h-[90vh] overflow-y-auto",onClick:r=>r.stopPropagation(),children:[e.jsx("button",{onClick:a,className:"absolute top-4 right-4 text-gray-400 hover:text-white transition-colors text-2xl",children:"‚úï"}),e.jsx("h3",{className:"text-2xl font-bold text-center mb-6 text-primary-orange",children:"üìä –°–∏—Å—Ç–µ–º–∞ –æ—á–∫–æ–≤ –∏ —É—Ä–æ–≤–Ω–µ–π"}),e.jsxs("div",{className:"grid grid-cols-3 gap-4 mb-6",children:[e.jsxs("div",{className:"text-center glass-effect p-3 rounded-lg",children:[e.jsx("div",{className:"text-xs text-gray-400",children:"–¢–ï–ö–£–©–ê–Ø –°–ï–†–ò–Ø"}),e.jsx("div",{className:"text-xl font-bold text-yellow-400",children:t.streakCount})]}),e.jsxs("div",{className:"text-center glass-effect p-3 rounded-lg",children:[e.jsx("div",{className:"text-xs text-gray-400",children:"–¢–ï–ö–£–©–ò–ô –°–ß–ï–¢"}),e.jsxs("div",{className:"text-xl font-bold text-green-400",children:[i.score,"‚ö°"]})]}),e.jsxs("div",{className:"text-center glass-effect p-3 rounded-lg",children:[e.jsx("div",{className:"text-xs text-gray-400",children:"–í–°–ï–ì–û –í–û–õ–¨–¢"}),e.jsxs("div",{className:"text-xl font-bold text-blue-400",children:[s.volts,"‚ö°"]})]})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"text-lg font-bold text-accent-blue mb-3",children:"üìà –°–∏—Å—Ç–µ–º–∞ –æ–ø—ã—Ç–∞ –∏ —É—Ä–æ–≤–Ω–µ–π"}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{className:"glass-effect p-3 rounded-lg",children:[e.jsx("div",{className:"text-green-400 font-bold",children:"üü¢ –ë–µ–∑–æ–ø–∞—Å–Ω–æ–µ –Ω–∞–∂–∞—Ç–∏–µ:"}),e.jsx("div",{className:"text-sm text-gray-300",children:"+10 –æ–ø—ã—Ç–∞"})]}),e.jsxs("div",{className:"glass-effect p-3 rounded-lg",children:[e.jsx("div",{className:"text-yellow-400 font-bold",children:"üü° –†–∏—Å–∫–æ–≤–∞–Ω–Ω–æ–µ (2x+):"}),e.jsx("div",{className:"text-sm text-gray-300",children:"+15 –æ–ø—ã—Ç–∞"})]}),e.jsxs("div",{className:"glass-effect p-3 rounded-lg",children:[e.jsx("div",{className:"text-red-400 font-bold",children:"üî¥ –≠–∫—Å—Ç—Ä–µ–º–∞–ª—å–Ω–æ–µ (3x+):"}),e.jsx("div",{className:"text-sm text-gray-300",children:"+25 –æ–ø—ã—Ç–∞"})]}),e.jsxs("div",{className:"glass-effect p-3 rounded-lg",children:[e.jsx("div",{className:"text-orange-400 font-bold",children:"üí• –ü–æ—Ä–∞–∂–µ–Ω–∏–µ —Ç–æ–∫–æ–º:"}),e.jsx("div",{className:"text-sm text-gray-300",children:"+5 –æ–ø—ã—Ç–∞"})]})]}),e.jsxs("div",{className:"mt-3 text-center",children:[e.jsx("div",{className:"text-sm text-yellow-400 font-semibold",children:"üèÜ –ó–∞ –ø–æ–≤—ã—à–µ–Ω–∏–µ —É—Ä–æ–≤–Ω—è –≤—ã –ø–æ–ª—É—á–∞–µ—Ç–µ –±–æ–Ω—É—Å–Ω—ã–µ –≤–æ–ª—å—Ç—ã!"}),e.jsx("div",{className:"text-xs text-gray-400 mt-1",children:"–£—Ä–æ–≤–µ–Ω—å 2: +50‚ö° ‚Ä¢ –£—Ä–æ–≤–µ–Ω—å 5: +150‚ö° ‚Ä¢ –£—Ä–æ–≤–µ–Ω—å 10: +500‚ö°"}),e.jsx("div",{className:"text-xs text-blue-300 mt-2",children:"üé® –ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Ä–æ–∑–µ—Ç–∫–∏ –º–µ–Ω—è–µ—Ç—Å—è –∫–∞–∂–¥—ã–µ 5 —É—Ä–æ–≤–Ω–µ–π!"})]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-lg font-bold text-accent-blue mb-3",children:"‚ö° –ë–∞–∑–æ–≤—ã–µ –æ—á–∫–∏ –∑–∞ –Ω–∞–∂–∞—Ç–∏–µ"}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{className:"glass-effect p-3 rounded-lg",children:[e.jsx("div",{className:"text-green-400 font-bold",children:"üü¢ –ë–µ–∑–æ–ø–∞—Å–Ω–æ–µ –Ω–∞–∂–∞—Ç–∏–µ:"}),e.jsx("div",{className:"text-sm text-gray-300",children:"+10‚ö° (–±–∞–∑–æ–≤—ã–µ –æ—á–∫–∏)"})]}),e.jsxs("div",{className:"glass-effect p-3 rounded-lg",children:[e.jsx("div",{className:"text-red-400 font-bold",children:"üí• –ü–æ—Ä–∞–∂–µ–Ω–∏–µ —Ç–æ–∫–æ–º:"}),e.jsx("div",{className:"text-sm text-gray-300",children:"-8‚ö° –¥–æ -25‚ö° (—Å–ª—É—á–∞–π–Ω–æ)"})]})]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-lg font-bold text-accent-blue mb-3",children:"üéØ –ú–Ω–æ–∂–∏—Ç–µ–ª–∏ –∑–∞ —Ä–∏—Å–∫"}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{className:"glass-effect p-3 rounded-lg",children:[e.jsx("div",{className:"text-green-400 font-bold",children:"üü¢ –õ—ë–≥–∫–∏–π (15% —Ä–∏—Å–∫):"}),e.jsx("div",{className:"text-sm text-gray-300",children:"√ó1.0 (–±–∞–∑–æ–≤—ã–µ –æ—á–∫–∏)"})]}),e.jsxs("div",{className:"glass-effect p-3 rounded-lg",children:[e.jsx("div",{className:"text-yellow-400 font-bold",children:"üü° –°—Ä–µ–¥–Ω–∏–π (25% —Ä–∏—Å–∫):"}),e.jsx("div",{className:"text-sm text-gray-300",children:"√ó1.5 –º–Ω–æ–∂–∏—Ç–µ–ª—å"})]}),e.jsxs("div",{className:"glass-effect p-3 rounded-lg",children:[e.jsx("div",{className:"text-orange-400 font-bold",children:"üü† –°–ª–æ–∂–Ω—ã–π (35% —Ä–∏—Å–∫):"}),e.jsx("div",{className:"text-sm text-gray-300",children:"√ó2.0 –º–Ω–æ–∂–∏—Ç–µ–ª—å"})]}),e.jsxs("div",{className:"glass-effect p-3 rounded-lg",children:[e.jsx("div",{className:"text-red-400 font-bold",children:"üî¥ –≠–∫—Å—Ç—Ä–∏–º (50% —Ä–∏—Å–∫):"}),e.jsx("div",{className:"text-sm text-gray-300",children:"√ó3.0 –º–Ω–æ–∂–∏—Ç–µ–ª—å"})]})]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-lg font-bold text-accent-blue mb-3",children:"üî• –ë–æ–Ω—É—Å—ã –∑–∞ —Å–µ—Ä–∏–∏"}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{className:"glass-effect p-3 rounded-lg",children:[e.jsx("div",{className:"text-gray-400 font-bold",children:"0-4 –Ω–∞–∂–∞—Ç–∏–π:"}),e.jsx("div",{className:"text-sm text-gray-300",children:"√ó1.0 (–±–µ–∑ –±–æ–Ω—É—Å–∞)"})]}),e.jsxs("div",{className:"glass-effect p-3 rounded-lg",children:[e.jsx("div",{className:"text-yellow-400 font-bold",children:"5+ –Ω–∞–∂–∞—Ç–∏–π:"}),e.jsx("div",{className:"text-sm text-gray-300",children:"√ó1.2 –±–æ–Ω—É—Å"})]}),e.jsxs("div",{className:"glass-effect p-3 rounded-lg",children:[e.jsx("div",{className:"text-orange-400 font-bold",children:"10+ –Ω–∞–∂–∞—Ç–∏–π:"}),e.jsx("div",{className:"text-sm text-gray-300",children:"√ó1.5 –±–æ–Ω—É—Å"})]}),e.jsxs("div",{className:"glass-effect p-3 rounded-lg",children:[e.jsx("div",{className:"text-red-400 font-bold",children:"25+ –Ω–∞–∂–∞—Ç–∏–π:"}),e.jsx("div",{className:"text-sm text-gray-300",children:"√ó2.0 –±–æ–Ω—É—Å"})]}),e.jsxs("div",{className:"glass-effect p-3 rounded-lg",children:[e.jsx("div",{className:"text-purple-400 font-bold",children:"50+ –Ω–∞–∂–∞—Ç–∏–π:"}),e.jsx("div",{className:"text-sm text-gray-300",children:"√ó3.0 –±–æ–Ω—É—Å"})]})]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-lg font-bold text-accent-blue mb-3",children:"üßÆ –§–æ—Ä–º—É–ª–∞ —Ä–∞—Å—á—ë—Ç–∞"}),e.jsx("div",{className:"glass-effect p-4 rounded-lg bg-gradient-to-r from-blue-500/10 to-purple-500/10",children:e.jsxs("div",{className:"text-center text-lg font-mono",children:[e.jsx("span",{className:"text-white",children:"–ò—Ç–æ–≥–æ–≤—ã–µ –æ—á–∫–∏"})," =",e.jsx("span",{className:"text-green-400",children:" 10‚ö°"})," √ó",e.jsx("span",{className:"text-orange-400",children:" –†–∏—Å–∫"})," √ó",e.jsx("span",{className:"text-yellow-400",children:" –°–µ—Ä–∏—è"})]})})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-lg font-bold text-accent-blue mb-3",children:"üí° –ü—Ä–∏–º–µ—Ä—ã —Ä–∞—Å—á—ë—Ç–æ–≤"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"bg-black/30 p-3 rounded-lg",children:[e.jsx("div",{className:"text-green-400 font-bold",children:"üü¢ –ë–µ–∑–æ–ø–∞—Å–Ω–∞—è –∏–≥—Ä–∞:"}),e.jsxs("div",{className:"text-sm text-gray-300",children:["10‚ö° √ó 1.0 (–Ω–∏–∑–∫–∏–π —Ä–∏—Å–∫) √ó 1.2 (5+ —Å–µ—Ä–∏—è) = ",e.jsx("span",{className:"text-white font-bold",children:"12‚ö°"})]})]}),e.jsxs("div",{className:"bg-black/30 p-3 rounded-lg",children:[e.jsx("div",{className:"text-orange-400 font-bold",children:"üü† –†–∏—Å–∫–æ–≤–∞–Ω–Ω–∞—è –∏–≥—Ä–∞:"}),e.jsxs("div",{className:"text-sm text-gray-300",children:["10‚ö° √ó 2.0 (–≤—ã—Å–æ–∫–∏–π —Ä–∏—Å–∫) √ó 1.5 (10+ —Å–µ—Ä–∏—è) = ",e.jsx("span",{className:"text-white font-bold",children:"30‚ö°"})]})]}),e.jsxs("div",{className:"bg-black/30 p-3 rounded-lg",children:[e.jsx("div",{className:"text-red-400 font-bold",children:"üî¥ –≠–∫—Å—Ç—Ä–µ–º–∞–ª—å–Ω–∞—è –∏–≥—Ä–∞:"}),e.jsxs("div",{className:"text-sm text-gray-300",children:["10‚ö° √ó 3.0 (—ç–∫—Å—Ç—Ä–∏–º —Ä–∏—Å–∫) √ó 2.0 (25+ —Å–µ—Ä–∏—è) = ",e.jsx("span",{className:"text-white font-bold",children:"60‚ö°"})]})]}),e.jsxs("div",{className:"bg-black/30 p-3 rounded-lg",children:[e.jsx("div",{className:"text-red-400 font-bold",children:"üí• –ü–æ—Ä–∞–∂–µ–Ω–∏–µ —Ç–æ–∫–æ–º:"}),e.jsxs("div",{className:"text-sm text-gray-300",children:["–°–ª—É—á–∞–π–Ω–æ –æ—Ç 8‚ö° –¥–æ 25‚ö° + ",e.jsx("span",{className:"text-red-400",children:"—Å–µ—Ä–∏—è —Å–±—Ä–∞—Å—ã–≤–∞–µ—Ç—Å—è"})]})]})]})]})]}),e.jsx("div",{className:"mt-6 text-center text-xs text-gray-400",children:"üí° –°–æ–≤–µ—Ç: –ë–∞–ª–∞–Ω—Å–∏—Ä—É–π—Ç–µ –º–µ–∂–¥—É —Ä–∏—Å–∫–æ–º –∏ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å—é –¥–ª—è –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–≥–æ –∑–∞—Ä–∞–±–æ—Ç–∫–∞!"})]})})},qe=()=>{const{player:a,getCurrentLevelInfo:s}=S(),{currentLevel:t,progressInfo:i}=s(),r=Pe(a.experience),l=E(t.level),o=i.nextLevel?E(i.nextLevel.level):null,n=o&&o!==l;return e.jsxs("div",{className:"glass-effect p-4 rounded-xl space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("img",{src:E(t.level),alt:`–†–æ–∑–µ—Ç–∫–∞ —É—Ä–æ–≤–Ω—è ${t.level}`,className:"w-12 h-12 rounded-lg border-2 border-primary-orange shadow-lg"}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-gray-400 uppercase tracking-wide",children:"–£—Ä–æ–≤–µ–Ω—å"}),e.jsxs("div",{className:"flex items-baseline space-x-2",children:[e.jsx("span",{className:"text-2xl font-bold text-primary-orange",children:t.level}),e.jsx("span",{className:"text-sm text-gray-300",children:t.title})]})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("div",{className:"text-xs text-gray-400",children:"–û–ø—ã—Ç"}),e.jsx("div",{className:"text-lg font-bold text-accent-blue",children:a.experience.toLocaleString()})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between text-xs text-gray-400",children:[e.jsx("span",{children:i.current}),e.jsx("span",{children:i.nextLevel?`${i.remaining} –¥–æ ${i.nextLevel.level} —É—Ä–æ–≤–Ω—è`:"–ú–∞–∫—Å–∏–º—É–º"}),e.jsx("span",{children:i.required})]}),e.jsxs("div",{className:"relative w-full bg-gray-700 rounded-full h-2 overflow-hidden",children:[e.jsx(c.div,{className:"h-full bg-gradient-to-r from-accent-blue to-primary-orange rounded-full",initial:{width:0},animate:{width:`${r}%`},transition:{duration:.8,ease:"easeOut"}}),r>0&&e.jsx(c.div,{className:"absolute top-0 right-0 w-1 h-full bg-white opacity-80",style:{right:`${100-r}%`},animate:{opacity:[.8,.3,.8]},transition:{repeat:1/0,duration:1.5}})]})]}),e.jsx("div",{className:"text-xs text-gray-400 italic text-center",children:t.description}),i.nextLevel&&e.jsxs("div",{className:"text-center pt-2 border-t border-gray-600",children:[e.jsx("div",{className:"text-xs text-gray-500",children:"–°–ª–µ–¥—É—é—â–∏–π —É—Ä–æ–≤–µ–Ω—å"}),e.jsxs("div",{className:"text-sm",children:[e.jsx("span",{className:"text-accent-lime font-semibold",children:i.nextLevel.title}),e.jsx("span",{className:"text-gray-400",children:" ‚Ä¢ "}),e.jsxs("span",{className:"text-yellow-400",children:["+",i.nextLevel.voltsReward,"‚ö°"]})]}),n&&e.jsxs("div",{className:"flex items-center justify-center space-x-2 mt-2",children:[e.jsx("span",{className:"text-xs text-blue-300",children:"üé® –ù–æ–≤–∞—è —Ä–æ–∑–µ—Ç–∫–∞:"}),e.jsx("img",{src:o,alt:`–†–æ–∑–µ—Ç–∫–∞ —É—Ä–æ–≤–Ω—è ${i.nextLevel.level}`,className:"w-6 h-6 rounded border border-blue-400 shadow-sm"})]})]})]})},Be=({isVisible:a,onClose:s})=>{const[t,i]=u.useState(!0),[r,l]=u.useState(null);u.useEffect(()=>{const d=localStorage.getItem("hapticEnabled");if(d!==null){const x=JSON.parse(d);i(x),b.setEnabled(x)}},[]);const o=()=>{const d=!t;i(d),b.setEnabled(d),localStorage.setItem("hapticEnabled",JSON.stringify(d)),d&&b.test()},n=(d,x)=>{l(d),x(),setTimeout(()=>l(null),500)};return a?e.jsx(c.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/80 flex items-center justify-center z-50 p-4",onClick:s,children:e.jsxs(c.div,{initial:{scale:.8,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.8,opacity:0},className:"bg-gradient-to-br from-gray-900 to-gray-800 rounded-2xl p-6 max-w-sm w-full border border-primary-orange/20",onClick:d=>d.stopPropagation(),children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h2",{className:"text-2xl font-bold text-primary-orange",children:"–í–∏–±—Ä–∞—Ü–∏—è"}),e.jsx("button",{onClick:s,className:"text-gray-400 hover:text-white text-2xl",children:"√ó"})]}),e.jsx("div",{className:"mb-6",children:e.jsxs("div",{className:"flex justify-between items-center p-4 bg-gray-800/50 rounded-xl",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-white",children:"–í–∫–ª—é—á–∏—Ç—å –≤–∏–±—Ä–∞—Ü–∏—é"}),e.jsx("p",{className:"text-sm text-gray-400",children:b.isAvailable()?"–ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è –≤–∞—à–∏–º —É—Å—Ç—Ä–æ–π—Å—Ç–≤–æ–º":"–ù–µ–¥–æ—Å—Ç—É–ø–Ω–æ –Ω–∞ –≤–∞—à–µ–º —É—Å—Ç—Ä–æ–π—Å—Ç–≤–µ"})]}),e.jsx(c.button,{onClick:o,className:`w-12 h-6 rounded-full p-1 transition-colors ${t?"bg-primary-orange":"bg-gray-600"}`,whileTap:{scale:.95},children:e.jsx(c.div,{className:"w-4 h-4 bg-white rounded-full",animate:{x:t?24:0},transition:{type:"spring",stiffness:500,damping:30}})})]})}),t&&e.jsxs("div",{className:"space-y-3",children:[e.jsx("h3",{className:"text-lg font-semibold text-white mb-3",children:"–¢–µ—Å—Ç –≤–∏–±—Ä–∞—Ü–∏–∏"}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("h4",{className:"text-sm font-medium text-gray-300",children:"–ò–≥—Ä–æ–≤—ã–µ —Å–æ–±—ã—Ç–∏—è"}),e.jsx(c.button,{onClick:()=>n("press",()=>b.outletPress()),className:`w-full p-3 rounded-lg border transition-colors ${r==="press"?"bg-blue-500/30 border-blue-400 text-blue-200":"bg-gray-700/50 border-gray-600 text-gray-300 hover:bg-gray-600/50"}`,whileHover:{scale:1.02},whileTap:{scale:.98},children:"üîå –ù–∞–∂–∞—Ç–∏–µ –Ω–∞ —Ä–æ–∑–µ—Ç–∫—É"}),e.jsx(c.button,{onClick:()=>n("success",()=>b.survivalSuccess()),className:`w-full p-3 rounded-lg border transition-colors ${r==="success"?"bg-green-500/30 border-green-400 text-green-200":"bg-gray-700/50 border-gray-600 text-gray-300 hover:bg-gray-600/50"}`,whileHover:{scale:1.02},whileTap:{scale:.98},children:"‚úÖ –£—Å–ø–µ—à–Ω–æ–µ –≤—ã–∂–∏–≤–∞–Ω–∏–µ"}),e.jsx(c.button,{onClick:()=>n("shock",()=>b.electricShock()),className:`w-full p-3 rounded-lg border transition-colors ${r==="shock"?"bg-red-500/30 border-red-400 text-red-200":"bg-gray-700/50 border-gray-600 text-gray-300 hover:bg-gray-600/50"}`,whileHover:{scale:1.02},whileTap:{scale:.98},children:"‚ö° –£–¥–∞—Ä —Ç–æ–∫–æ–º"}),e.jsx(c.button,{onClick:()=>n("levelup",()=>b.levelUp()),className:`w-full p-3 rounded-lg border transition-colors ${r==="levelup"?"bg-yellow-500/30 border-yellow-400 text-yellow-200":"bg-gray-700/50 border-gray-600 text-gray-300 hover:bg-gray-600/50"}`,whileHover:{scale:1.02},whileTap:{scale:.98},children:"üÜô –ü–æ–≤—ã—à–µ–Ω–∏–µ —É—Ä–æ–≤–Ω—è"})]}),e.jsxs("div",{className:"space-y-2 mt-4",children:[e.jsx("h4",{className:"text-sm font-medium text-gray-300",children:"–ò–Ω—Ç–µ–Ω—Å–∏–≤–Ω–æ—Å—Ç—å"}),e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsx(c.button,{onClick:()=>n("light",()=>b.light()),className:`p-2 rounded-lg border text-sm transition-colors ${r==="light"?"bg-gray-500/30 border-gray-400 text-gray-200":"bg-gray-700/50 border-gray-600 text-gray-300 hover:bg-gray-600/50"}`,whileHover:{scale:1.02},whileTap:{scale:.98},children:"–õ–µ–≥–∫–∞—è"}),e.jsx(c.button,{onClick:()=>n("medium",()=>b.medium()),className:`p-2 rounded-lg border text-sm transition-colors ${r==="medium"?"bg-gray-500/30 border-gray-400 text-gray-200":"bg-gray-700/50 border-gray-600 text-gray-300 hover:bg-gray-600/50"}`,whileHover:{scale:1.02},whileTap:{scale:.98},children:"–°—Ä–µ–¥–Ω—è—è"}),e.jsx(c.button,{onClick:()=>n("heavy",()=>b.heavy()),className:`p-2 rounded-lg border text-sm transition-colors ${r==="heavy"?"bg-gray-500/30 border-gray-400 text-gray-200":"bg-gray-700/50 border-gray-600 text-gray-300 hover:bg-gray-600/50"}`,whileHover:{scale:1.02},whileTap:{scale:.98},children:"–°–∏–ª—å–Ω–∞—è"}),e.jsx(c.button,{onClick:()=>n("rigid",()=>b.rigid()),className:`p-2 rounded-lg border text-sm transition-colors ${r==="rigid"?"bg-gray-500/30 border-gray-400 text-gray-200":"bg-gray-700/50 border-gray-600 text-gray-300 hover:bg-gray-600/50"}`,whileHover:{scale:1.02},whileTap:{scale:.98},children:"–†–µ–∑–∫–∞—è"})]})]})]}),e.jsx("div",{className:"mt-6 p-3 bg-blue-900/20 border border-blue-500/30 rounded-lg",children:e.jsx("p",{className:"text-xs text-blue-300 text-center",children:"üí° –í–∏–±—Ä–∞—Ü–∏—è –¥–æ—Å—Ç—É–ø–Ω–∞ —Ç–æ–ª—å–∫–æ –≤ Telegram Mini App –Ω–∞ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞—Ö"})})]})}):null},Z=u.createContext({webApp:null,user:null,isInTelegram:!1,platform:"unknown",colorScheme:"dark"}),Ve=()=>u.useContext(Z),De=({children:a})=>{const[s,t]=u.useState(null),[i,r]=u.useState(null),[l,o]=u.useState(!1),[n,d]=u.useState("unknown"),[x,h]=u.useState("dark");u.useEffect(()=>{var g,m,f;if(typeof window<"u"&&((g=window.Telegram)!=null&&g.WebApp)){const y=window.Telegram.WebApp;t(y),o(!0),d(y.platform||"unknown"),h(y.colorScheme||"dark"),(m=y.initDataUnsafe)!=null&&m.user&&r(y.initDataUnsafe.user),y.ready(),y.expand(),console.log("Telegram WebApp Context initialized:",{platform:y.platform,colorScheme:y.colorScheme,user:(f=y.initDataUnsafe)==null?void 0:f.user,version:y.version})}},[]);const p={webApp:s,user:i,isInTelegram:l,platform:n,colorScheme:x};return e.jsx(Z.Provider,{value:p,children:a})},ze=()=>{var r;const{user:a,isInTelegram:s,platform:t,colorScheme:i}=Ve();return s?e.jsx(c.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},className:"bg-gradient-to-r from-blue-900/20 to-purple-900/20 border border-blue-500/30 rounded-lg p-3 mb-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[a!=null&&a.photo_url?e.jsx("img",{src:a.photo_url,alt:"Avatar",className:"w-8 h-8 rounded-full border border-blue-400/50"}):e.jsx("div",{className:"w-8 h-8 bg-gradient-to-br from-blue-500 to-purple-600 rounded-full flex items-center justify-center",children:e.jsx("span",{className:"text-white text-sm font-bold",children:((r=a==null?void 0:a.first_name)==null?void 0:r[0])||"?"})}),e.jsxs("div",{children:[e.jsxs("div",{className:"text-sm font-medium text-white",children:[a==null?void 0:a.first_name," ",a==null?void 0:a.last_name,(a==null?void 0:a.is_premium)&&e.jsx("span",{className:"ml-1 text-yellow-400",children:"‚≠ê"})]}),e.jsxs("div",{className:"text-xs text-gray-400",children:["@",(a==null?void 0:a.username)||"no_username"," ‚Ä¢ ",t]})]})]}),e.jsx("div",{className:"text-right",children:e.jsxs("div",{className:`text-xs px-2 py-1 rounded-full border ${i==="dark"?"bg-gray-800 border-gray-600 text-gray-300":"bg-gray-200 border-gray-400 text-gray-700"}`,children:[i==="dark"?"üåô":"‚òÄÔ∏è"," ",i]})})]})}):e.jsx("div",{className:"text-xs text-gray-500 text-center p-2",children:"üíª –í–µ–±-–≤–µ—Ä—Å–∏—è (–Ω–µ –≤ Telegram)"})},Ue=()=>{const{startSingleMode:a,player:s,addExperience:t}=S(),[i,r]=u.useState(!1),[l,o]=u.useState(!1),n=()=>{t(100)},d=x=>{b.medium(),a(x)};return e.jsxs("div",{className:"min-h-screen flex flex-col items-center justify-center p-4 bg-gradient-to-br from-background-dark to-background-darker",children:[e.jsxs(c.div,{initial:{opacity:0,y:-50},animate:{opacity:1,y:0},transition:{duration:.8},className:"text-center mb-8",children:[e.jsx("h1",{className:"text-6xl font-bold text-primary-orange tiger-stripes bg-clip-text text-transparent mb-4",children:"–¢–ò–ì–†"}),e.jsx("h2",{className:"text-4xl font-bold text-accent-blue mb-2",children:"–†–û–ó–ï–¢–ö–ê"}),e.jsx("p",{className:"text-lg text-gray-300",children:"Telegram Mini App Game"})]}),e.jsx(c.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,delay:.2},className:"mb-6",children:e.jsx(qe,{})}),e.jsx(c.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,delay:.25},className:"mb-4 w-full max-w-md",children:e.jsx(ze,{})}),e.jsxs(c.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{duration:.5,delay:.3},className:"glass-effect p-6 mb-8 text-center",children:[e.jsxs("div",{className:"text-sm text-gray-300 mb-2",children:["–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å, ",s.name,"!"]}),e.jsxs("div",{className:"flex justify-center space-x-6",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-gray-400",children:"–í–û–õ–¨–¢–´"}),e.jsxs("div",{className:"text-xl font-bold text-primary-orange",children:[s.volts,"‚ö°"]})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-gray-400",children:"–£–†–û–í–ï–ù–¨"}),e.jsx("div",{className:"text-xl font-bold text-accent-blue",children:s.level})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-gray-400",children:"–í–°–ï–ì–û –ù–ê–ñ–ê–¢–ò–ô"}),e.jsx("div",{className:"text-xl font-bold text-accent-lime",children:s.totalClicks})]})]})]}),e.jsxs(c.div,{initial:{opacity:0,y:50},animate:{opacity:1,y:0},transition:{duration:.6,delay:.5},className:"w-full max-w-md space-y-4",children:[e.jsx("h3",{className:"text-2xl font-bold text-center text-white mb-6",children:"–í—ã–±–µ—Ä–∏—Ç–µ —Å–ª–æ–∂–Ω–æ—Å—Ç—å"}),e.jsx(c.button,{onClick:()=>d("easy"),className:"w-full glass-effect p-4 rounded-xl hover:bg-green-500/20 transition-colors",whileHover:{scale:1.02,x:10},whileTap:{scale:.98},children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{className:"text-left",children:[e.jsx("div",{className:"text-lg font-bold text-green-400",children:"–õ–Å–ì–ö–ò–ô"}),e.jsx("div",{className:"text-sm text-gray-300",children:"15% —à–∞–Ω—Å —Ä–∞–∑—Ä—è–¥–∞ ‚Ä¢ 2 —Å–µ–∫ –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ"})]}),e.jsx("div",{className:"text-2xl",children:"üü¢"})]})}),e.jsx(c.button,{onClick:()=>d("medium"),className:"w-full glass-effect p-4 rounded-xl hover:bg-yellow-500/20 transition-colors",whileHover:{scale:1.02,x:10},whileTap:{scale:.98},children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{className:"text-left",children:[e.jsx("div",{className:"text-lg font-bold text-yellow-400",children:"–°–†–ï–î–ù–ò–ô"}),e.jsx("div",{className:"text-sm text-gray-300",children:"25% —à–∞–Ω—Å —Ä–∞–∑—Ä—è–¥–∞ ‚Ä¢ 1.5 —Å–µ–∫ –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ"})]}),e.jsx("div",{className:"text-2xl",children:"üü°"})]})}),e.jsx(c.button,{onClick:()=>d("hard"),className:"w-full glass-effect p-4 rounded-xl hover:bg-orange-500/20 transition-colors",whileHover:{scale:1.02,x:10},whileTap:{scale:.98},children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{className:"text-left",children:[e.jsx("div",{className:"text-lg font-bold text-orange-400",children:"–°–õ–û–ñ–ù–´–ô"}),e.jsx("div",{className:"text-sm text-gray-300",children:"35% —à–∞–Ω—Å —Ä–∞–∑—Ä—è–¥–∞ ‚Ä¢ 1 —Å–µ–∫ –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ"})]}),e.jsx("div",{className:"text-2xl",children:"üü†"})]})}),e.jsx(c.button,{onClick:()=>d("extreme"),className:"w-full glass-effect p-4 rounded-xl hover:bg-red-500/20 transition-colors",whileHover:{scale:1.02,x:10},whileTap:{scale:.98},children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{className:"text-left",children:[e.jsx("div",{className:"text-lg font-bold text-red-400",children:"–≠–ö–°–¢–†–ò–ú"}),e.jsx("div",{className:"text-sm text-gray-300",children:"50% —à–∞–Ω—Å —Ä–∞–∑—Ä—è–¥–∞ ‚Ä¢ 0.5 —Å–µ–∫ –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ"})]}),e.jsx("div",{className:"text-2xl",children:"üî¥"})]})}),e.jsx(c.button,{onClick:()=>{b.light(),r(!0)},className:"w-full glass-effect p-3 rounded-xl hover:bg-blue-500/20 transition-colors border border-blue-400/30",whileHover:{scale:1.02},whileTap:{scale:.98},children:e.jsxs("div",{className:"flex justify-center items-center space-x-2",children:[e.jsx("span",{className:"text-lg",children:"üìä"}),e.jsx("span",{className:"text-lg font-semibold text-blue-400",children:"–û—á–∫–∏ –∏ —É—Ä–æ–≤–Ω–∏"})]})}),e.jsx(c.button,{onClick:()=>{b.light(),o(!0)},className:"w-full glass-effect p-3 rounded-xl hover:bg-purple-500/20 transition-colors border border-purple-400/30",whileHover:{scale:1.02},whileTap:{scale:.98},children:e.jsxs("div",{className:"flex justify-center items-center space-x-2",children:[e.jsx("span",{className:"text-lg",children:"üì≥"}),e.jsx("span",{className:"text-lg font-semibold text-purple-400",children:"–í–∏–±—Ä–∞—Ü–∏—è"})]})})]}),i&&e.jsx(He,{onClose:()=>r(!1)}),l&&e.jsx(Be,{isVisible:l,onClose:()=>o(!1)}),e.jsxs(c.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.5,delay:1},className:"mt-8 text-center text-gray-400 text-sm space-y-2",children:[e.jsx("p",{children:"‚ö° –ò–≥—Ä–∞–π –æ—Å—Ç–æ—Ä–æ–∂–Ω–æ! ‚ö°"}),e.jsx("p",{className:"mt-2",children:"v1.0.0 | Single Mode"}),e.jsx("button",{onClick:()=>{b.light(),n()},className:"mt-2 px-3 py-1 text-xs bg-purple-600/30 hover:bg-purple-600/50 text-purple-300 rounded transition-colors",children:"üîß +100 –æ–ø—ã—Ç–∞ (—Ç–µ—Å—Ç)"})]})]})};class We{constructor(){w(this,"audioContext",null);w(this,"sounds",new Map);w(this,"volume",.7);w(this,"enabled",!0);this.init()}async init(){try{this.audioContext=new(window.AudioContext||window.webkitAudioContext)}catch(s){console.warn("Web Audio API not supported:",s)}}async loadSound(s,t){if(this.audioContext)try{const r=await(await fetch(t)).arrayBuffer(),l=await this.audioContext.decodeAudioData(r);this.sounds.set(s,l)}catch(i){console.warn(`Failed to load sound ${s}:`,i)}}playSound(s,t=1){if(!this.enabled||!this.audioContext)return;const i=this.sounds.get(s);if(!i)return;const r=this.audioContext.createBufferSource(),l=this.audioContext.createGain();r.buffer=i,l.gain.value=this.volume*t,r.connect(l),l.connect(this.audioContext.destination),r.start()}generateSparkSound(s){if(!this.enabled||!this.audioContext)return;const t={low:.1,medium:.2,high:.3,extreme:.5}[s],i={low:2e3,medium:3e3,high:4e3,extreme:5e3}[s],r=this.audioContext.sampleRate*t,l=this.audioContext.createBuffer(1,r,this.audioContext.sampleRate),o=l.getChannelData(0);for(let x=0;x<r;x++){const h=x/this.audioContext.sampleRate,p=Math.exp(-h*10),g=(Math.random()*2-1)*p,m=Math.sin(2*Math.PI*i*h*(1+Math.random()*.5));o[x]=g*m*.3}const n=this.audioContext.createBufferSource(),d=this.audioContext.createGain();n.buffer=l,d.gain.value=this.volume*(s==="extreme"?.8:.5),n.connect(d),d.connect(this.audioContext.destination),n.start()}generateShockSound(){if(!this.enabled||!this.audioContext)return;const t=this.audioContext.sampleRate*.8,i=this.audioContext.createBuffer(1,t,this.audioContext.sampleRate),r=i.getChannelData(0);for(let n=0;n<t;n++){const d=n/this.audioContext.sampleRate,x=Math.exp(-d*3),h=Math.sin(2*Math.PI*100*d),p=Math.sin(2*Math.PI*800*d)*.5,g=(Math.random()*2-1)*.3;r[n]=(h+p+g)*x*.6}const l=this.audioContext.createBufferSource(),o=this.audioContext.createGain();l.buffer=i,o.gain.value=this.volume,l.connect(o),o.connect(this.audioContext.destination),l.start()}generateWarningSound(){if(!this.enabled||!this.audioContext)return;const s=.3,t=this.audioContext.sampleRate*s,i=this.audioContext.createBuffer(1,t,this.audioContext.sampleRate),r=i.getChannelData(0);for(let n=0;n<t;n++){const d=n/this.audioContext.sampleRate,x=1e3+Math.sin(d*20)*200,h=Math.sin(Math.PI*d/s);r[n]=Math.sin(2*Math.PI*x*d)*h*.4}const l=this.audioContext.createBufferSource(),o=this.audioContext.createGain();l.buffer=i,o.gain.value=this.volume*.6,l.connect(o),o.connect(this.audioContext.destination),l.start()}setVolume(s){this.volume=Math.max(0,Math.min(1,s))}setEnabled(s){this.enabled=s}getVolume(){return this.volume}isEnabled(){return this.enabled}}const q=new We,Ge=({score:a,reason:s,isVisible:t,position:i,type:r,experience:l=0})=>{const o=()=>{switch(r){case"success":return a>=30?"text-yellow-300":a>=20?"text-green-300":"text-blue-300";case"shock":return"text-red-300";case"bonus":return"text-purple-300";default:return"text-white"}},n=()=>{switch(r){case"success":return a>=30?"üî•":a>=20?"‚ö°":"‚ú®";case"shock":return"üí•";case"bonus":return"üéâ";default:return"‚ö°"}};return e.jsx(P,{children:t&&e.jsx(c.div,{className:`absolute pointer-events-none z-50 ${o()}`,initial:{opacity:0,scale:.5,x:i.x,y:i.y},animate:{opacity:[0,1,1,0],scale:[.5,1.2,1,.8],y:i.y-80,x:i.x+(Math.random()-.5)*40},transition:{duration:2,ease:"easeOut"},children:e.jsx("div",{className:"bg-black/80 backdrop-blur-sm rounded-lg px-3 py-2 border border-current",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("span",{className:"text-lg",children:n()}),e.jsxs("div",{children:[e.jsxs("div",{className:"font-bold text-lg",children:["+",a,"‚ö°"]}),l>0&&e.jsxs("div",{className:"text-xs text-blue-300",children:["+",l," –æ–ø—ã—Ç–∞"]}),e.jsx("div",{className:"text-xs opacity-80",children:s})]})]})})})})},Ke=()=>{const{player:a}=S(),[s,t]=u.useState(E(a.level)),[i,r]=u.useState(!1);return u.useEffect(()=>{const l=E(a.level);console.log(`Player level: ${a.level}, Image path: ${l}`),l!==s&&(r(!0),setTimeout(()=>{t(l),r(!1)},300))},[a.level,s]),{currentImage:s,isAnimating:i}},Ye=({className:a=""})=>{const{clickOutlet:s,singleMode:t,gameState:i,updateScore:r,triggerShock:l}=S(),{currentImage:o,isAnimating:n}=Ke(),[d,x]=u.useState([]),[h,p]=u.useState(!1),[g,m]=u.useState(1),[f,y]=u.useState({visible:!1,score:0,reason:"",type:"success"}),$=u.useCallback((v,T,N)=>{y({visible:!0,score:v,reason:T,type:N}),setTimeout(()=>{y(j=>({...j,visible:!1}))},2e3)},[]),_=u.useCallback(v=>{const T={low:3,medium:6,high:12,extreme:20}[v],N=Array.from({length:T},(j,M)=>({id:`spark-${Date.now()}-${M}`,x:Math.random()*200-100,y:Math.random()*200-100,intensity:v,duration:300+Math.random()*200,color:v==="extreme"?"#E8FF00":v==="high"?"#00D4FF":v==="medium"?"#8A2BE2":"#FF6B35"}));x(j=>[...j,...N]),N.forEach(j=>{setTimeout(()=>{x(M=>M.filter(I=>I.id!==j.id))},j.duration)})},[]),ee=u.useCallback(()=>{if(!i.isPlaying||t.shockActive)return;b.outletPress(),p(!0),s();const v={easy:.15,medium:.25,hard:.35,extreme:.5}[t.difficulty];if(Math.random()<v)_("extreme"),m(3),b.electricShock(),q.generateShockSound(),l(),setTimeout(()=>{const N=window.lastPenaltyMessage;if(N)$(0,N,"shock"),window.lastPenaltyMessage=null;else{const j={basePoints:8,riskMultiplier:1,streakBonus:0,timeBonus:0,totalPoints:8+Math.floor(Math.random()*17),reason:"–ü–æ—Ä–∞–∂–µ–Ω–∏–µ —Ç–æ–∫–æ–º"};r(j),$(j.totalPoints,j.reason,"shock")}},100);else{const N=t.currentRisk==="extreme"?"extreme":t.currentRisk==="high"?"high":t.currentRisk==="medium"?"medium":"low";_(N),m(2),b.survivalSuccess(),q.generateSparkSound(N);const j=10,M={low:1,medium:1.5,high:2,extreme:3}[t.currentRisk],I=t.streakCount>=25?3:t.streakCount>=10?2:t.streakCount>=5?1.5:1,te=Math.floor(j*M*I),L={basePoints:j,riskMultiplier:M,streakBonus:I,timeBonus:0,totalPoints:te,reason:`–í—ã–∂–∏–≤–∞–Ω–∏–µ (${t.currentRisk} —Ä–∏—Å–∫)`};r(L),$(L.totalPoints,L.reason,"success"),t.streakCount>0&&t.streakCount%5===0&&b.streakAchievement(t.streakCount)}setTimeout(()=>{p(!1),m(1)},200)},[i.isPlaying,t,s,_,r]);return u.useEffect(()=>{if(t.warningActive){m(2.5);const v=setInterval(()=>{m(T=>T===2.5?1.5:2.5)},200);return()=>clearInterval(v)}else m(1)},[t.warningActive]),e.jsxs("div",{className:`relative ${a}`,children:[e.jsxs(c.button,{onClick:ee,disabled:!i.isPlaying||t.shockActive,className:"relative w-64 h-64 rounded-2xl overflow-hidden disabled:opacity-50 bg-gray-800",whileTap:{scale:.95},whileHover:{scale:1.05},animate:{scale:h?.9:1,filter:`brightness(${g}) saturate(${g})`,rotateY:n?[0,180,360]:0},transition:{rotateY:{duration:.6,ease:"easeInOut"}},style:{boxShadow:`0 0 ${20*g}px rgba(255, 107, 53, ${.5*g})`},children:[e.jsx("img",{src:o,alt:"Tiger Outlet",className:"absolute inset-0 w-full h-full object-cover rounded-2xl",onError:v=>{console.error("Image failed to load:",o),console.error("Error event:",v),console.error("Current window location:",window.location.href),console.error("Trying full path:",`${window.location.origin}${o}`),v.currentTarget.style.display="none"},onLoad:()=>{console.log("Image loaded successfully:",o)}}),e.jsx("div",{className:"absolute inset-0 tiger-stripes opacity-20 mix-blend-overlay"}),e.jsx(c.div,{className:"absolute inset-0 rounded-2xl",animate:{boxShadow:t.warningActive?"0 0 30px #E8FF00, inset 0 0 30px #E8FF00":t.shockActive?"0 0 50px #FF0000, inset 0 0 50px #FF0000":"0 0 15px #FF6B35, inset 0 0 15px #FF6B35"},transition:{duration:.2}}),e.jsx(P,{children:t.shockActive&&e.jsx(c.div,{className:"absolute inset-0 bg-red-500 mix-blend-screen rounded-2xl",initial:{opacity:0},animate:{opacity:[0,.8,0,.6,0,.4,0]},exit:{opacity:0},transition:{duration:.5}})})]}),e.jsx(P,{children:d.map(v=>e.jsx(c.div,{className:"absolute w-2 h-2 rounded-full pointer-events-none",style:{backgroundColor:v.color,boxShadow:`0 0 10px ${v.color}`,left:"50%",top:"50%"},initial:{x:0,y:0,scale:0,opacity:1},animate:{x:v.x,y:v.y,scale:[0,1.5,.8,0],opacity:[1,1,.5,0],rotate:[0,180,360]},transition:{duration:v.duration/1e3,ease:"easeOut"}},v.id))}),e.jsx("div",{className:"absolute -bottom-8 left-1/2 transform -translate-x-1/2",children:e.jsxs("div",{className:`px-3 py-1 rounded-full text-xs font-bold ${t.currentRisk==="extreme"?"bg-red-500 text-white":t.currentRisk==="high"?"bg-orange-500 text-white":t.currentRisk==="medium"?"bg-yellow-500 text-black":"bg-green-500 text-white"}`,children:[t.currentRisk==="extreme"?"–≠–ö–°–¢–†–ò–ú":t.currentRisk==="high"?"–í–´–°–û–ö–ò–ô":t.currentRisk==="medium"?"–°–†–ï–î–ù–ò–ô":"–ù–ò–ó–ö–ò–ô"," –†–ò–°–ö"]})}),e.jsx(Ge,{score:f.score,reason:f.reason,isVisible:f.visible,position:{x:0,y:-32},type:f.type})]})},Xe=()=>{const{player:a,gameState:s,singleMode:t}=S();return e.jsxs("div",{className:"fixed top-0 left-0 right-0 z-10 bg-black/20 backdrop-blur-sm border-b border-white/10",children:[e.jsxs("div",{className:"flex justify-between items-center p-4",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs(c.div,{className:"glass-effect px-4 py-2",whileHover:{scale:1.05},children:[e.jsx("div",{className:"text-xs text-gray-300",children:"–°–ß–Å–¢"}),e.jsx("div",{className:"text-xl font-bold text-accent-lime",children:s.score.toLocaleString()})]}),e.jsxs(c.div,{className:"glass-effect px-4 py-2",whileHover:{scale:1.05},children:[e.jsx("div",{className:"text-xs text-gray-300",children:"–í–û–õ–¨–¢–´"}),e.jsxs("div",{className:"text-xl font-bold text-primary-orange",children:[a.volts.toLocaleString(),"‚ö°"]})]})]}),e.jsx("div",{className:"text-center",children:e.jsxs(c.div,{className:"glass-effect px-4 py-2",animate:{scale:t.streakCount>0?[1,1.1,1]:1,boxShadow:t.streakCount>=5?"0 0 20px #E8FF00":"0 0 10px rgba(255,255,255,0.2)"},transition:{duration:.3},children:[e.jsx("div",{className:"text-xs text-gray-300",children:"–°–ï–†–ò–Ø"}),e.jsx("div",{className:`text-xl font-bold ${t.streakCount>=25?"text-red-400":t.streakCount>=10?"text-orange-400":t.streakCount>=5?"text-yellow-400":"text-white"}`,children:t.streakCount})]})}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs(c.div,{className:"glass-effect px-4 py-2",whileHover:{scale:1.05},children:[e.jsx("div",{className:"text-xs text-gray-300",children:"–°–õ–û–ñ–ù–û–°–¢–¨"}),e.jsx("div",{className:`text-sm font-bold ${t.difficulty==="extreme"?"text-red-400":t.difficulty==="hard"?"text-orange-400":t.difficulty==="medium"?"text-yellow-400":"text-green-400"}`,children:t.difficulty==="extreme"?"–≠–ö–°–¢–†–ò–ú":t.difficulty==="hard"?"–°–õ–û–ñ–ù–´–ô":t.difficulty==="medium"?"–°–†–ï–î–ù–ò–ô":"–õ–Å–ì–ö–ò–ô"})]}),e.jsxs(c.div,{className:"glass-effect px-4 py-2",whileHover:{scale:1.05},children:[e.jsx("div",{className:"text-xs text-gray-300",children:"–ù–ê–ñ–ê–¢–ò–ô"}),e.jsx("div",{className:"text-lg font-bold text-accent-blue",children:a.totalClicks})]})]})]}),t.warningActive&&e.jsx(c.div,{className:"bg-yellow-500/80 text-black px-4 py-2 text-center font-bold",initial:{opacity:0,y:-20},animate:{opacity:[0,1,.7,1,.7,1],y:0},transition:{duration:.5},children:"‚ö†Ô∏è –í–ù–ò–ú–ê–ù–ò–ï! –ì–û–¢–û–í–ò–¢–°–Ø –†–ê–ó–†–Ø–î! ‚ö†Ô∏è"})]})},Je=()=>{const{gameState:a,singleMode:s,endGame:t,triggerWarning:i,triggerShock:r,player:l}=S(),[o,n]=u.useState(0),[d,x]=u.useState(!1);u.useEffect(()=>{if(!a.isPlaying)return;const g=setInterval(()=>{n(m=>m+1)},1e3);return()=>clearInterval(g)},[a.isPlaying]),u.useEffect(()=>{if(!a.isPlaying)return;const g=s.difficulty,m={easy:{shockProbability:.15,warningTime:2e3,minInterval:3e3,maxInterval:8e3},medium:{shockProbability:.25,warningTime:1500,minInterval:2500,maxInterval:6e3},hard:{shockProbability:.35,warningTime:1e3,minInterval:2e3,maxInterval:5e3},extreme:{shockProbability:.5,warningTime:500,minInterval:1e3,maxInterval:3e3}}[g],f=()=>{const y=Math.random()*(m.maxInterval-m.minInterval)+m.minInterval;setTimeout(()=>{a.isPlaying&&(i(),q.generateWarningSound(),setTimeout(()=>{a.isPlaying&&(Math.random()<m.shockProbability&&r(),f())},m.warningTime))},y)};f()},[a.isPlaying,s.difficulty,i,r]),u.useEffect(()=>{o>=600&&x(!0)},[o]);const h=()=>{x(!1),n(0),t()},p=g=>{const m=Math.floor(g/60),f=g%60;return`${m.toString().padStart(2,"0")}:${f.toString().padStart(2,"0")}`};return d?e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-background-dark to-background-darker",children:e.jsxs(c.div,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},className:"glass-effect p-8 text-center max-w-md",children:[e.jsx("h2",{className:"text-3xl font-bold text-primary-orange mb-4",children:"–ò–≥—Ä–∞ –æ–∫–æ–Ω—á–µ–Ω–∞!"}),e.jsxs("div",{className:"space-y-3 mb-6",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"–í—Ä–µ–º—è –∏–≥—Ä—ã:"}),e.jsx("span",{className:"font-bold",children:p(o)})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"–§–∏–Ω–∞–ª—å–Ω—ã–π —Å—á—ë—Ç:"}),e.jsx("span",{className:"font-bold text-accent-lime",children:a.score.toLocaleString()})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"–ü–æ–ª—É—á–µ–Ω–æ –≤–æ–ª—å—Ç:"}),e.jsxs("span",{className:"font-bold text-primary-orange",children:[a.score,"‚ö°"]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"–í—Å–µ–≥–æ –Ω–∞–∂–∞—Ç–∏–π:"}),e.jsx("span",{className:"font-bold text-accent-blue",children:l.totalClicks})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"–õ—É—á—à–∞—è —Å–µ—Ä–∏—è:"}),e.jsx("span",{className:"font-bold text-yellow-400",children:l.streak})]})]}),e.jsx(c.button,{onClick:h,className:"w-full glass-effect p-3 rounded-xl hover:bg-primary-orange/20 transition-colors",whileHover:{scale:1.05},whileTap:{scale:.95},children:e.jsx("span",{className:"font-bold",children:"–í–µ—Ä–Ω—É—Ç—å—Å—è –≤ –º–µ–Ω—é"})})]})}):e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-background-dark to-background-darker relative",children:[e.jsx(Xe,{}),e.jsxs("div",{className:"flex flex-col items-center justify-center min-h-screen pt-24 pb-8",children:[e.jsx(c.div,{className:"glass-effect px-6 py-3 mb-8",animate:{scale:o%10===0&&o>0?[1,1.1,1]:1},children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-xs text-gray-300",children:"–í–†–ï–ú–Ø –ò–ì–†–´"}),e.jsx("div",{className:"text-2xl font-bold text-white font-mono",children:p(o)})]})}),e.jsx(Ye,{className:"mb-8"}),e.jsxs("div",{className:"flex space-x-4 text-center",children:[e.jsxs(c.div,{className:"glass-effect px-4 py-2",whileHover:{scale:1.05},children:[e.jsx("div",{className:"text-xs text-gray-300",children:"–ü–û–°–õ–ï–î–ù–ò–ô –†–ò–°–ö"}),e.jsx("div",{className:`text-sm font-bold ${s.currentRisk==="extreme"?"text-red-400":s.currentRisk==="high"?"text-orange-400":s.currentRisk==="medium"?"text-yellow-400":"text-green-400"}`,children:s.currentRisk==="extreme"?"–≠–ö–°–¢–†–ò–ú":s.currentRisk==="high"?"–í–´–°–û–ö–ò–ô":s.currentRisk==="medium"?"–°–†–ï–î–ù–ò–ô":"–ù–ò–ó–ö–ò–ô"})]}),e.jsxs(c.div,{className:"glass-effect px-4 py-2",whileHover:{scale:1.05},children:[e.jsx("div",{className:"text-xs text-gray-300",children:"–°–¢–ê–¢–£–° –ò–ò"}),e.jsx("div",{className:`text-sm font-bold ${s.warningActive?"text-yellow-400":s.shockActive?"text-red-400":"text-green-400"}`,children:s.warningActive?"–ü–†–ï–î–£–ü–†–ï–ñ–î–ï–ù–ò–ï":s.shockActive?"–†–ê–ó–†–Ø–î":"–ë–ï–ó–û–ü–ê–°–ù–û"})]})]}),e.jsx(c.button,{onClick:h,className:"mt-8 glass-effect px-6 py-3 rounded-xl hover:bg-red-500/20 transition-colors",whileHover:{scale:1.05},whileTap:{scale:.95},children:e.jsx("span",{className:"text-red-300 font-bold",children:"–ó–∞–≤–µ—Ä—à–∏—Ç—å –∏–≥—Ä—É"})})]}),e.jsx("div",{className:"fixed inset-0 pointer-events-none overflow-hidden",children:e.jsx(c.div,{className:"absolute inset-0 opacity-10",animate:{backgroundPosition:["0% 0%","100% 100%"]},transition:{duration:20,repeat:1/0,ease:"linear"},style:{backgroundImage:`
              linear-gradient(0deg, transparent 24%, rgba(255, 107, 53, 0.05) 25%, rgba(255, 107, 53, 0.05) 26%, transparent 27%, transparent 74%, rgba(255, 107, 53, 0.05) 75%, rgba(255, 107, 53, 0.05) 76%, transparent 77%, transparent),
              linear-gradient(90deg, transparent 24%, rgba(255, 107, 53, 0.05) 25%, rgba(255, 107, 53, 0.05) 26%, transparent 27%, transparent 74%, rgba(255, 107, 53, 0.05) 75%, rgba(255, 107, 53, 0.05) 76%, transparent 77%, transparent)
            `,backgroundSize:"50px 50px"}})})]})},Qe=({isVisible:a,newLevel:s,voltsReward:t,onClose:i})=>{if(u.useEffect(()=>{a&&b.levelUp()},[a]),!s||!s.level)return a&&console.warn("LevelUpNotification: newLevel is invalid",s),null;const r=E(s.level),l=E(s.level-1),o=r!==l;return e.jsx(P,{children:a&&e.jsx(c.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/80 flex items-center justify-center z-50",onClick:i,children:e.jsxs(c.div,{initial:{scale:.5,opacity:0,rotateY:-90},animate:{scale:1,opacity:1,rotateY:0},exit:{scale:.5,opacity:0,rotateY:90},transition:{type:"spring",stiffness:300,damping:20,duration:.6},className:"glass-effect p-8 max-w-md mx-4 text-center relative overflow-hidden",onClick:n=>n.stopPropagation(),children:[e.jsx("div",{className:"absolute inset-0 pointer-events-none",children:[...Array(20)].map((n,d)=>e.jsx(c.div,{className:"absolute w-1 h-1 bg-yellow-300 rounded-full",style:{left:`${Math.random()*100}%`,top:`${Math.random()*100}%`},animate:{opacity:[0,1,0],scale:[0,1,0]},transition:{duration:2,repeat:1/0,delay:Math.random()*2}},d))}),e.jsxs(c.div,{animate:{scale:[1,1.1,1]},transition:{duration:.6,delay:.3},children:[e.jsx("div",{className:"text-6xl mb-4",children:"üéâ"}),e.jsx(c.h2,{className:"text-3xl font-bold text-primary-orange mb-2",animate:{textShadow:["0 0 10px rgba(255, 107, 53, 0.5)","0 0 20px rgba(255, 107, 53, 0.8)","0 0 10px rgba(255, 107, 53, 0.5)"]},transition:{duration:1.5,repeat:1/0},children:"–ù–û–í–´–ô –£–†–û–í–ï–ù–¨!"}),e.jsxs("div",{className:"mb-4",children:[e.jsx("div",{className:"text-5xl font-bold text-accent-blue mb-2",children:s.level}),e.jsx("div",{className:"text-xl text-yellow-300 font-semibold mb-1",children:s.title}),e.jsx("div",{className:"text-sm text-gray-300 italic",children:s.description})]}),e.jsxs(c.div,{className:"glass-effect p-4 rounded-lg bg-gradient-to-r from-yellow-500/20 to-orange-500/20",animate:{boxShadow:["0 0 20px rgba(255, 193, 7, 0.3)","0 0 30px rgba(255, 193, 7, 0.6)","0 0 20px rgba(255, 193, 7, 0.3)"]},transition:{duration:2,repeat:1/0},children:[e.jsx("div",{className:"text-lg font-bold text-yellow-300 mb-1",children:"–ù–∞–≥—Ä–∞–¥–∞ –∑–∞ —É—Ä–æ–≤–µ–Ω—å:"}),e.jsxs("div",{className:"text-2xl font-bold text-white",children:["+",t,"‚ö° –í–æ–ª—å—Ç"]}),o&&e.jsxs("div",{className:"mt-3 pt-3 border-t border-yellow-400/30",children:[e.jsx("div",{className:"text-sm font-bold text-blue-300 mb-2",children:"üé® –ù–æ–≤–æ–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Ä–æ–∑–µ—Ç–∫–∏!"}),e.jsxs("div",{className:"flex items-center justify-center space-x-4",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-xs text-gray-400",children:"–ë—ã–ª–æ:"}),e.jsx("img",{src:l,alt:"–ü—Ä–µ–¥—ã–¥—É—â–∞—è —Ä–æ–∑–µ—Ç–∫–∞",className:"w-8 h-8 rounded border border-gray-600"})]}),e.jsx("div",{className:"text-yellow-400",children:"‚Üí"}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-xs text-gray-400",children:"–°—Ç–∞–ª–æ:"}),e.jsx("img",{src:r,alt:"–ù–æ–≤–∞—è —Ä–æ–∑–µ—Ç–∫–∞",className:"w-8 h-8 rounded border border-blue-400"})]})]})]})]})]}),e.jsx(c.button,{onClick:i,className:"mt-6 px-6 py-3 bg-primary-orange hover:bg-primary-orange/80 text-white font-bold rounded-lg transition-colors",whileHover:{scale:1.05},whileTap:{scale:.95},children:"–ü—Ä–æ–¥–æ–ª–∂–∏—Ç—å"}),e.jsx("div",{className:"absolute inset-0 pointer-events-none overflow-hidden",children:[...Array(15)].map((n,d)=>e.jsx(c.div,{className:"absolute w-2 h-2 rounded-full",style:{backgroundColor:["#FFD700","#FF6B35","#00D4FF","#E8FF00","#8A2BE2"][d%5],left:`${50+(Math.random()-.5)*60}%`,top:"20%"},animate:{y:["0vh","80vh"],x:[(Math.random()-.5)*200,(Math.random()-.5)*400],rotate:[0,360],opacity:[1,0]},transition:{duration:3,delay:Math.random()*.5,ease:"easeOut"}},`confetti-${d}`))})]})})})};function Ze(){const{gameState:a,levelUpNotification:s,hideLevelUpNotification:t}=S();return u.useEffect(()=>{var i,r;if(typeof window<"u"&&((i=window.Telegram)!=null&&i.WebApp)){const l=window.Telegram.WebApp;l.ready(),l.expand(),l.setHeaderColor("#FF6B35"),l.setBackgroundColor("#1A1A1A"),l.enableClosingConfirmation(),l.MainButton&&(l.MainButton.setText("üéÆ –ò–≥—Ä–∞—Ç—å"),l.MainButton.color="#FF6B35",l.MainButton.textColor="#FFFFFF"),console.log("Telegram WebApp initialized:",{platform:l.platform,version:l.version,colorScheme:l.colorScheme,user:(r=l.initDataUnsafe)==null?void 0:r.user})}else console.log("Running outside Telegram environment")},[]),console.log("App rendering, mode:",a.mode),e.jsx(De,{children:e.jsxs("div",{className:"App",children:[a.mode==="menu"&&e.jsx(Ue,{}),a.mode==="single"&&e.jsx(Je,{}),s.level&&e.jsx(Qe,{isVisible:s.isVisible,newLevel:s.level,voltsReward:s.voltsReward||0,onClose:t})]})})}H.createRoot(document.getElementById("root")).render(e.jsx(W.StrictMode,{children:e.jsx(Ze,{})}));
//# sourceMappingURL=index-BSu3DtFg.js.map
